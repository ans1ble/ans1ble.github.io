第四十六节，生成器函数和迭代器


			<div id="cnblogs_post_body" class="blogpost-body"><p><span style="color: #0000ff;"><strong>生成器函数</strong></span></p>
<p><span style="color: #000000;"><strong>生成器函数就是通过特殊改装过的函数</strong></span></p>
<p><span style="color: #ff0000;"><strong>yield函数关键字，只要函数里写了yield关键字，这个函数就叫做生成器函数</strong></span></p>
<p><span style="color: #000000;"><strong><strong>执行函数内部是一旦遇到<strong>yield关键字会自动退出函数</strong></strong></strong></span></p>
<p><span style="color: #000000;"><strong>生成器函数返回的是一个生成器对象</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">#</span><span style="color: #008000;">!/usr/bin/env python</span><span style="color: #008000;">
#</span><span style="color: #008000;"> -*- coding:utf8 -*-</span>
<span style="color: #0000ff;">def</span><span style="color: #000000;"> asd():
    </span><span style="color: #0000ff;">print</span>(1<span style="color: #000000;">)
    </span><span style="color: #0000ff;">yield</span> 1
    <span style="color: #0000ff;">print</span>(2<span style="color: #000000;">)
    </span><span style="color: #0000ff;">yield</span> 2
    <span style="color: #0000ff;">print</span>(3<span style="color: #000000;">)
    </span><span style="color: #0000ff;">yield</span> 3
    <span style="color: #0000ff;">print</span>(4<span style="color: #000000;">)
    </span><span style="color: #0000ff;">yield</span> 4<span style="color: #000000;">
a </span>=<span style="color: #000000;"> asd()
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(a)
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 输出</span><span style="color: #008000;">
#</span><span style="color: #008000;"> &lt;generator object asd at 0x0000008903305990&gt;</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000;"><strong>__next__()获取生成器方法</strong></span></p>
<p><strong>功能：<strong>__next__()</strong><span style="color: #ff0000;">用于执行<strong>生成器</strong>函数里yield关键字之前的代码，和返回</span><strong><span style="color: #ff0000;">yield关键字的返回值</span>，<span style="color: #ff0000;">也就是去函数里找<strong><strong>yield关键字来执行<strong><strong>yield之前的代码，一旦遇到<strong><strong><strong><strong>yield关键字，退出函数</strong></strong></strong></strong>返回<strong><strong><strong><strong><strong><strong>yield的返回值，如果没有<strong><strong><strong><strong>yield则报错</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></span>，注意函数里有多个<strong><strong>yield，只能获取到第一个，因为函数执行内部时一旦遇到yield关键字就会退出函数，</strong></strong></strong></strong><strong><strong><strong><strong>再次运用<strong><strong>__next__方法时会从上一次<strong>yield退出的地方开始执行函数内部，再次遇到<strong><strong><strong><strong>yield关键词会再次退出，依次循环，</strong></strong></strong></strong> &nbsp;所以有几个<strong><strong><strong><strong>yield关键字，就可以用几个<strong><strong><strong><strong><strong><strong>__next__方法来获取和执行函数内部，</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">#</span><span style="color: #008000;">!/usr/bin/env python</span><span style="color: #008000;">
#</span><span style="color: #008000;"> -*- coding:utf8 -*-</span>
<span style="color: #0000ff;">def</span><span style="color: #000000;"> asd():
    </span><span style="color: #0000ff;">print</span>(11) <span style="color: #008000;">#</span><span style="color: #008000;">函数内部代码</span>
    <span style="color: #0000ff;">yield</span> 1  <span style="color: #008000;">#</span><span style="color: #008000;">yield关键字返回值</span>
    <span style="color: #0000ff;">print</span>(22<span style="color: #000000;">)
    </span><span style="color: #0000ff;">yield</span> 2
    <span style="color: #0000ff;">print</span>(33<span style="color: #000000;">)
    </span><span style="color: #0000ff;">yield</span> 3
    <span style="color: #0000ff;">print</span>(44<span style="color: #000000;">)
    </span><span style="color: #0000ff;">yield</span> 4<span style="color: #000000;">
a </span>=<span style="color: #000000;"> asd()
b </span>= a.<span style="color: #800080;">__next__</span><span style="color: #000000;">()
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(b)

b </span>= a.<span style="color: #800080;">__next__</span><span style="color: #000000;">()
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(b)
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 11  函数内部代码</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 1   yield关键字返回值</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 22  函数内部代码</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 2   yield关键字返回值</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201609/955761-20160907164048707-325140904.png" alt="" /></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000;"><strong>用生成器函数，生成0到5的数</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">#</span><span style="color: #008000;">!/usr/bin/env python</span><span style="color: #008000;">
#</span><span style="color: #008000;"> -*- coding:utf8 -*-</span>
<span style="color: #0000ff;">def</span> range_1(n): <span style="color: #008000;">#</span><span style="color: #008000;">创建生成器函数</span>
    srt = 0 <span style="color: #008000;">#</span><span style="color: #008000;">定义一个值</span>
    <span style="color: #0000ff;">while</span> True: <span style="color: #008000;">#</span><span style="color: #008000;">循环</span>
        <span style="color: #0000ff;">if</span> srt &gt; n: <span style="color: #008000;">#</span><span style="color: #008000;">判断定义值大于接收值时</span>
            <span style="color: #0000ff;">return</span> <span style="color: #008000;">#</span><span style="color: #008000;">定义值大于接收值时退出整个函数</span>
        <span style="color: #0000ff;">yield</span> srt <span style="color: #008000;">#</span><span style="color: #008000;">yield关键字返回yield值</span>
        srt += 1 <span style="color: #008000;">#</span><span style="color: #008000;">每一次循环让定义值加1</span>
a = range_1(5<span style="color: #000000;">)
b1 </span>= a.<span style="color: #800080;">__next__</span>() <span style="color: #008000;">#</span><span style="color: #008000;">__next__方法获取第一次循环的yield返回值</span>
b2 = a.<span style="color: #800080;">__next__</span>() <span style="color: #008000;">#</span><span style="color: #008000;">__next__方法获取第二次循环的yield返回值</span>
b3 = a.<span style="color: #800080;">__next__</span>() <span style="color: #008000;">#</span><span style="color: #008000;">__next__方法获取第三次循环的yield返回值</span>
b4 = a.<span style="color: #800080;">__next__</span>() <span style="color: #008000;">#</span><span style="color: #008000;">__next__方法获取第四次循环的yield返回值</span>
b5 = a.<span style="color: #800080;">__next__</span>() <span style="color: #008000;">#</span><span style="color: #008000;">__next__方法获取第五次循环的yield返回值</span>
b6 = a.<span style="color: #800080;">__next__</span>() <span style="color: #008000;">#</span><span style="color: #008000;">__next__方法获取第六次循环的yield返回值</span>
<span style="color: #0000ff;">print</span><span style="color: #000000;">(b1,b2,b3,b4,b5,b6)
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 输出</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 0 1 2 3 4 5</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #0000ff;"><strong>迭代器</strong></span></p>
<p><span style="color: #000000;"><strong>迭代器，就是能用生成器对象，从头到尾迭代执行生成器函数内部得到结果的方法</strong></span></p>
<p><span style="color: #ff0000;"><strong><strong>__next__()方法迭代器</strong></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">#</span><span style="color: #008000;">!/usr/bin/env python</span><span style="color: #008000;">
#</span><span style="color: #008000;"> -*- coding:utf8 -*-</span>
<span style="color: #800000;">"""</span><span style="color: #800000;">生成器</span><span style="color: #800000;">"""</span>
<span style="color: #0000ff;">def</span> range_1(n): <span style="color: #008000;">#</span><span style="color: #008000;">创建生成器函数</span>
    srt = 0 <span style="color: #008000;">#</span><span style="color: #008000;">定义一个值</span>
    <span style="color: #0000ff;">while</span> True: <span style="color: #008000;">#</span><span style="color: #008000;">循环</span>
        <span style="color: #0000ff;">if</span> srt &gt; n: <span style="color: #008000;">#</span><span style="color: #008000;">判断定义值大于接收值时</span>
            <span style="color: #0000ff;">return</span> <span style="color: #008000;">#</span><span style="color: #008000;">定义值大于接收值时退出整个函数</span>
        <span style="color: #0000ff;">yield</span> srt <span style="color: #008000;">#</span><span style="color: #008000;">yield关键字返回yield值</span>
        srt += 1 <span style="color: #008000;">#</span><span style="color: #008000;">每一次循环让定义值加1</span>
a = range_1(5<span style="color: #000000;">)

</span><span style="color: #800000;">"""</span><span style="color: #800000;">迭代器</span><span style="color: #800000;">"""</span><span style="color: #000000;">
b1 </span>= a.<span style="color: #800080;">__next__</span>() <span style="color: #008000;">#</span><span style="color: #008000;">__next__方法获取第一次循环的yield返回值</span>
b2 = a.<span style="color: #800080;">__next__</span>() <span style="color: #008000;">#</span><span style="color: #008000;">__next__方法获取第二次循环的yield返回值</span>
b3 = a.<span style="color: #800080;">__next__</span>() <span style="color: #008000;">#</span><span style="color: #008000;">__next__方法获取第三次循环的yield返回值</span>
b4 = a.<span style="color: #800080;">__next__</span>() <span style="color: #008000;">#</span><span style="color: #008000;">__next__方法获取第四次循环的yield返回值</span>
b5 = a.<span style="color: #800080;">__next__</span>() <span style="color: #008000;">#</span><span style="color: #008000;">__next__方法获取第五次循环的yield返回值</span>
b6 = a.<span style="color: #800080;">__next__</span>() <span style="color: #008000;">#</span><span style="color: #008000;">__next__方法获取第六次循环的yield返回值</span>
<span style="color: #0000ff;">print</span><span style="color: #000000;">(b1,b2,b3,b4,b5,b6)
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 输出</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 0 1 2 3 4 5</span></pre>
</div>
<p><span style="color: #ff0000;"><strong>for循环迭代器</strong></span></p>
<p><strong><strong>for循环底层封装的也是__next__()方法</strong></strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">#</span><span style="color: #008000;">!/usr/bin/env python</span><span style="color: #008000;">
#</span><span style="color: #008000;"> -*- coding:utf8 -*-</span>
<span style="color: #800000;">"""</span><span style="color: #800000;">生成器</span><span style="color: #800000;">"""</span>
<span style="color: #0000ff;">def</span> range_1(n): <span style="color: #008000;">#</span><span style="color: #008000;">创建生成器函数</span>
    srt = 0 <span style="color: #008000;">#</span><span style="color: #008000;">定义一个值</span>
    <span style="color: #0000ff;">while</span> True: <span style="color: #008000;">#</span><span style="color: #008000;">循环</span>
        <span style="color: #0000ff;">if</span> srt &gt; n: <span style="color: #008000;">#</span><span style="color: #008000;">判断定义值大于接收值时</span>
            <span style="color: #0000ff;">return</span> <span style="color: #008000;">#</span><span style="color: #008000;">定义值大于接收值时退出整个函数</span>
        <span style="color: #0000ff;">yield</span> srt <span style="color: #008000;">#</span><span style="color: #008000;">yield关键字返回yield值</span>
        srt += 1 <span style="color: #008000;">#</span><span style="color: #008000;">每一次循环让定义值加1</span>
a = range_1(5<span style="color: #000000;">)

</span><span style="color: #800000;">"""</span><span style="color: #800000;">迭代器</span><span style="color: #800000;">"""</span>
<span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> a: <span style="color: #008000;">#</span><span style="color: #008000;">用for迭代循环出生成器对象里的数据</span>
    <span style="color: #0000ff;">print</span>(i) <span style="color: #008000;">#</span><span style="color: #008000;">每一次循环打印出数据</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 输出</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 0</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 1</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 2</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 3</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 4</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 5</span></pre>
</div>
<p>&nbsp;</p></div>