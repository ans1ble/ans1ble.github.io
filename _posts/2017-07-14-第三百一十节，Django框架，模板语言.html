第三百一十节，Django框架，模板语言


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>第三百一十节，Django框架，模板语言</strong></p>
<p>&nbsp;</p>
<p><span style="color: #0000ff"><strong>模板语言就是可以将动态数据在html模板渲染的语言</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>一、接收值渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">locals()</span>函数，写在请求响应render()函数里，可以将逻辑处理函数里的变量传到html用模板语言渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">{{...}}</span>接收一个变量或者值进行渲染</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= <span style="color: #800000">'</span><span style="color: #800000">叫卖录音网</span><span style="color: #800000">'</span></span>

    <span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;<span style="background-color: #ff99cc">{{ a }}</span>&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170714235321462-114347448.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>二、接收值，运行代码块</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>for循环</strong></span></p>
<p><strong>{% for item in item_list %} </strong></p>
<p><strong>&nbsp;&lt;a&gt;{{ item }}&lt;/a&gt;</strong></p>
<p><strong><strong>　　forloop.counter　　计数器，记录循环次数</strong><br><strong>　　forloop.first　　 &nbsp;　 判断是否是循环第一次，返回布尔值&nbsp; &nbsp;&nbsp;</strong><br><strong>　　forloop.last　　　　<strong><strong>判断是否是循环最后一次，返回布尔值&nbsp;</strong></strong></strong></strong></p>
<p><strong>&nbsp;{% endfor %}</strong></p>
<p><span style="color: #0000ff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
        </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {{ forloop.counter }}
        {{ forloop.first }}
        {{ forloop.last }}
    {</span>% endfor %<span style="color: #000000">}
</span></span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715090533947-1295732947.png" alt=""></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>if判断</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% if ordered_warranty %} &nbsp;</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% else %} </strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% endif %}</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
<span style="background-color: #ff99cc">        {</span></span><span style="background-color: #ff99cc">% <span style="color: #0000ff">if</span> i == <span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #ee1215</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">elif</span> i == <span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #1b47ee</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">else</span> %<span style="color: #000000">}
            </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% endif %</span><span style="color: #000000"><span style="background-color: #ff99cc">}</span>
    {</span>% endfor %<span style="color: #000000">}
</span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715093211134-1688642175.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>三、母板-子板-母板继承</strong></span></p>
<p><span style="color: #000000"><strong>母板继承就是访问的页面继承一个母板，将访问页面的内容引入到母板里指定的地方，组合成一个新页面返回给浏览器</strong></span></p>
<p><span style="color: #000000"><strong>一般母板里都是写的一个网页里不变的地方，也就是通用的地方，被继承页（访问页）都是每个页面不同的地方，也就是将页面不同的地方引入到母板组合成一个新页面返回浏览器</strong></span></p>
<p><span style="color: #000000"><strong>母板里一般都是网页的、头部、底部、头部底部css、头部底部js</strong></span></p>
<p><span style="color: #000000"><strong>被继承页（访问页）里一般都是新内容，新内容的css和js</strong></span></p>
<p><span style="color: #ff0000"><strong>母板：<span style="color: #0000ff">{% block title %} {% endblock %}</span> 设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span><br><span style="color: #ff0000"><strong>子板：<span style="color: #0000ff">{% extends "base.html" %}	</span>       子板继承母板</strong></span><br><span style="color: #ff0000"><strong>　　　<span style="color: #0000ff">{% block title %} {% endblock %}</span>	设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span></p>
<p><strong>逻辑处理&nbsp;</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    </span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000; background-color: #ff99cc">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><strong>母板</strong></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/tou.css</span><span style="color: #800000">"</span>&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% block css %}{% endblock %<span style="color: #000000">}   #调用子板的css样式
</span></span>&lt;/head&gt;
&lt;body&gt;

&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">tou</span><span style="color: #800000">"</span>&gt;头部&lt;/div&gt;<span style="background-color: #ff99cc"><span style="color: #000000">

{</span>% block nei_rong %}{% endblock %<span style="color: #000000">}  #调用子板的内容区块

</span></span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">wei</span><span style="color: #800000">"</span>&gt;尾部&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><strong>子板（访问页）</strong></p>
<div class="cnblogs_code">
<pre><span style="background-color: #ffff00">{% extends <span style="color: #800000">"</span><span style="color: #800000">tou.html</span><span style="color: #800000">"</span> %</span><span style="color: #000000"><span style="background-color: #ffff00">}  #继承母板</span>

<span style="background-color: #ffcc99">{</span></span><span style="background-color: #ffcc99">% block css %<span style="color: #000000">}　　　　　　 #设置母版调用css样式区块
    </span>&lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/index.css</span><span style="color: #800000">"</span>&gt;<span style="color: #000000">
{</span>% endblock %</span><span style="color: #000000"><span style="background-color: #ffcc99">}</span>

<span style="background-color: #ff99cc">{</span></span><span style="background-color: #ff99cc">% block nei_rong %<span style="color: #000000">}　　　　#设置母版调用字板内容区块
    </span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">neir</span><span style="color: #800000">"</span>&gt;内容&lt;/div&gt;<span style="color: #000000">
{</span>% endblock %}</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715195836243-1060040495.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>四、帮助方法：</strong></span><br><strong>{{ <span style="color: #0000ff">item.event_start</span>|date:"Y-m-d H:i:s"}} 　　 格式化时间</strong><br><strong>{{ <span style="color: #0000ff">bio</span>|truncatewords:"30" }}	　　	　　　　 &nbsp; &nbsp;只显示指定字数</strong><br><strong>{{ <span style="color: #0000ff">my_list</span>|first|upper }}	　　	　　　　　　 &nbsp; &nbsp; &nbsp;首字母大写</strong><br><strong>{{ <span style="color: #0000ff">name</span>|lower }}	　　	　　　　　　　　 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;首字母小写</strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>五、自定义html模板可调用函数模块</strong></span></p>
<p><strong>a、在app应用中创建templatetags目录</strong></p>
<p><strong>b、在目录中创建任意 .py 文件，如：xx.py</strong></p>
<p><strong>在py文件里设置html可调用函数，注意py文件里有几个注意点如下：</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> coding:utf-8</span>
<span style="background-color: #ff99cc"><span style="color: #0000ff">from</span> django <span style="color: #0000ff">import</span><span style="color: #000000"> template　　　　　　　　　　　　　　#必须导入这个模块
</span><span style="color: #0000ff">from</span> django.utils.safestring <span style="color: #0000ff">import</span></span><span style="color: #000000"><span style="background-color: #ff99cc"> mark_safe      #必须导入这个模块</span>

<span style="background-color: #ff99cc">register </span></span><span style="background-color: #ff99cc">=</span><span style="color: #000000"><span style="background-color: #ff99cc"> template.Library()</span>　　     #固定格式必须设置这个变量　　


<span style="background-color: #ff99cc">@register.simple_tag                  #自定义函数必须用上这个装饰器，html页面才可以调用
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_simple_time(v1, v2, v3):  #自定义函数
    </span><span style="color: #0000ff">return</span> v1 + v2 +<span style="color: #000000"> v3


<span style="background-color: #ff99cc">@register.simple_tag
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_input(id, arg):
    result </span>= <span style="color: #800000">"</span><span style="color: #800000">&lt;input type='text' id='%s' class='%s' /&gt;</span><span style="color: #800000">"</span> %<span style="color: #000000"> (id, arg,)
    </span><span style="color: #0000ff">return</span> mark_safe(result)</pre>
</div>
<p><strong>c、在使用自定义函数的html文件中导入自定义函数模块 xx.py 文件名</strong><br><strong>{% load 自定义函数模块名称 %}</strong></p>
<p><strong>d、html页面使用</strong><br><strong>{% 函数名称 参数 参数 参数 %}</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #000000"><span style="background-color: #ff99cc">{% load mbanyuyan %}</span>  #导入自定义函数模块
</span><span style="color: #0000ff">&lt;!</span><span style="color: #ff00ff">DOCTYPE html</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">html </span><span style="color: #ff0000">lang</span><span style="color: #0000ff">="en"</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">meta </span><span style="color: #ff0000">charset</span><span style="color: #0000ff">="UTF-8"</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>Title<span style="color: #0000ff">&lt;/</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span><span style="color: #000000"><span style="background-color: #ff99cc">

{% my_simple_time 1 2 3 %}</span>   #传参并且执行自定义函数

</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">html</span><span style="color: #0000ff">&gt;</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715210007728-278550449.png" alt=""></p>
<p>&nbsp;</p>
<p><strong>注意：使用自定义html函数，必须在全局配置文件settings.py里的INSTALLED_APPS注册了app应用</strong></p>
<div class="cnblogs_code">
<pre>INSTALLED_APPS =<span style="color: #000000"> (
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.admin</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.auth</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.contenttypes</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.sessions</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.messages</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.staticfiles</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">app01</span><span style="color: #800000">'</span><span style="color: #000000">,
)</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><br><strong>&nbsp;</strong></p>
<p>&nbsp;</p></div>第三百一十节，Django框架，模板语言


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>第三百一十节，Django框架，模板语言</strong></p>
<p>&nbsp;</p>
<p><span style="color: #0000ff"><strong>模板语言就是可以将动态数据在html模板渲染的语言</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>一、接收值渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">locals()</span>函数，写在请求响应render()函数里，可以将逻辑处理函数里的变量传到html用模板语言渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">{{...}}</span>接收一个变量或者值进行渲染</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= <span style="color: #800000">'</span><span style="color: #800000">叫卖录音网</span><span style="color: #800000">'</span></span>

    <span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;<span style="background-color: #ff99cc">{{ a }}</span>&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170714235321462-114347448.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>二、接收值，运行代码块</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>for循环</strong></span></p>
<p><strong>{% for item in item_list %} </strong></p>
<p><strong>&nbsp;&lt;a&gt;{{ item }}&lt;/a&gt;</strong></p>
<p><strong><strong>　　forloop.counter　　计数器，记录循环次数</strong><br><strong>　　forloop.first　　 &nbsp;　 判断是否是循环第一次，返回布尔值&nbsp; &nbsp;&nbsp;</strong><br><strong>　　forloop.last　　　　<strong><strong>判断是否是循环最后一次，返回布尔值&nbsp;</strong></strong></strong></strong></p>
<p><strong>&nbsp;{% endfor %}</strong></p>
<p><span style="color: #0000ff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
        </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {{ forloop.counter }}
        {{ forloop.first }}
        {{ forloop.last }}
    {</span>% endfor %<span style="color: #000000">}
</span></span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715090533947-1295732947.png" alt=""></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>if判断</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% if ordered_warranty %} &nbsp;</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% else %} </strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% endif %}</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
<span style="background-color: #ff99cc">        {</span></span><span style="background-color: #ff99cc">% <span style="color: #0000ff">if</span> i == <span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #ee1215</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">elif</span> i == <span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #1b47ee</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">else</span> %<span style="color: #000000">}
            </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% endif %</span><span style="color: #000000"><span style="background-color: #ff99cc">}</span>
    {</span>% endfor %<span style="color: #000000">}
</span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715093211134-1688642175.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>三、母板-子板-母板继承</strong></span></p>
<p><span style="color: #000000"><strong>母板继承就是访问的页面继承一个母板，将访问页面的内容引入到母板里指定的地方，组合成一个新页面返回给浏览器</strong></span></p>
<p><span style="color: #000000"><strong>一般母板里都是写的一个网页里不变的地方，也就是通用的地方，被继承页（访问页）都是每个页面不同的地方，也就是将页面不同的地方引入到母板组合成一个新页面返回浏览器</strong></span></p>
<p><span style="color: #000000"><strong>母板里一般都是网页的、头部、底部、头部底部css、头部底部js</strong></span></p>
<p><span style="color: #000000"><strong>被继承页（访问页）里一般都是新内容，新内容的css和js</strong></span></p>
<p><span style="color: #ff0000"><strong>母板：<span style="color: #0000ff">{% block title %} {% endblock %}</span> 设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span><br><span style="color: #ff0000"><strong>子板：<span style="color: #0000ff">{% extends "base.html" %}	</span>       子板继承母板</strong></span><br><span style="color: #ff0000"><strong>　　　<span style="color: #0000ff">{% block title %} {% endblock %}</span>	设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span></p>
<p><strong>逻辑处理&nbsp;</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    </span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000; background-color: #ff99cc">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><strong>母板</strong></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/tou.css</span><span style="color: #800000">"</span>&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% block css %}{% endblock %<span style="color: #000000">}   #调用子板的css样式
</span></span>&lt;/head&gt;
&lt;body&gt;

&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">tou</span><span style="color: #800000">"</span>&gt;头部&lt;/div&gt;<span style="background-color: #ff99cc"><span style="color: #000000">

{</span>% block nei_rong %}{% endblock %<span style="color: #000000">}  #调用子板的内容区块

</span></span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">wei</span><span style="color: #800000">"</span>&gt;尾部&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><strong>子板（访问页）</strong></p>
<div class="cnblogs_code">
<pre><span style="background-color: #ffff00">{% extends <span style="color: #800000">"</span><span style="color: #800000">tou.html</span><span style="color: #800000">"</span> %</span><span style="color: #000000"><span style="background-color: #ffff00">}  #继承母板</span>

<span style="background-color: #ffcc99">{</span></span><span style="background-color: #ffcc99">% block css %<span style="color: #000000">}　　　　　　 #设置母版调用css样式区块
    </span>&lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/index.css</span><span style="color: #800000">"</span>&gt;<span style="color: #000000">
{</span>% endblock %</span><span style="color: #000000"><span style="background-color: #ffcc99">}</span>

<span style="background-color: #ff99cc">{</span></span><span style="background-color: #ff99cc">% block nei_rong %<span style="color: #000000">}　　　　#设置母版调用字板内容区块
    </span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">neir</span><span style="color: #800000">"</span>&gt;内容&lt;/div&gt;<span style="color: #000000">
{</span>% endblock %}</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715195836243-1060040495.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>四、帮助方法：</strong></span><br><strong>{{ <span style="color: #0000ff">item.event_start</span>|date:"Y-m-d H:i:s"}} 　　 格式化时间</strong><br><strong>{{ <span style="color: #0000ff">bio</span>|truncatewords:"30" }}	　　	　　　　 &nbsp; &nbsp;只显示指定字数</strong><br><strong>{{ <span style="color: #0000ff">my_list</span>|first|upper }}	　　	　　　　　　 &nbsp; &nbsp; &nbsp;首字母大写</strong><br><strong>{{ <span style="color: #0000ff">name</span>|lower }}	　　	　　　　　　　　 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;首字母小写</strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>五、自定义html模板可调用函数模块</strong></span></p>
<p><strong>a、在app应用中创建templatetags目录</strong></p>
<p><strong>b、在目录中创建任意 .py 文件，如：xx.py</strong></p>
<p><strong>在py文件里设置html可调用函数，注意py文件里有几个注意点如下：</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> coding:utf-8</span>
<span style="background-color: #ff99cc"><span style="color: #0000ff">from</span> django <span style="color: #0000ff">import</span><span style="color: #000000"> template　　　　　　　　　　　　　　#必须导入这个模块
</span><span style="color: #0000ff">from</span> django.utils.safestring <span style="color: #0000ff">import</span></span><span style="color: #000000"><span style="background-color: #ff99cc"> mark_safe      #必须导入这个模块</span>

<span style="background-color: #ff99cc">register </span></span><span style="background-color: #ff99cc">=</span><span style="color: #000000"><span style="background-color: #ff99cc"> template.Library()</span>　　     #固定格式必须设置这个变量　　


<span style="background-color: #ff99cc">@register.simple_tag                  #自定义函数必须用上这个装饰器，html页面才可以调用
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_simple_time(v1, v2, v3):  #自定义函数
    </span><span style="color: #0000ff">return</span> v1 + v2 +<span style="color: #000000"> v3


<span style="background-color: #ff99cc">@register.simple_tag
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_input(id, arg):
    result </span>= <span style="color: #800000">"</span><span style="color: #800000">&lt;input type='text' id='%s' class='%s' /&gt;</span><span style="color: #800000">"</span> %<span style="color: #000000"> (id, arg,)
    </span><span style="color: #0000ff">return</span> mark_safe(result)</pre>
</div>
<p><strong>c、在使用自定义函数的html文件中导入自定义函数模块 xx.py 文件名</strong><br><strong>{% load 自定义函数模块名称 %}</strong></p>
<p><strong>d、html页面使用</strong><br><strong>{% 函数名称 参数 参数 参数 %}</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #000000"><span style="background-color: #ff99cc">{% load mbanyuyan %}</span>  #导入自定义函数模块
</span><span style="color: #0000ff">&lt;!</span><span style="color: #ff00ff">DOCTYPE html</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">html </span><span style="color: #ff0000">lang</span><span style="color: #0000ff">="en"</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">meta </span><span style="color: #ff0000">charset</span><span style="color: #0000ff">="UTF-8"</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>Title<span style="color: #0000ff">&lt;/</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span><span style="color: #000000"><span style="background-color: #ff99cc">

{% my_simple_time 1 2 3 %}</span>   #传参并且执行自定义函数

</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">html</span><span style="color: #0000ff">&gt;</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715210007728-278550449.png" alt=""></p>
<p>&nbsp;</p>
<p><strong>注意：使用自定义html函数，必须在全局配置文件settings.py里的INSTALLED_APPS注册了app应用</strong></p>
<div class="cnblogs_code">
<pre>INSTALLED_APPS =<span style="color: #000000"> (
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.admin</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.auth</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.contenttypes</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.sessions</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.messages</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.staticfiles</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">app01</span><span style="color: #800000">'</span><span style="color: #000000">,
)</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><br><strong>&nbsp;</strong></p>
<p>&nbsp;</p></div>第三百一十节，Django框架，模板语言


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>第三百一十节，Django框架，模板语言</strong></p>
<p>&nbsp;</p>
<p><span style="color: #0000ff"><strong>模板语言就是可以将动态数据在html模板渲染的语言</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>一、接收值渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">locals()</span>函数，写在请求响应render()函数里，可以将逻辑处理函数里的变量传到html用模板语言渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">{{...}}</span>接收一个变量或者值进行渲染</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= <span style="color: #800000">'</span><span style="color: #800000">叫卖录音网</span><span style="color: #800000">'</span></span>

    <span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;<span style="background-color: #ff99cc">{{ a }}</span>&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170714235321462-114347448.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>二、接收值，运行代码块</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>for循环</strong></span></p>
<p><strong>{% for item in item_list %} </strong></p>
<p><strong>&nbsp;&lt;a&gt;{{ item }}&lt;/a&gt;</strong></p>
<p><strong><strong>　　forloop.counter　　计数器，记录循环次数</strong><br><strong>　　forloop.first　　 &nbsp;　 判断是否是循环第一次，返回布尔值&nbsp; &nbsp;&nbsp;</strong><br><strong>　　forloop.last　　　　<strong><strong>判断是否是循环最后一次，返回布尔值&nbsp;</strong></strong></strong></strong></p>
<p><strong>&nbsp;{% endfor %}</strong></p>
<p><span style="color: #0000ff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
        </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {{ forloop.counter }}
        {{ forloop.first }}
        {{ forloop.last }}
    {</span>% endfor %<span style="color: #000000">}
</span></span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715090533947-1295732947.png" alt=""></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>if判断</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% if ordered_warranty %} &nbsp;</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% else %} </strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% endif %}</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
<span style="background-color: #ff99cc">        {</span></span><span style="background-color: #ff99cc">% <span style="color: #0000ff">if</span> i == <span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #ee1215</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">elif</span> i == <span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #1b47ee</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">else</span> %<span style="color: #000000">}
            </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% endif %</span><span style="color: #000000"><span style="background-color: #ff99cc">}</span>
    {</span>% endfor %<span style="color: #000000">}
</span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715093211134-1688642175.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>三、母板-子板-母板继承</strong></span></p>
<p><span style="color: #000000"><strong>母板继承就是访问的页面继承一个母板，将访问页面的内容引入到母板里指定的地方，组合成一个新页面返回给浏览器</strong></span></p>
<p><span style="color: #000000"><strong>一般母板里都是写的一个网页里不变的地方，也就是通用的地方，被继承页（访问页）都是每个页面不同的地方，也就是将页面不同的地方引入到母板组合成一个新页面返回浏览器</strong></span></p>
<p><span style="color: #000000"><strong>母板里一般都是网页的、头部、底部、头部底部css、头部底部js</strong></span></p>
<p><span style="color: #000000"><strong>被继承页（访问页）里一般都是新内容，新内容的css和js</strong></span></p>
<p><span style="color: #ff0000"><strong>母板：<span style="color: #0000ff">{% block title %} {% endblock %}</span> 设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span><br><span style="color: #ff0000"><strong>子板：<span style="color: #0000ff">{% extends "base.html" %}	</span>       子板继承母板</strong></span><br><span style="color: #ff0000"><strong>　　　<span style="color: #0000ff">{% block title %} {% endblock %}</span>	设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span></p>
<p><strong>逻辑处理&nbsp;</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    </span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000; background-color: #ff99cc">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><strong>母板</strong></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/tou.css</span><span style="color: #800000">"</span>&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% block css %}{% endblock %<span style="color: #000000">}   #调用子板的css样式
</span></span>&lt;/head&gt;
&lt;body&gt;

&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">tou</span><span style="color: #800000">"</span>&gt;头部&lt;/div&gt;<span style="background-color: #ff99cc"><span style="color: #000000">

{</span>% block nei_rong %}{% endblock %<span style="color: #000000">}  #调用子板的内容区块

</span></span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">wei</span><span style="color: #800000">"</span>&gt;尾部&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><strong>子板（访问页）</strong></p>
<div class="cnblogs_code">
<pre><span style="background-color: #ffff00">{% extends <span style="color: #800000">"</span><span style="color: #800000">tou.html</span><span style="color: #800000">"</span> %</span><span style="color: #000000"><span style="background-color: #ffff00">}  #继承母板</span>

<span style="background-color: #ffcc99">{</span></span><span style="background-color: #ffcc99">% block css %<span style="color: #000000">}　　　　　　 #设置母版调用css样式区块
    </span>&lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/index.css</span><span style="color: #800000">"</span>&gt;<span style="color: #000000">
{</span>% endblock %</span><span style="color: #000000"><span style="background-color: #ffcc99">}</span>

<span style="background-color: #ff99cc">{</span></span><span style="background-color: #ff99cc">% block nei_rong %<span style="color: #000000">}　　　　#设置母版调用字板内容区块
    </span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">neir</span><span style="color: #800000">"</span>&gt;内容&lt;/div&gt;<span style="color: #000000">
{</span>% endblock %}</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715195836243-1060040495.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>四、帮助方法：</strong></span><br><strong>{{ <span style="color: #0000ff">item.event_start</span>|date:"Y-m-d H:i:s"}} 　　 格式化时间</strong><br><strong>{{ <span style="color: #0000ff">bio</span>|truncatewords:"30" }}	　　	　　　　 &nbsp; &nbsp;只显示指定字数</strong><br><strong>{{ <span style="color: #0000ff">my_list</span>|first|upper }}	　　	　　　　　　 &nbsp; &nbsp; &nbsp;首字母大写</strong><br><strong>{{ <span style="color: #0000ff">name</span>|lower }}	　　	　　　　　　　　 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;首字母小写</strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>五、自定义html模板可调用函数模块</strong></span></p>
<p><strong>a、在app应用中创建templatetags目录</strong></p>
<p><strong>b、在目录中创建任意 .py 文件，如：xx.py</strong></p>
<p><strong>在py文件里设置html可调用函数，注意py文件里有几个注意点如下：</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> coding:utf-8</span>
<span style="background-color: #ff99cc"><span style="color: #0000ff">from</span> django <span style="color: #0000ff">import</span><span style="color: #000000"> template　　　　　　　　　　　　　　#必须导入这个模块
</span><span style="color: #0000ff">from</span> django.utils.safestring <span style="color: #0000ff">import</span></span><span style="color: #000000"><span style="background-color: #ff99cc"> mark_safe      #必须导入这个模块</span>

<span style="background-color: #ff99cc">register </span></span><span style="background-color: #ff99cc">=</span><span style="color: #000000"><span style="background-color: #ff99cc"> template.Library()</span>　　     #固定格式必须设置这个变量　　


<span style="background-color: #ff99cc">@register.simple_tag                  #自定义函数必须用上这个装饰器，html页面才可以调用
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_simple_time(v1, v2, v3):  #自定义函数
    </span><span style="color: #0000ff">return</span> v1 + v2 +<span style="color: #000000"> v3


<span style="background-color: #ff99cc">@register.simple_tag
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_input(id, arg):
    result </span>= <span style="color: #800000">"</span><span style="color: #800000">&lt;input type='text' id='%s' class='%s' /&gt;</span><span style="color: #800000">"</span> %<span style="color: #000000"> (id, arg,)
    </span><span style="color: #0000ff">return</span> mark_safe(result)</pre>
</div>
<p><strong>c、在使用自定义函数的html文件中导入自定义函数模块 xx.py 文件名</strong><br><strong>{% load 自定义函数模块名称 %}</strong></p>
<p><strong>d、html页面使用</strong><br><strong>{% 函数名称 参数 参数 参数 %}</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #000000"><span style="background-color: #ff99cc">{% load mbanyuyan %}</span>  #导入自定义函数模块
</span><span style="color: #0000ff">&lt;!</span><span style="color: #ff00ff">DOCTYPE html</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">html </span><span style="color: #ff0000">lang</span><span style="color: #0000ff">="en"</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">meta </span><span style="color: #ff0000">charset</span><span style="color: #0000ff">="UTF-8"</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>Title<span style="color: #0000ff">&lt;/</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span><span style="color: #000000"><span style="background-color: #ff99cc">

{% my_simple_time 1 2 3 %}</span>   #传参并且执行自定义函数

</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">html</span><span style="color: #0000ff">&gt;</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715210007728-278550449.png" alt=""></p>
<p>&nbsp;</p>
<p><strong>注意：使用自定义html函数，必须在全局配置文件settings.py里的INSTALLED_APPS注册了app应用</strong></p>
<div class="cnblogs_code">
<pre>INSTALLED_APPS =<span style="color: #000000"> (
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.admin</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.auth</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.contenttypes</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.sessions</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.messages</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.staticfiles</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">app01</span><span style="color: #800000">'</span><span style="color: #000000">,
)</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><br><strong>&nbsp;</strong></p>
<p>&nbsp;</p></div>第三百一十节，Django框架，模板语言


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>第三百一十节，Django框架，模板语言</strong></p>
<p>&nbsp;</p>
<p><span style="color: #0000ff"><strong>模板语言就是可以将动态数据在html模板渲染的语言</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>一、接收值渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">locals()</span>函数，写在请求响应render()函数里，可以将逻辑处理函数里的变量传到html用模板语言渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">{{...}}</span>接收一个变量或者值进行渲染</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= <span style="color: #800000">'</span><span style="color: #800000">叫卖录音网</span><span style="color: #800000">'</span></span>

    <span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;<span style="background-color: #ff99cc">{{ a }}</span>&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170714235321462-114347448.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>二、接收值，运行代码块</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>for循环</strong></span></p>
<p><strong>{% for item in item_list %} </strong></p>
<p><strong>&nbsp;&lt;a&gt;{{ item }}&lt;/a&gt;</strong></p>
<p><strong><strong>　　forloop.counter　　计数器，记录循环次数</strong><br><strong>　　forloop.first　　 &nbsp;　 判断是否是循环第一次，返回布尔值&nbsp; &nbsp;&nbsp;</strong><br><strong>　　forloop.last　　　　<strong><strong>判断是否是循环最后一次，返回布尔值&nbsp;</strong></strong></strong></strong></p>
<p><strong>&nbsp;{% endfor %}</strong></p>
<p><span style="color: #0000ff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
        </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {{ forloop.counter }}
        {{ forloop.first }}
        {{ forloop.last }}
    {</span>% endfor %<span style="color: #000000">}
</span></span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715090533947-1295732947.png" alt=""></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>if判断</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% if ordered_warranty %} &nbsp;</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% else %} </strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% endif %}</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
<span style="background-color: #ff99cc">        {</span></span><span style="background-color: #ff99cc">% <span style="color: #0000ff">if</span> i == <span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #ee1215</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">elif</span> i == <span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #1b47ee</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">else</span> %<span style="color: #000000">}
            </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% endif %</span><span style="color: #000000"><span style="background-color: #ff99cc">}</span>
    {</span>% endfor %<span style="color: #000000">}
</span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715093211134-1688642175.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>三、母板-子板-母板继承</strong></span></p>
<p><span style="color: #000000"><strong>母板继承就是访问的页面继承一个母板，将访问页面的内容引入到母板里指定的地方，组合成一个新页面返回给浏览器</strong></span></p>
<p><span style="color: #000000"><strong>一般母板里都是写的一个网页里不变的地方，也就是通用的地方，被继承页（访问页）都是每个页面不同的地方，也就是将页面不同的地方引入到母板组合成一个新页面返回浏览器</strong></span></p>
<p><span style="color: #000000"><strong>母板里一般都是网页的、头部、底部、头部底部css、头部底部js</strong></span></p>
<p><span style="color: #000000"><strong>被继承页（访问页）里一般都是新内容，新内容的css和js</strong></span></p>
<p><span style="color: #ff0000"><strong>母板：<span style="color: #0000ff">{% block title %} {% endblock %}</span> 设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span><br><span style="color: #ff0000"><strong>子板：<span style="color: #0000ff">{% extends "base.html" %}	</span>       子板继承母板</strong></span><br><span style="color: #ff0000"><strong>　　　<span style="color: #0000ff">{% block title %} {% endblock %}</span>	设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span></p>
<p><strong>逻辑处理&nbsp;</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    </span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000; background-color: #ff99cc">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><strong>母板</strong></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/tou.css</span><span style="color: #800000">"</span>&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% block css %}{% endblock %<span style="color: #000000">}   #调用子板的css样式
</span></span>&lt;/head&gt;
&lt;body&gt;

&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">tou</span><span style="color: #800000">"</span>&gt;头部&lt;/div&gt;<span style="background-color: #ff99cc"><span style="color: #000000">

{</span>% block nei_rong %}{% endblock %<span style="color: #000000">}  #调用子板的内容区块

</span></span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">wei</span><span style="color: #800000">"</span>&gt;尾部&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><strong>子板（访问页）</strong></p>
<div class="cnblogs_code">
<pre><span style="background-color: #ffff00">{% extends <span style="color: #800000">"</span><span style="color: #800000">tou.html</span><span style="color: #800000">"</span> %</span><span style="color: #000000"><span style="background-color: #ffff00">}  #继承母板</span>

<span style="background-color: #ffcc99">{</span></span><span style="background-color: #ffcc99">% block css %<span style="color: #000000">}　　　　　　 #设置母版调用css样式区块
    </span>&lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/index.css</span><span style="color: #800000">"</span>&gt;<span style="color: #000000">
{</span>% endblock %</span><span style="color: #000000"><span style="background-color: #ffcc99">}</span>

<span style="background-color: #ff99cc">{</span></span><span style="background-color: #ff99cc">% block nei_rong %<span style="color: #000000">}　　　　#设置母版调用字板内容区块
    </span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">neir</span><span style="color: #800000">"</span>&gt;内容&lt;/div&gt;<span style="color: #000000">
{</span>% endblock %}</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715195836243-1060040495.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>四、帮助方法：</strong></span><br><strong>{{ <span style="color: #0000ff">item.event_start</span>|date:"Y-m-d H:i:s"}} 　　 格式化时间</strong><br><strong>{{ <span style="color: #0000ff">bio</span>|truncatewords:"30" }}	　　	　　　　 &nbsp; &nbsp;只显示指定字数</strong><br><strong>{{ <span style="color: #0000ff">my_list</span>|first|upper }}	　　	　　　　　　 &nbsp; &nbsp; &nbsp;首字母大写</strong><br><strong>{{ <span style="color: #0000ff">name</span>|lower }}	　　	　　　　　　　　 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;首字母小写</strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>五、自定义html模板可调用函数模块</strong></span></p>
<p><strong>a、在app应用中创建templatetags目录</strong></p>
<p><strong>b、在目录中创建任意 .py 文件，如：xx.py</strong></p>
<p><strong>在py文件里设置html可调用函数，注意py文件里有几个注意点如下：</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> coding:utf-8</span>
<span style="background-color: #ff99cc"><span style="color: #0000ff">from</span> django <span style="color: #0000ff">import</span><span style="color: #000000"> template　　　　　　　　　　　　　　#必须导入这个模块
</span><span style="color: #0000ff">from</span> django.utils.safestring <span style="color: #0000ff">import</span></span><span style="color: #000000"><span style="background-color: #ff99cc"> mark_safe      #必须导入这个模块</span>

<span style="background-color: #ff99cc">register </span></span><span style="background-color: #ff99cc">=</span><span style="color: #000000"><span style="background-color: #ff99cc"> template.Library()</span>　　     #固定格式必须设置这个变量　　


<span style="background-color: #ff99cc">@register.simple_tag                  #自定义函数必须用上这个装饰器，html页面才可以调用
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_simple_time(v1, v2, v3):  #自定义函数
    </span><span style="color: #0000ff">return</span> v1 + v2 +<span style="color: #000000"> v3


<span style="background-color: #ff99cc">@register.simple_tag
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_input(id, arg):
    result </span>= <span style="color: #800000">"</span><span style="color: #800000">&lt;input type='text' id='%s' class='%s' /&gt;</span><span style="color: #800000">"</span> %<span style="color: #000000"> (id, arg,)
    </span><span style="color: #0000ff">return</span> mark_safe(result)</pre>
</div>
<p><strong>c、在使用自定义函数的html文件中导入自定义函数模块 xx.py 文件名</strong><br><strong>{% load 自定义函数模块名称 %}</strong></p>
<p><strong>d、html页面使用</strong><br><strong>{% 函数名称 参数 参数 参数 %}</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #000000"><span style="background-color: #ff99cc">{% load mbanyuyan %}</span>  #导入自定义函数模块
</span><span style="color: #0000ff">&lt;!</span><span style="color: #ff00ff">DOCTYPE html</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">html </span><span style="color: #ff0000">lang</span><span style="color: #0000ff">="en"</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">meta </span><span style="color: #ff0000">charset</span><span style="color: #0000ff">="UTF-8"</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>Title<span style="color: #0000ff">&lt;/</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span><span style="color: #000000"><span style="background-color: #ff99cc">

{% my_simple_time 1 2 3 %}</span>   #传参并且执行自定义函数

</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">html</span><span style="color: #0000ff">&gt;</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715210007728-278550449.png" alt=""></p>
<p>&nbsp;</p>
<p><strong>注意：使用自定义html函数，必须在全局配置文件settings.py里的INSTALLED_APPS注册了app应用</strong></p>
<div class="cnblogs_code">
<pre>INSTALLED_APPS =<span style="color: #000000"> (
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.admin</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.auth</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.contenttypes</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.sessions</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.messages</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.staticfiles</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">app01</span><span style="color: #800000">'</span><span style="color: #000000">,
)</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><br><strong>&nbsp;</strong></p>
<p>&nbsp;</p></div>第三百一十节，Django框架，模板语言


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>第三百一十节，Django框架，模板语言</strong></p>
<p>&nbsp;</p>
<p><span style="color: #0000ff"><strong>模板语言就是可以将动态数据在html模板渲染的语言</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>一、接收值渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">locals()</span>函数，写在请求响应render()函数里，可以将逻辑处理函数里的变量传到html用模板语言渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">{{...}}</span>接收一个变量或者值进行渲染</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= <span style="color: #800000">'</span><span style="color: #800000">叫卖录音网</span><span style="color: #800000">'</span></span>

    <span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;<span style="background-color: #ff99cc">{{ a }}</span>&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170714235321462-114347448.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>二、接收值，运行代码块</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>for循环</strong></span></p>
<p><strong>{% for item in item_list %} </strong></p>
<p><strong>&nbsp;&lt;a&gt;{{ item }}&lt;/a&gt;</strong></p>
<p><strong><strong>　　forloop.counter　　计数器，记录循环次数</strong><br><strong>　　forloop.first　　 &nbsp;　 判断是否是循环第一次，返回布尔值&nbsp; &nbsp;&nbsp;</strong><br><strong>　　forloop.last　　　　<strong><strong>判断是否是循环最后一次，返回布尔值&nbsp;</strong></strong></strong></strong></p>
<p><strong>&nbsp;{% endfor %}</strong></p>
<p><span style="color: #0000ff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
        </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {{ forloop.counter }}
        {{ forloop.first }}
        {{ forloop.last }}
    {</span>% endfor %<span style="color: #000000">}
</span></span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715090533947-1295732947.png" alt=""></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>if判断</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% if ordered_warranty %} &nbsp;</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% else %} </strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% endif %}</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
<span style="background-color: #ff99cc">        {</span></span><span style="background-color: #ff99cc">% <span style="color: #0000ff">if</span> i == <span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #ee1215</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">elif</span> i == <span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #1b47ee</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">else</span> %<span style="color: #000000">}
            </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% endif %</span><span style="color: #000000"><span style="background-color: #ff99cc">}</span>
    {</span>% endfor %<span style="color: #000000">}
</span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715093211134-1688642175.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>三、母板-子板-母板继承</strong></span></p>
<p><span style="color: #000000"><strong>母板继承就是访问的页面继承一个母板，将访问页面的内容引入到母板里指定的地方，组合成一个新页面返回给浏览器</strong></span></p>
<p><span style="color: #000000"><strong>一般母板里都是写的一个网页里不变的地方，也就是通用的地方，被继承页（访问页）都是每个页面不同的地方，也就是将页面不同的地方引入到母板组合成一个新页面返回浏览器</strong></span></p>
<p><span style="color: #000000"><strong>母板里一般都是网页的、头部、底部、头部底部css、头部底部js</strong></span></p>
<p><span style="color: #000000"><strong>被继承页（访问页）里一般都是新内容，新内容的css和js</strong></span></p>
<p><span style="color: #ff0000"><strong>母板：<span style="color: #0000ff">{% block title %} {% endblock %}</span> 设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span><br><span style="color: #ff0000"><strong>子板：<span style="color: #0000ff">{% extends "base.html" %}	</span>       子板继承母板</strong></span><br><span style="color: #ff0000"><strong>　　　<span style="color: #0000ff">{% block title %} {% endblock %}</span>	设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span></p>
<p><strong>逻辑处理&nbsp;</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    </span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000; background-color: #ff99cc">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><strong>母板</strong></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/tou.css</span><span style="color: #800000">"</span>&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% block css %}{% endblock %<span style="color: #000000">}   #调用子板的css样式
</span></span>&lt;/head&gt;
&lt;body&gt;

&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">tou</span><span style="color: #800000">"</span>&gt;头部&lt;/div&gt;<span style="background-color: #ff99cc"><span style="color: #000000">

{</span>% block nei_rong %}{% endblock %<span style="color: #000000">}  #调用子板的内容区块

</span></span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">wei</span><span style="color: #800000">"</span>&gt;尾部&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><strong>子板（访问页）</strong></p>
<div class="cnblogs_code">
<pre><span style="background-color: #ffff00">{% extends <span style="color: #800000">"</span><span style="color: #800000">tou.html</span><span style="color: #800000">"</span> %</span><span style="color: #000000"><span style="background-color: #ffff00">}  #继承母板</span>

<span style="background-color: #ffcc99">{</span></span><span style="background-color: #ffcc99">% block css %<span style="color: #000000">}　　　　　　 #设置母版调用css样式区块
    </span>&lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/index.css</span><span style="color: #800000">"</span>&gt;<span style="color: #000000">
{</span>% endblock %</span><span style="color: #000000"><span style="background-color: #ffcc99">}</span>

<span style="background-color: #ff99cc">{</span></span><span style="background-color: #ff99cc">% block nei_rong %<span style="color: #000000">}　　　　#设置母版调用字板内容区块
    </span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">neir</span><span style="color: #800000">"</span>&gt;内容&lt;/div&gt;<span style="color: #000000">
{</span>% endblock %}</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715195836243-1060040495.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>四、帮助方法：</strong></span><br><strong>{{ <span style="color: #0000ff">item.event_start</span>|date:"Y-m-d H:i:s"}} 　　 格式化时间</strong><br><strong>{{ <span style="color: #0000ff">bio</span>|truncatewords:"30" }}	　　	　　　　 &nbsp; &nbsp;只显示指定字数</strong><br><strong>{{ <span style="color: #0000ff">my_list</span>|first|upper }}	　　	　　　　　　 &nbsp; &nbsp; &nbsp;首字母大写</strong><br><strong>{{ <span style="color: #0000ff">name</span>|lower }}	　　	　　　　　　　　 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;首字母小写</strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>五、自定义html模板可调用函数模块</strong></span></p>
<p><strong>a、在app应用中创建templatetags目录</strong></p>
<p><strong>b、在目录中创建任意 .py 文件，如：xx.py</strong></p>
<p><strong>在py文件里设置html可调用函数，注意py文件里有几个注意点如下：</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> coding:utf-8</span>
<span style="background-color: #ff99cc"><span style="color: #0000ff">from</span> django <span style="color: #0000ff">import</span><span style="color: #000000"> template　　　　　　　　　　　　　　#必须导入这个模块
</span><span style="color: #0000ff">from</span> django.utils.safestring <span style="color: #0000ff">import</span></span><span style="color: #000000"><span style="background-color: #ff99cc"> mark_safe      #必须导入这个模块</span>

<span style="background-color: #ff99cc">register </span></span><span style="background-color: #ff99cc">=</span><span style="color: #000000"><span style="background-color: #ff99cc"> template.Library()</span>　　     #固定格式必须设置这个变量　　


<span style="background-color: #ff99cc">@register.simple_tag                  #自定义函数必须用上这个装饰器，html页面才可以调用
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_simple_time(v1, v2, v3):  #自定义函数
    </span><span style="color: #0000ff">return</span> v1 + v2 +<span style="color: #000000"> v3


<span style="background-color: #ff99cc">@register.simple_tag
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_input(id, arg):
    result </span>= <span style="color: #800000">"</span><span style="color: #800000">&lt;input type='text' id='%s' class='%s' /&gt;</span><span style="color: #800000">"</span> %<span style="color: #000000"> (id, arg,)
    </span><span style="color: #0000ff">return</span> mark_safe(result)</pre>
</div>
<p><strong>c、在使用自定义函数的html文件中导入自定义函数模块 xx.py 文件名</strong><br><strong>{% load 自定义函数模块名称 %}</strong></p>
<p><strong>d、html页面使用</strong><br><strong>{% 函数名称 参数 参数 参数 %}</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #000000"><span style="background-color: #ff99cc">{% load mbanyuyan %}</span>  #导入自定义函数模块
</span><span style="color: #0000ff">&lt;!</span><span style="color: #ff00ff">DOCTYPE html</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">html </span><span style="color: #ff0000">lang</span><span style="color: #0000ff">="en"</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">meta </span><span style="color: #ff0000">charset</span><span style="color: #0000ff">="UTF-8"</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>Title<span style="color: #0000ff">&lt;/</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span><span style="color: #000000"><span style="background-color: #ff99cc">

{% my_simple_time 1 2 3 %}</span>   #传参并且执行自定义函数

</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">html</span><span style="color: #0000ff">&gt;</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715210007728-278550449.png" alt=""></p>
<p>&nbsp;</p>
<p><strong>注意：使用自定义html函数，必须在全局配置文件settings.py里的INSTALLED_APPS注册了app应用</strong></p>
<div class="cnblogs_code">
<pre>INSTALLED_APPS =<span style="color: #000000"> (
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.admin</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.auth</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.contenttypes</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.sessions</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.messages</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.staticfiles</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">app01</span><span style="color: #800000">'</span><span style="color: #000000">,
)</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><br><strong>&nbsp;</strong></p>
<p>&nbsp;</p></div>第三百一十节，Django框架，模板语言


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>第三百一十节，Django框架，模板语言</strong></p>
<p>&nbsp;</p>
<p><span style="color: #0000ff"><strong>模板语言就是可以将动态数据在html模板渲染的语言</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>一、接收值渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">locals()</span>函数，写在请求响应render()函数里，可以将逻辑处理函数里的变量传到html用模板语言渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">{{...}}</span>接收一个变量或者值进行渲染</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= <span style="color: #800000">'</span><span style="color: #800000">叫卖录音网</span><span style="color: #800000">'</span></span>

    <span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;<span style="background-color: #ff99cc">{{ a }}</span>&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170714235321462-114347448.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>二、接收值，运行代码块</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>for循环</strong></span></p>
<p><strong>{% for item in item_list %} </strong></p>
<p><strong>&nbsp;&lt;a&gt;{{ item }}&lt;/a&gt;</strong></p>
<p><strong><strong>　　forloop.counter　　计数器，记录循环次数</strong><br><strong>　　forloop.first　　 &nbsp;　 判断是否是循环第一次，返回布尔值&nbsp; &nbsp;&nbsp;</strong><br><strong>　　forloop.last　　　　<strong><strong>判断是否是循环最后一次，返回布尔值&nbsp;</strong></strong></strong></strong></p>
<p><strong>&nbsp;{% endfor %}</strong></p>
<p><span style="color: #0000ff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
        </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {{ forloop.counter }}
        {{ forloop.first }}
        {{ forloop.last }}
    {</span>% endfor %<span style="color: #000000">}
</span></span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715090533947-1295732947.png" alt=""></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>if判断</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% if ordered_warranty %} &nbsp;</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% else %} </strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% endif %}</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
<span style="background-color: #ff99cc">        {</span></span><span style="background-color: #ff99cc">% <span style="color: #0000ff">if</span> i == <span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #ee1215</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">elif</span> i == <span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #1b47ee</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">else</span> %<span style="color: #000000">}
            </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% endif %</span><span style="color: #000000"><span style="background-color: #ff99cc">}</span>
    {</span>% endfor %<span style="color: #000000">}
</span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715093211134-1688642175.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>三、母板-子板-母板继承</strong></span></p>
<p><span style="color: #000000"><strong>母板继承就是访问的页面继承一个母板，将访问页面的内容引入到母板里指定的地方，组合成一个新页面返回给浏览器</strong></span></p>
<p><span style="color: #000000"><strong>一般母板里都是写的一个网页里不变的地方，也就是通用的地方，被继承页（访问页）都是每个页面不同的地方，也就是将页面不同的地方引入到母板组合成一个新页面返回浏览器</strong></span></p>
<p><span style="color: #000000"><strong>母板里一般都是网页的、头部、底部、头部底部css、头部底部js</strong></span></p>
<p><span style="color: #000000"><strong>被继承页（访问页）里一般都是新内容，新内容的css和js</strong></span></p>
<p><span style="color: #ff0000"><strong>母板：<span style="color: #0000ff">{% block title %} {% endblock %}</span> 设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span><br><span style="color: #ff0000"><strong>子板：<span style="color: #0000ff">{% extends "base.html" %}	</span>       子板继承母板</strong></span><br><span style="color: #ff0000"><strong>　　　<span style="color: #0000ff">{% block title %} {% endblock %}</span>	设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span></p>
<p><strong>逻辑处理&nbsp;</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    </span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000; background-color: #ff99cc">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><strong>母板</strong></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/tou.css</span><span style="color: #800000">"</span>&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% block css %}{% endblock %<span style="color: #000000">}   #调用子板的css样式
</span></span>&lt;/head&gt;
&lt;body&gt;

&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">tou</span><span style="color: #800000">"</span>&gt;头部&lt;/div&gt;<span style="background-color: #ff99cc"><span style="color: #000000">

{</span>% block nei_rong %}{% endblock %<span style="color: #000000">}  #调用子板的内容区块

</span></span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">wei</span><span style="color: #800000">"</span>&gt;尾部&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><strong>子板（访问页）</strong></p>
<div class="cnblogs_code">
<pre><span style="background-color: #ffff00">{% extends <span style="color: #800000">"</span><span style="color: #800000">tou.html</span><span style="color: #800000">"</span> %</span><span style="color: #000000"><span style="background-color: #ffff00">}  #继承母板</span>

<span style="background-color: #ffcc99">{</span></span><span style="background-color: #ffcc99">% block css %<span style="color: #000000">}　　　　　　 #设置母版调用css样式区块
    </span>&lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/index.css</span><span style="color: #800000">"</span>&gt;<span style="color: #000000">
{</span>% endblock %</span><span style="color: #000000"><span style="background-color: #ffcc99">}</span>

<span style="background-color: #ff99cc">{</span></span><span style="background-color: #ff99cc">% block nei_rong %<span style="color: #000000">}　　　　#设置母版调用字板内容区块
    </span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">neir</span><span style="color: #800000">"</span>&gt;内容&lt;/div&gt;<span style="color: #000000">
{</span>% endblock %}</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715195836243-1060040495.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>四、帮助方法：</strong></span><br><strong>{{ <span style="color: #0000ff">item.event_start</span>|date:"Y-m-d H:i:s"}} 　　 格式化时间</strong><br><strong>{{ <span style="color: #0000ff">bio</span>|truncatewords:"30" }}	　　	　　　　 &nbsp; &nbsp;只显示指定字数</strong><br><strong>{{ <span style="color: #0000ff">my_list</span>|first|upper }}	　　	　　　　　　 &nbsp; &nbsp; &nbsp;首字母大写</strong><br><strong>{{ <span style="color: #0000ff">name</span>|lower }}	　　	　　　　　　　　 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;首字母小写</strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>五、自定义html模板可调用函数模块</strong></span></p>
<p><strong>a、在app应用中创建templatetags目录</strong></p>
<p><strong>b、在目录中创建任意 .py 文件，如：xx.py</strong></p>
<p><strong>在py文件里设置html可调用函数，注意py文件里有几个注意点如下：</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> coding:utf-8</span>
<span style="background-color: #ff99cc"><span style="color: #0000ff">from</span> django <span style="color: #0000ff">import</span><span style="color: #000000"> template　　　　　　　　　　　　　　#必须导入这个模块
</span><span style="color: #0000ff">from</span> django.utils.safestring <span style="color: #0000ff">import</span></span><span style="color: #000000"><span style="background-color: #ff99cc"> mark_safe      #必须导入这个模块</span>

<span style="background-color: #ff99cc">register </span></span><span style="background-color: #ff99cc">=</span><span style="color: #000000"><span style="background-color: #ff99cc"> template.Library()</span>　　     #固定格式必须设置这个变量　　


<span style="background-color: #ff99cc">@register.simple_tag                  #自定义函数必须用上这个装饰器，html页面才可以调用
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_simple_time(v1, v2, v3):  #自定义函数
    </span><span style="color: #0000ff">return</span> v1 + v2 +<span style="color: #000000"> v3


<span style="background-color: #ff99cc">@register.simple_tag
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_input(id, arg):
    result </span>= <span style="color: #800000">"</span><span style="color: #800000">&lt;input type='text' id='%s' class='%s' /&gt;</span><span style="color: #800000">"</span> %<span style="color: #000000"> (id, arg,)
    </span><span style="color: #0000ff">return</span> mark_safe(result)</pre>
</div>
<p><strong>c、在使用自定义函数的html文件中导入自定义函数模块 xx.py 文件名</strong><br><strong>{% load 自定义函数模块名称 %}</strong></p>
<p><strong>d、html页面使用</strong><br><strong>{% 函数名称 参数 参数 参数 %}</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #000000"><span style="background-color: #ff99cc">{% load mbanyuyan %}</span>  #导入自定义函数模块
</span><span style="color: #0000ff">&lt;!</span><span style="color: #ff00ff">DOCTYPE html</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">html </span><span style="color: #ff0000">lang</span><span style="color: #0000ff">="en"</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">meta </span><span style="color: #ff0000">charset</span><span style="color: #0000ff">="UTF-8"</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>Title<span style="color: #0000ff">&lt;/</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span><span style="color: #000000"><span style="background-color: #ff99cc">

{% my_simple_time 1 2 3 %}</span>   #传参并且执行自定义函数

</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">html</span><span style="color: #0000ff">&gt;</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715210007728-278550449.png" alt=""></p>
<p>&nbsp;</p>
<p><strong>注意：使用自定义html函数，必须在全局配置文件settings.py里的INSTALLED_APPS注册了app应用</strong></p>
<div class="cnblogs_code">
<pre>INSTALLED_APPS =<span style="color: #000000"> (
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.admin</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.auth</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.contenttypes</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.sessions</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.messages</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.staticfiles</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">app01</span><span style="color: #800000">'</span><span style="color: #000000">,
)</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><br><strong>&nbsp;</strong></p>
<p>&nbsp;</p></div>第三百一十节，Django框架，模板语言


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>第三百一十节，Django框架，模板语言</strong></p>
<p>&nbsp;</p>
<p><span style="color: #0000ff"><strong>模板语言就是可以将动态数据在html模板渲染的语言</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>一、接收值渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">locals()</span>函数，写在请求响应render()函数里，可以将逻辑处理函数里的变量传到html用模板语言渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">{{...}}</span>接收一个变量或者值进行渲染</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= <span style="color: #800000">'</span><span style="color: #800000">叫卖录音网</span><span style="color: #800000">'</span></span>

    <span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;<span style="background-color: #ff99cc">{{ a }}</span>&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170714235321462-114347448.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>二、接收值，运行代码块</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>for循环</strong></span></p>
<p><strong>{% for item in item_list %} </strong></p>
<p><strong>&nbsp;&lt;a&gt;{{ item }}&lt;/a&gt;</strong></p>
<p><strong><strong>　　forloop.counter　　计数器，记录循环次数</strong><br><strong>　　forloop.first　　 &nbsp;　 判断是否是循环第一次，返回布尔值&nbsp; &nbsp;&nbsp;</strong><br><strong>　　forloop.last　　　　<strong><strong>判断是否是循环最后一次，返回布尔值&nbsp;</strong></strong></strong></strong></p>
<p><strong>&nbsp;{% endfor %}</strong></p>
<p><span style="color: #0000ff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
        </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {{ forloop.counter }}
        {{ forloop.first }}
        {{ forloop.last }}
    {</span>% endfor %<span style="color: #000000">}
</span></span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715090533947-1295732947.png" alt=""></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>if判断</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% if ordered_warranty %} &nbsp;</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% else %} </strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% endif %}</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
<span style="background-color: #ff99cc">        {</span></span><span style="background-color: #ff99cc">% <span style="color: #0000ff">if</span> i == <span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #ee1215</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">elif</span> i == <span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #1b47ee</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">else</span> %<span style="color: #000000">}
            </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% endif %</span><span style="color: #000000"><span style="background-color: #ff99cc">}</span>
    {</span>% endfor %<span style="color: #000000">}
</span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715093211134-1688642175.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>三、母板-子板-母板继承</strong></span></p>
<p><span style="color: #000000"><strong>母板继承就是访问的页面继承一个母板，将访问页面的内容引入到母板里指定的地方，组合成一个新页面返回给浏览器</strong></span></p>
<p><span style="color: #000000"><strong>一般母板里都是写的一个网页里不变的地方，也就是通用的地方，被继承页（访问页）都是每个页面不同的地方，也就是将页面不同的地方引入到母板组合成一个新页面返回浏览器</strong></span></p>
<p><span style="color: #000000"><strong>母板里一般都是网页的、头部、底部、头部底部css、头部底部js</strong></span></p>
<p><span style="color: #000000"><strong>被继承页（访问页）里一般都是新内容，新内容的css和js</strong></span></p>
<p><span style="color: #ff0000"><strong>母板：<span style="color: #0000ff">{% block title %} {% endblock %}</span> 设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span><br><span style="color: #ff0000"><strong>子板：<span style="color: #0000ff">{% extends "base.html" %}	</span>       子板继承母板</strong></span><br><span style="color: #ff0000"><strong>　　　<span style="color: #0000ff">{% block title %} {% endblock %}</span>	设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span></p>
<p><strong>逻辑处理&nbsp;</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    </span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000; background-color: #ff99cc">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><strong>母板</strong></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/tou.css</span><span style="color: #800000">"</span>&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% block css %}{% endblock %<span style="color: #000000">}   #调用子板的css样式
</span></span>&lt;/head&gt;
&lt;body&gt;

&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">tou</span><span style="color: #800000">"</span>&gt;头部&lt;/div&gt;<span style="background-color: #ff99cc"><span style="color: #000000">

{</span>% block nei_rong %}{% endblock %<span style="color: #000000">}  #调用子板的内容区块

</span></span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">wei</span><span style="color: #800000">"</span>&gt;尾部&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><strong>子板（访问页）</strong></p>
<div class="cnblogs_code">
<pre><span style="background-color: #ffff00">{% extends <span style="color: #800000">"</span><span style="color: #800000">tou.html</span><span style="color: #800000">"</span> %</span><span style="color: #000000"><span style="background-color: #ffff00">}  #继承母板</span>

<span style="background-color: #ffcc99">{</span></span><span style="background-color: #ffcc99">% block css %<span style="color: #000000">}　　　　　　 #设置母版调用css样式区块
    </span>&lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/index.css</span><span style="color: #800000">"</span>&gt;<span style="color: #000000">
{</span>% endblock %</span><span style="color: #000000"><span style="background-color: #ffcc99">}</span>

<span style="background-color: #ff99cc">{</span></span><span style="background-color: #ff99cc">% block nei_rong %<span style="color: #000000">}　　　　#设置母版调用字板内容区块
    </span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">neir</span><span style="color: #800000">"</span>&gt;内容&lt;/div&gt;<span style="color: #000000">
{</span>% endblock %}</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715195836243-1060040495.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>四、帮助方法：</strong></span><br><strong>{{ <span style="color: #0000ff">item.event_start</span>|date:"Y-m-d H:i:s"}} 　　 格式化时间</strong><br><strong>{{ <span style="color: #0000ff">bio</span>|truncatewords:"30" }}	　　	　　　　 &nbsp; &nbsp;只显示指定字数</strong><br><strong>{{ <span style="color: #0000ff">my_list</span>|first|upper }}	　　	　　　　　　 &nbsp; &nbsp; &nbsp;首字母大写</strong><br><strong>{{ <span style="color: #0000ff">name</span>|lower }}	　　	　　　　　　　　 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;首字母小写</strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>五、自定义html模板可调用函数模块</strong></span></p>
<p><strong>a、在app应用中创建templatetags目录</strong></p>
<p><strong>b、在目录中创建任意 .py 文件，如：xx.py</strong></p>
<p><strong>在py文件里设置html可调用函数，注意py文件里有几个注意点如下：</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> coding:utf-8</span>
<span style="background-color: #ff99cc"><span style="color: #0000ff">from</span> django <span style="color: #0000ff">import</span><span style="color: #000000"> template　　　　　　　　　　　　　　#必须导入这个模块
</span><span style="color: #0000ff">from</span> django.utils.safestring <span style="color: #0000ff">import</span></span><span style="color: #000000"><span style="background-color: #ff99cc"> mark_safe      #必须导入这个模块</span>

<span style="background-color: #ff99cc">register </span></span><span style="background-color: #ff99cc">=</span><span style="color: #000000"><span style="background-color: #ff99cc"> template.Library()</span>　　     #固定格式必须设置这个变量　　


<span style="background-color: #ff99cc">@register.simple_tag                  #自定义函数必须用上这个装饰器，html页面才可以调用
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_simple_time(v1, v2, v3):  #自定义函数
    </span><span style="color: #0000ff">return</span> v1 + v2 +<span style="color: #000000"> v3


<span style="background-color: #ff99cc">@register.simple_tag
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_input(id, arg):
    result </span>= <span style="color: #800000">"</span><span style="color: #800000">&lt;input type='text' id='%s' class='%s' /&gt;</span><span style="color: #800000">"</span> %<span style="color: #000000"> (id, arg,)
    </span><span style="color: #0000ff">return</span> mark_safe(result)</pre>
</div>
<p><strong>c、在使用自定义函数的html文件中导入自定义函数模块 xx.py 文件名</strong><br><strong>{% load 自定义函数模块名称 %}</strong></p>
<p><strong>d、html页面使用</strong><br><strong>{% 函数名称 参数 参数 参数 %}</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #000000"><span style="background-color: #ff99cc">{% load mbanyuyan %}</span>  #导入自定义函数模块
</span><span style="color: #0000ff">&lt;!</span><span style="color: #ff00ff">DOCTYPE html</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">html </span><span style="color: #ff0000">lang</span><span style="color: #0000ff">="en"</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">meta </span><span style="color: #ff0000">charset</span><span style="color: #0000ff">="UTF-8"</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>Title<span style="color: #0000ff">&lt;/</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span><span style="color: #000000"><span style="background-color: #ff99cc">

{% my_simple_time 1 2 3 %}</span>   #传参并且执行自定义函数

</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">html</span><span style="color: #0000ff">&gt;</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715210007728-278550449.png" alt=""></p>
<p>&nbsp;</p>
<p><strong>注意：使用自定义html函数，必须在全局配置文件settings.py里的INSTALLED_APPS注册了app应用</strong></p>
<div class="cnblogs_code">
<pre>INSTALLED_APPS =<span style="color: #000000"> (
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.admin</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.auth</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.contenttypes</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.sessions</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.messages</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.staticfiles</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">app01</span><span style="color: #800000">'</span><span style="color: #000000">,
)</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><br><strong>&nbsp;</strong></p>
<p>&nbsp;</p></div>第三百一十节，Django框架，模板语言


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>第三百一十节，Django框架，模板语言</strong></p>
<p>&nbsp;</p>
<p><span style="color: #0000ff"><strong>模板语言就是可以将动态数据在html模板渲染的语言</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>一、接收值渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">locals()</span>函数，写在请求响应render()函数里，可以将逻辑处理函数里的变量传到html用模板语言渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">{{...}}</span>接收一个变量或者值进行渲染</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= <span style="color: #800000">'</span><span style="color: #800000">叫卖录音网</span><span style="color: #800000">'</span></span>

    <span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;<span style="background-color: #ff99cc">{{ a }}</span>&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170714235321462-114347448.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>二、接收值，运行代码块</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>for循环</strong></span></p>
<p><strong>{% for item in item_list %} </strong></p>
<p><strong>&nbsp;&lt;a&gt;{{ item }}&lt;/a&gt;</strong></p>
<p><strong><strong>　　forloop.counter　　计数器，记录循环次数</strong><br><strong>　　forloop.first　　 &nbsp;　 判断是否是循环第一次，返回布尔值&nbsp; &nbsp;&nbsp;</strong><br><strong>　　forloop.last　　　　<strong><strong>判断是否是循环最后一次，返回布尔值&nbsp;</strong></strong></strong></strong></p>
<p><strong>&nbsp;{% endfor %}</strong></p>
<p><span style="color: #0000ff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
        </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {{ forloop.counter }}
        {{ forloop.first }}
        {{ forloop.last }}
    {</span>% endfor %<span style="color: #000000">}
</span></span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715090533947-1295732947.png" alt=""></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>if判断</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% if ordered_warranty %} &nbsp;</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% else %} </strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% endif %}</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
<span style="background-color: #ff99cc">        {</span></span><span style="background-color: #ff99cc">% <span style="color: #0000ff">if</span> i == <span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #ee1215</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">elif</span> i == <span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #1b47ee</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">else</span> %<span style="color: #000000">}
            </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% endif %</span><span style="color: #000000"><span style="background-color: #ff99cc">}</span>
    {</span>% endfor %<span style="color: #000000">}
</span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715093211134-1688642175.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>三、母板-子板-母板继承</strong></span></p>
<p><span style="color: #000000"><strong>母板继承就是访问的页面继承一个母板，将访问页面的内容引入到母板里指定的地方，组合成一个新页面返回给浏览器</strong></span></p>
<p><span style="color: #000000"><strong>一般母板里都是写的一个网页里不变的地方，也就是通用的地方，被继承页（访问页）都是每个页面不同的地方，也就是将页面不同的地方引入到母板组合成一个新页面返回浏览器</strong></span></p>
<p><span style="color: #000000"><strong>母板里一般都是网页的、头部、底部、头部底部css、头部底部js</strong></span></p>
<p><span style="color: #000000"><strong>被继承页（访问页）里一般都是新内容，新内容的css和js</strong></span></p>
<p><span style="color: #ff0000"><strong>母板：<span style="color: #0000ff">{% block title %} {% endblock %}</span> 设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span><br><span style="color: #ff0000"><strong>子板：<span style="color: #0000ff">{% extends "base.html" %}	</span>       子板继承母板</strong></span><br><span style="color: #ff0000"><strong>　　　<span style="color: #0000ff">{% block title %} {% endblock %}</span>	设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span></p>
<p><strong>逻辑处理&nbsp;</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    </span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000; background-color: #ff99cc">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><strong>母板</strong></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/tou.css</span><span style="color: #800000">"</span>&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% block css %}{% endblock %<span style="color: #000000">}   #调用子板的css样式
</span></span>&lt;/head&gt;
&lt;body&gt;

&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">tou</span><span style="color: #800000">"</span>&gt;头部&lt;/div&gt;<span style="background-color: #ff99cc"><span style="color: #000000">

{</span>% block nei_rong %}{% endblock %<span style="color: #000000">}  #调用子板的内容区块

</span></span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">wei</span><span style="color: #800000">"</span>&gt;尾部&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><strong>子板（访问页）</strong></p>
<div class="cnblogs_code">
<pre><span style="background-color: #ffff00">{% extends <span style="color: #800000">"</span><span style="color: #800000">tou.html</span><span style="color: #800000">"</span> %</span><span style="color: #000000"><span style="background-color: #ffff00">}  #继承母板</span>

<span style="background-color: #ffcc99">{</span></span><span style="background-color: #ffcc99">% block css %<span style="color: #000000">}　　　　　　 #设置母版调用css样式区块
    </span>&lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/index.css</span><span style="color: #800000">"</span>&gt;<span style="color: #000000">
{</span>% endblock %</span><span style="color: #000000"><span style="background-color: #ffcc99">}</span>

<span style="background-color: #ff99cc">{</span></span><span style="background-color: #ff99cc">% block nei_rong %<span style="color: #000000">}　　　　#设置母版调用字板内容区块
    </span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">neir</span><span style="color: #800000">"</span>&gt;内容&lt;/div&gt;<span style="color: #000000">
{</span>% endblock %}</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715195836243-1060040495.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>四、帮助方法：</strong></span><br><strong>{{ <span style="color: #0000ff">item.event_start</span>|date:"Y-m-d H:i:s"}} 　　 格式化时间</strong><br><strong>{{ <span style="color: #0000ff">bio</span>|truncatewords:"30" }}	　　	　　　　 &nbsp; &nbsp;只显示指定字数</strong><br><strong>{{ <span style="color: #0000ff">my_list</span>|first|upper }}	　　	　　　　　　 &nbsp; &nbsp; &nbsp;首字母大写</strong><br><strong>{{ <span style="color: #0000ff">name</span>|lower }}	　　	　　　　　　　　 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;首字母小写</strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>五、自定义html模板可调用函数模块</strong></span></p>
<p><strong>a、在app应用中创建templatetags目录</strong></p>
<p><strong>b、在目录中创建任意 .py 文件，如：xx.py</strong></p>
<p><strong>在py文件里设置html可调用函数，注意py文件里有几个注意点如下：</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> coding:utf-8</span>
<span style="background-color: #ff99cc"><span style="color: #0000ff">from</span> django <span style="color: #0000ff">import</span><span style="color: #000000"> template　　　　　　　　　　　　　　#必须导入这个模块
</span><span style="color: #0000ff">from</span> django.utils.safestring <span style="color: #0000ff">import</span></span><span style="color: #000000"><span style="background-color: #ff99cc"> mark_safe      #必须导入这个模块</span>

<span style="background-color: #ff99cc">register </span></span><span style="background-color: #ff99cc">=</span><span style="color: #000000"><span style="background-color: #ff99cc"> template.Library()</span>　　     #固定格式必须设置这个变量　　


<span style="background-color: #ff99cc">@register.simple_tag                  #自定义函数必须用上这个装饰器，html页面才可以调用
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_simple_time(v1, v2, v3):  #自定义函数
    </span><span style="color: #0000ff">return</span> v1 + v2 +<span style="color: #000000"> v3


<span style="background-color: #ff99cc">@register.simple_tag
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_input(id, arg):
    result </span>= <span style="color: #800000">"</span><span style="color: #800000">&lt;input type='text' id='%s' class='%s' /&gt;</span><span style="color: #800000">"</span> %<span style="color: #000000"> (id, arg,)
    </span><span style="color: #0000ff">return</span> mark_safe(result)</pre>
</div>
<p><strong>c、在使用自定义函数的html文件中导入自定义函数模块 xx.py 文件名</strong><br><strong>{% load 自定义函数模块名称 %}</strong></p>
<p><strong>d、html页面使用</strong><br><strong>{% 函数名称 参数 参数 参数 %}</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #000000"><span style="background-color: #ff99cc">{% load mbanyuyan %}</span>  #导入自定义函数模块
</span><span style="color: #0000ff">&lt;!</span><span style="color: #ff00ff">DOCTYPE html</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">html </span><span style="color: #ff0000">lang</span><span style="color: #0000ff">="en"</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">meta </span><span style="color: #ff0000">charset</span><span style="color: #0000ff">="UTF-8"</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>Title<span style="color: #0000ff">&lt;/</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span><span style="color: #000000"><span style="background-color: #ff99cc">

{% my_simple_time 1 2 3 %}</span>   #传参并且执行自定义函数

</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">html</span><span style="color: #0000ff">&gt;</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715210007728-278550449.png" alt=""></p>
<p>&nbsp;</p>
<p><strong>注意：使用自定义html函数，必须在全局配置文件settings.py里的INSTALLED_APPS注册了app应用</strong></p>
<div class="cnblogs_code">
<pre>INSTALLED_APPS =<span style="color: #000000"> (
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.admin</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.auth</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.contenttypes</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.sessions</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.messages</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.staticfiles</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">app01</span><span style="color: #800000">'</span><span style="color: #000000">,
)</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><br><strong>&nbsp;</strong></p>
<p>&nbsp;</p></div>第三百一十节，Django框架，模板语言


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>第三百一十节，Django框架，模板语言</strong></p>
<p>&nbsp;</p>
<p><span style="color: #0000ff"><strong>模板语言就是可以将动态数据在html模板渲染的语言</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>一、接收值渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">locals()</span>函数，写在请求响应render()函数里，可以将逻辑处理函数里的变量传到html用模板语言渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">{{...}}</span>接收一个变量或者值进行渲染</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= <span style="color: #800000">'</span><span style="color: #800000">叫卖录音网</span><span style="color: #800000">'</span></span>

    <span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;<span style="background-color: #ff99cc">{{ a }}</span>&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170714235321462-114347448.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>二、接收值，运行代码块</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>for循环</strong></span></p>
<p><strong>{% for item in item_list %} </strong></p>
<p><strong>&nbsp;&lt;a&gt;{{ item }}&lt;/a&gt;</strong></p>
<p><strong><strong>　　forloop.counter　　计数器，记录循环次数</strong><br><strong>　　forloop.first　　 &nbsp;　 判断是否是循环第一次，返回布尔值&nbsp; &nbsp;&nbsp;</strong><br><strong>　　forloop.last　　　　<strong><strong>判断是否是循环最后一次，返回布尔值&nbsp;</strong></strong></strong></strong></p>
<p><strong>&nbsp;{% endfor %}</strong></p>
<p><span style="color: #0000ff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
        </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {{ forloop.counter }}
        {{ forloop.first }}
        {{ forloop.last }}
    {</span>% endfor %<span style="color: #000000">}
</span></span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715090533947-1295732947.png" alt=""></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>if判断</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% if ordered_warranty %} &nbsp;</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% else %} </strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% endif %}</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
<span style="background-color: #ff99cc">        {</span></span><span style="background-color: #ff99cc">% <span style="color: #0000ff">if</span> i == <span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #ee1215</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">elif</span> i == <span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #1b47ee</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">else</span> %<span style="color: #000000">}
            </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% endif %</span><span style="color: #000000"><span style="background-color: #ff99cc">}</span>
    {</span>% endfor %<span style="color: #000000">}
</span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715093211134-1688642175.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>三、母板-子板-母板继承</strong></span></p>
<p><span style="color: #000000"><strong>母板继承就是访问的页面继承一个母板，将访问页面的内容引入到母板里指定的地方，组合成一个新页面返回给浏览器</strong></span></p>
<p><span style="color: #000000"><strong>一般母板里都是写的一个网页里不变的地方，也就是通用的地方，被继承页（访问页）都是每个页面不同的地方，也就是将页面不同的地方引入到母板组合成一个新页面返回浏览器</strong></span></p>
<p><span style="color: #000000"><strong>母板里一般都是网页的、头部、底部、头部底部css、头部底部js</strong></span></p>
<p><span style="color: #000000"><strong>被继承页（访问页）里一般都是新内容，新内容的css和js</strong></span></p>
<p><span style="color: #ff0000"><strong>母板：<span style="color: #0000ff">{% block title %} {% endblock %}</span> 设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span><br><span style="color: #ff0000"><strong>子板：<span style="color: #0000ff">{% extends "base.html" %}	</span>       子板继承母板</strong></span><br><span style="color: #ff0000"><strong>　　　<span style="color: #0000ff">{% block title %} {% endblock %}</span>	设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span></p>
<p><strong>逻辑处理&nbsp;</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    </span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000; background-color: #ff99cc">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><strong>母板</strong></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/tou.css</span><span style="color: #800000">"</span>&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% block css %}{% endblock %<span style="color: #000000">}   #调用子板的css样式
</span></span>&lt;/head&gt;
&lt;body&gt;

&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">tou</span><span style="color: #800000">"</span>&gt;头部&lt;/div&gt;<span style="background-color: #ff99cc"><span style="color: #000000">

{</span>% block nei_rong %}{% endblock %<span style="color: #000000">}  #调用子板的内容区块

</span></span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">wei</span><span style="color: #800000">"</span>&gt;尾部&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><strong>子板（访问页）</strong></p>
<div class="cnblogs_code">
<pre><span style="background-color: #ffff00">{% extends <span style="color: #800000">"</span><span style="color: #800000">tou.html</span><span style="color: #800000">"</span> %</span><span style="color: #000000"><span style="background-color: #ffff00">}  #继承母板</span>

<span style="background-color: #ffcc99">{</span></span><span style="background-color: #ffcc99">% block css %<span style="color: #000000">}　　　　　　 #设置母版调用css样式区块
    </span>&lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/index.css</span><span style="color: #800000">"</span>&gt;<span style="color: #000000">
{</span>% endblock %</span><span style="color: #000000"><span style="background-color: #ffcc99">}</span>

<span style="background-color: #ff99cc">{</span></span><span style="background-color: #ff99cc">% block nei_rong %<span style="color: #000000">}　　　　#设置母版调用字板内容区块
    </span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">neir</span><span style="color: #800000">"</span>&gt;内容&lt;/div&gt;<span style="color: #000000">
{</span>% endblock %}</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715195836243-1060040495.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>四、帮助方法：</strong></span><br><strong>{{ <span style="color: #0000ff">item.event_start</span>|date:"Y-m-d H:i:s"}} 　　 格式化时间</strong><br><strong>{{ <span style="color: #0000ff">bio</span>|truncatewords:"30" }}	　　	　　　　 &nbsp; &nbsp;只显示指定字数</strong><br><strong>{{ <span style="color: #0000ff">my_list</span>|first|upper }}	　　	　　　　　　 &nbsp; &nbsp; &nbsp;首字母大写</strong><br><strong>{{ <span style="color: #0000ff">name</span>|lower }}	　　	　　　　　　　　 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;首字母小写</strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>五、自定义html模板可调用函数模块</strong></span></p>
<p><strong>a、在app应用中创建templatetags目录</strong></p>
<p><strong>b、在目录中创建任意 .py 文件，如：xx.py</strong></p>
<p><strong>在py文件里设置html可调用函数，注意py文件里有几个注意点如下：</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> coding:utf-8</span>
<span style="background-color: #ff99cc"><span style="color: #0000ff">from</span> django <span style="color: #0000ff">import</span><span style="color: #000000"> template　　　　　　　　　　　　　　#必须导入这个模块
</span><span style="color: #0000ff">from</span> django.utils.safestring <span style="color: #0000ff">import</span></span><span style="color: #000000"><span style="background-color: #ff99cc"> mark_safe      #必须导入这个模块</span>

<span style="background-color: #ff99cc">register </span></span><span style="background-color: #ff99cc">=</span><span style="color: #000000"><span style="background-color: #ff99cc"> template.Library()</span>　　     #固定格式必须设置这个变量　　


<span style="background-color: #ff99cc">@register.simple_tag                  #自定义函数必须用上这个装饰器，html页面才可以调用
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_simple_time(v1, v2, v3):  #自定义函数
    </span><span style="color: #0000ff">return</span> v1 + v2 +<span style="color: #000000"> v3


<span style="background-color: #ff99cc">@register.simple_tag
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_input(id, arg):
    result </span>= <span style="color: #800000">"</span><span style="color: #800000">&lt;input type='text' id='%s' class='%s' /&gt;</span><span style="color: #800000">"</span> %<span style="color: #000000"> (id, arg,)
    </span><span style="color: #0000ff">return</span> mark_safe(result)</pre>
</div>
<p><strong>c、在使用自定义函数的html文件中导入自定义函数模块 xx.py 文件名</strong><br><strong>{% load 自定义函数模块名称 %}</strong></p>
<p><strong>d、html页面使用</strong><br><strong>{% 函数名称 参数 参数 参数 %}</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #000000"><span style="background-color: #ff99cc">{% load mbanyuyan %}</span>  #导入自定义函数模块
</span><span style="color: #0000ff">&lt;!</span><span style="color: #ff00ff">DOCTYPE html</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">html </span><span style="color: #ff0000">lang</span><span style="color: #0000ff">="en"</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">meta </span><span style="color: #ff0000">charset</span><span style="color: #0000ff">="UTF-8"</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>Title<span style="color: #0000ff">&lt;/</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span><span style="color: #000000"><span style="background-color: #ff99cc">

{% my_simple_time 1 2 3 %}</span>   #传参并且执行自定义函数

</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">html</span><span style="color: #0000ff">&gt;</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715210007728-278550449.png" alt=""></p>
<p>&nbsp;</p>
<p><strong>注意：使用自定义html函数，必须在全局配置文件settings.py里的INSTALLED_APPS注册了app应用</strong></p>
<div class="cnblogs_code">
<pre>INSTALLED_APPS =<span style="color: #000000"> (
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.admin</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.auth</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.contenttypes</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.sessions</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.messages</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.staticfiles</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">app01</span><span style="color: #800000">'</span><span style="color: #000000">,
)</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><br><strong>&nbsp;</strong></p>
<p>&nbsp;</p></div>第三百一十节，Django框架，模板语言


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>第三百一十节，Django框架，模板语言</strong></p>
<p>&nbsp;</p>
<p><span style="color: #0000ff"><strong>模板语言就是可以将动态数据在html模板渲染的语言</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>一、接收值渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">locals()</span>函数，写在请求响应render()函数里，可以将逻辑处理函数里的变量传到html用模板语言渲染</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">{{...}}</span>接收一个变量或者值进行渲染</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= <span style="color: #800000">'</span><span style="color: #800000">叫卖录音网</span><span style="color: #800000">'</span></span>

    <span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;<span style="background-color: #ff99cc">{{ a }}</span>&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170714235321462-114347448.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>二、接收值，运行代码块</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>for循环</strong></span></p>
<p><strong>{% for item in item_list %} </strong></p>
<p><strong>&nbsp;&lt;a&gt;{{ item }}&lt;/a&gt;</strong></p>
<p><strong><strong>　　forloop.counter　　计数器，记录循环次数</strong><br><strong>　　forloop.first　　 &nbsp;　 判断是否是循环第一次，返回布尔值&nbsp; &nbsp;&nbsp;</strong><br><strong>　　forloop.last　　　　<strong><strong>判断是否是循环最后一次，返回布尔值&nbsp;</strong></strong></strong></strong></p>
<p><strong>&nbsp;{% endfor %}</strong></p>
<p><span style="color: #0000ff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, <span style="background-color: #ff99cc">locals()</span>)  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
        </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {{ forloop.counter }}
        {{ forloop.first }}
        {{ forloop.last }}
    {</span>% endfor %<span style="color: #000000">}
</span></span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715090533947-1295732947.png" alt=""></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>if判断</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% if ordered_warranty %} &nbsp;</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% else %} </strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>{% endif %}</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    <span style="background-color: #ff99cc">a </span></span><span style="background-color: #ff99cc">= [<span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">关于我们</span><span style="color: #800000">'</span><span style="color: #000000">]

    </span></span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;ul&gt;<span style="color: #000000">
    {</span>% <span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span> a %<span style="color: #000000">}
<span style="background-color: #ff99cc">        {</span></span><span style="background-color: #ff99cc">% <span style="color: #0000ff">if</span> i == <span style="color: #800000">'</span><span style="color: #800000">首页</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #ee1215</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">elif</span> i == <span style="color: #800000">'</span><span style="color: #800000">产品展示</span><span style="color: #800000">'</span> %<span style="color: #000000">}
            </span>&lt;li style=<span style="color: #800000">"</span><span style="color: #800000">color: #1b47ee</span><span style="color: #800000">"</span>&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% <span style="color: #0000ff">else</span> %<span style="color: #000000">}
            </span>&lt;li&gt;{{ i }}&lt;/li&gt;<span style="color: #000000">
        {</span>% endif %</span><span style="color: #000000"><span style="background-color: #ff99cc">}</span>
    {</span>% endfor %<span style="color: #000000">}
</span>&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715093211134-1688642175.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>三、母板-子板-母板继承</strong></span></p>
<p><span style="color: #000000"><strong>母板继承就是访问的页面继承一个母板，将访问页面的内容引入到母板里指定的地方，组合成一个新页面返回给浏览器</strong></span></p>
<p><span style="color: #000000"><strong>一般母板里都是写的一个网页里不变的地方，也就是通用的地方，被继承页（访问页）都是每个页面不同的地方，也就是将页面不同的地方引入到母板组合成一个新页面返回浏览器</strong></span></p>
<p><span style="color: #000000"><strong>母板里一般都是网页的、头部、底部、头部底部css、头部底部js</strong></span></p>
<p><span style="color: #000000"><strong>被继承页（访问页）里一般都是新内容，新内容的css和js</strong></span></p>
<p><span style="color: #ff0000"><strong>母板：<span style="color: #0000ff">{% block title %} {% endblock %}</span> 设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span><br><span style="color: #ff0000"><strong>子板：<span style="color: #0000ff">{% extends "base.html" %}	</span>       子板继承母板</strong></span><br><span style="color: #ff0000"><strong>　　　<span style="color: #0000ff">{% block title %} {% endblock %}</span>	设置可调用区块或，有参设置可调用区块，无参调用区块</strong></span></p>
<p><strong>逻辑处理&nbsp;</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render
</span><span style="color: #0000ff">from</span> app1.models <span style="color: #0000ff">import</span> *    <span style="color: #008000">#</span><span style="color: #008000">导入数据库操作模块</span>

<span style="color: #008000">#</span><span style="color: #008000">逻辑处理模块</span>
<span style="color: #0000ff">def</span><span style="color: #000000"> special(request):

    </span><span style="color: #0000ff">return</span> render(request, <span style="color: #800000">'</span><span style="color: #800000; background-color: #ff99cc">index.html</span><span style="color: #800000">'</span>, locals())  <span style="color: #008000">#</span><span style="color: #008000"> 打开页面</span></pre>
</div>
<p><strong>母板</strong></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang=<span style="color: #800000">"</span><span style="color: #800000">en</span><span style="color: #800000">"</span>&gt;
&lt;head&gt;
    &lt;meta charset=<span style="color: #800000">"</span><span style="color: #800000">UTF-8</span><span style="color: #800000">"</span>&gt;
    &lt;title&gt;Title&lt;/title&gt;
    &lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/tou.css</span><span style="color: #800000">"</span>&gt;<span style="background-color: #ff99cc"><span style="color: #000000">
    {</span>% block css %}{% endblock %<span style="color: #000000">}   #调用子板的css样式
</span></span>&lt;/head&gt;
&lt;body&gt;

&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">tou</span><span style="color: #800000">"</span>&gt;头部&lt;/div&gt;<span style="background-color: #ff99cc"><span style="color: #000000">

{</span>% block nei_rong %}{% endblock %<span style="color: #000000">}  #调用子板的内容区块

</span></span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">wei</span><span style="color: #800000">"</span>&gt;尾部&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p><strong>子板（访问页）</strong></p>
<div class="cnblogs_code">
<pre><span style="background-color: #ffff00">{% extends <span style="color: #800000">"</span><span style="color: #800000">tou.html</span><span style="color: #800000">"</span> %</span><span style="color: #000000"><span style="background-color: #ffff00">}  #继承母板</span>

<span style="background-color: #ffcc99">{</span></span><span style="background-color: #ffcc99">% block css %<span style="color: #000000">}　　　　　　 #设置母版调用css样式区块
    </span>&lt;link rel=<span style="color: #800000">"</span><span style="color: #800000">stylesheet</span><span style="color: #800000">"</span> type=<span style="color: #800000">"</span><span style="color: #800000">text/css</span><span style="color: #800000">"</span> href=<span style="color: #800000">"</span><span style="color: #800000">/static/css/index.css</span><span style="color: #800000">"</span>&gt;<span style="color: #000000">
{</span>% endblock %</span><span style="color: #000000"><span style="background-color: #ffcc99">}</span>

<span style="background-color: #ff99cc">{</span></span><span style="background-color: #ff99cc">% block nei_rong %<span style="color: #000000">}　　　　#设置母版调用字板内容区块
    </span>&lt;div id=<span style="color: #800000">"</span><span style="color: #800000">neir</span><span style="color: #800000">"</span>&gt;内容&lt;/div&gt;<span style="color: #000000">
{</span>% endblock %}</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715195836243-1060040495.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>四、帮助方法：</strong></span><br><strong>{{ <span style="color: #0000ff">item.event_start</span>|date:"Y-m-d H:i:s"}} 　　 格式化时间</strong><br><strong>{{ <span style="color: #0000ff">bio</span>|truncatewords:"30" }}	　　	　　　　 &nbsp; &nbsp;只显示指定字数</strong><br><strong>{{ <span style="color: #0000ff">my_list</span>|first|upper }}	　　	　　　　　　 &nbsp; &nbsp; &nbsp;首字母大写</strong><br><strong>{{ <span style="color: #0000ff">name</span>|lower }}	　　	　　　　　　　　 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;首字母小写</strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>五、自定义html模板可调用函数模块</strong></span></p>
<p><strong>a、在app应用中创建templatetags目录</strong></p>
<p><strong>b、在目录中创建任意 .py 文件，如：xx.py</strong></p>
<p><strong>在py文件里设置html可调用函数，注意py文件里有几个注意点如下：</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> coding:utf-8</span>
<span style="background-color: #ff99cc"><span style="color: #0000ff">from</span> django <span style="color: #0000ff">import</span><span style="color: #000000"> template　　　　　　　　　　　　　　#必须导入这个模块
</span><span style="color: #0000ff">from</span> django.utils.safestring <span style="color: #0000ff">import</span></span><span style="color: #000000"><span style="background-color: #ff99cc"> mark_safe      #必须导入这个模块</span>

<span style="background-color: #ff99cc">register </span></span><span style="background-color: #ff99cc">=</span><span style="color: #000000"><span style="background-color: #ff99cc"> template.Library()</span>　　     #固定格式必须设置这个变量　　


<span style="background-color: #ff99cc">@register.simple_tag                  #自定义函数必须用上这个装饰器，html页面才可以调用
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_simple_time(v1, v2, v3):  #自定义函数
    </span><span style="color: #0000ff">return</span> v1 + v2 +<span style="color: #000000"> v3


<span style="background-color: #ff99cc">@register.simple_tag
</span></span><span style="color: #0000ff">def</span><span style="color: #000000"> my_input(id, arg):
    result </span>= <span style="color: #800000">"</span><span style="color: #800000">&lt;input type='text' id='%s' class='%s' /&gt;</span><span style="color: #800000">"</span> %<span style="color: #000000"> (id, arg,)
    </span><span style="color: #0000ff">return</span> mark_safe(result)</pre>
</div>
<p><strong>c、在使用自定义函数的html文件中导入自定义函数模块 xx.py 文件名</strong><br><strong>{% load 自定义函数模块名称 %}</strong></p>
<p><strong>d、html页面使用</strong><br><strong>{% 函数名称 参数 参数 参数 %}</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #000000"><span style="background-color: #ff99cc">{% load mbanyuyan %}</span>  #导入自定义函数模块
</span><span style="color: #0000ff">&lt;!</span><span style="color: #ff00ff">DOCTYPE html</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">html </span><span style="color: #ff0000">lang</span><span style="color: #0000ff">="en"</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">meta </span><span style="color: #ff0000">charset</span><span style="color: #0000ff">="UTF-8"</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>Title<span style="color: #0000ff">&lt;/</span><span style="color: #800000">title</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">head</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span><span style="color: #000000"><span style="background-color: #ff99cc">

{% my_simple_time 1 2 3 %}</span>   #传参并且执行自定义函数

</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">body</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">html</span><span style="color: #0000ff">&gt;</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170715210007728-278550449.png" alt=""></p>
<p>&nbsp;</p>
<p><strong>注意：使用自定义html函数，必须在全局配置文件settings.py里的INSTALLED_APPS注册了app应用</strong></p>
<div class="cnblogs_code">
<pre>INSTALLED_APPS =<span style="color: #000000"> (
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.admin</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.auth</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.contenttypes</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.sessions</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.messages</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">django.contrib.staticfiles</span><span style="color: #800000">'</span><span style="color: #000000">,
    </span><span style="color: #800000">'</span><span style="color: #800000">app01</span><span style="color: #800000">'</span><span style="color: #000000">,
)</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><br><strong>&nbsp;</strong></p>
<p>&nbsp;</p></div>