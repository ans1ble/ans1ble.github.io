第三百七十一节，Python分布式爬虫打造搜索引擎Scrapy精讲—elasticsearch(搜索引擎)用Django实现我的搜索以及热门搜索


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>第三百七十一节，Python分布式爬虫打造搜索引擎Scrapy精讲—elasticsearch(搜索引擎)用Django实现我的搜索以及热门</strong></p>
<p><img src="https://images2017.cnblogs.com/blog/955761/201709/955761-20170905220042194-1166021907.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>我的搜素简单实现原理</strong></span><br><strong>我们可以用js来实现，首先用js获取到输入的搜索词</strong><br><strong>设置一个数组里存放搜素词，</strong><br><strong>判断搜索词在数组里是否存在如果存在删除原来的词，重新将新词放在数组最前面</strong><br><strong>如果不存在直接将新词放在数组最前面即可，然后循环数组显示结果即可</strong></p>
<p><br><span style="color: #ff0000"><strong>热门搜索</strong></span><br><strong>实现原理，当用户搜索一个词时，可以保存到数据库，然后记录搜索次数，</strong><br><strong>利用redis缓存搜索次数最到的词，过一段时间更新一下缓存</strong></p>
<p><strong>&nbsp;</strong></p>
<p><span style="color: #ff0000"><strong>备注：Django结合Scrapy的开源项目可以学习一下</strong></span><br><strong>django-dynamic-scraper</strong><br><strong>https://github.com/holgerd77/django-dynamic-scraper</strong></p>
<p>&nbsp;</p>
<p><strong>补充</strong></p>
<p><strong>默认的<strong>elasticsearch(搜索引擎)只能搜索1万条数据，在大就会报错了</strong></strong></p>
<p><strong><strong>设置方法</strong></strong></p>
<p>步骤一：</p>
<p>打开项目的索引库地址，将该索引先关闭，否则设置操步骤二无法提交</p>
<p><img src="https://images2017.cnblogs.com/blog/955761/201712/955761-20171229152115601-264390921.png" alt=""></p>
<p>步骤二：</p>
<p>打开复合查询，填入如下信息，记得选择PUT方式提交，credit_trace_data改为本索引库中的索引，max_result_window设为20亿，此值是integer类型，不能无限大</p>
<p>http://127.0.0.1:9200/&nbsp;&nbsp;&nbsp;<span style="background-color: #ffffff; color: #ff0000">&nbsp;PUT</span></p>
<p>&nbsp;credit_trace_data/_settings?preserve_existing=true</p>
<p>&nbsp;{</p>
<p>&nbsp; "max_result_window" : "2000000000"</p>
<p>&nbsp;}</p>
<p><img src="https://images2017.cnblogs.com/blog/955761/201712/955761-20171229152238898-637491217.png" alt=""></p>
<p>最后点击提交申请，如果配置正确右侧窗口会显示如下信息</p>
<p><img src="https://images2017.cnblogs.com/blog/955761/201712/955761-20171229152356335-2063129239.png" alt=""></p>
<p>&nbsp;</p>
<p>如果要查询max_result_window时只需要将PUT改为get即可</p>
<p><img src="https://images2017.cnblogs.com/blog/955761/201712/955761-20171229152430663-1290883344.png" alt=""></p>
<p>最后记得开启索引！</p>
<p>&nbsp;</p></div>