第一百五十七节，封装库--JavaScript，预加载图片


			<div id="cnblogs_post_body" class="blogpost-body"><p><span style="color: #0000ff"><strong>封装库--JavaScript，预加载图片</strong></span></p>
<p><span style="color: #0000ff"><strong>首先了解一个<span style="color: #ff0000">Image对象</span>，为图片对象</strong></span></p>
<p><span style="color: #ff0000"><strong><strong>Image对象</strong></strong></span></p>
<p><strong>var temp_img = new Image(); &nbsp; //创建一个临时区域的图片对象</strong><br><strong>alert(temp_img); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//[object HTMLImageElement]对象</strong></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><strong><strong>Image对象src属性,属性值是src地址，这个src地址会在后台加载到本地缓存</strong></strong></strong></span></p>
<p><span style="color: #000000"><strong><strong><strong><strong>var temp_img = new Image(); &nbsp; //创建一个临时区域的图片对象</strong><br><strong>temp_img.src = 'http://www.wallcoo.com/animal/Dogs_Summer_and_Winter/wallpapers/1920x1200/DogsB10_Lucy.jpg';<br></strong></strong></strong></strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><strong><strong><strong><strong><strong>Image对象，事件</strong></strong></strong></strong></strong></strong></span></p>
<p><strong>onload //事件，当图片加载成功时触发事件函数</strong><br><strong>onerror //事件，当图片加载失败时触发事件函数</strong></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>如：下列&nbsp;</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> temp_img = <span style="color: #0000ff">new</span> Image();            <span style="color: #008000">//</span><span style="color: #008000">创建一个临时区域的图片对象</span>
    temp_img.onload = <span style="color: #0000ff">function</span><span style="color: #000000"> () {
        alert(</span>'图片加载成功，显示图片'<span style="color: #000000">);
    };
    temp_img.onerror </span>= <span style="color: #0000ff">function</span><span style="color: #000000"> () {
        alert(</span>'图片加载失败，什么都不干'<span style="color: #000000">);
    };
    temp_img.src </span>= 'http://www.wallcoo.com/animal/Dogs_Summer_and_Winter/wallpapers/1920x1200/DogsB10_Lucy.jpg'<span style="color: #000000">;
    </span><span style="color: #008000">//</span><span style="color: #008000">注意：最好把src，写在事件后面，否则ie不兼容</span></pre>
</div>
<p>&nbsp;</p>
<p><strong>预加载图片,就是当用户查看当前图片时，提前将上一张和下一张图片加载好，当用户查看上一张或者下一张是不用等待加载，</strong></p>
<p><strong>效果图</strong></p>
<p><strong><img src="https://images2015.cnblogs.com/blog/955761/201703/955761-20170302162722173-2113930237.png" alt=""></strong></p>
<p>&nbsp;</p>
<p>html</p>
<div class="cnblogs_code">
<pre><span style="color: #008000">&lt;!--</span><span style="color: #008000">预加载</span><span style="color: #008000">--&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">id</span><span style="color: #0000ff">="photo"</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;&lt;</span><span style="color: #800000">img </span><span style="color: #ff0000">xsrc</span><span style="color: #0000ff">="img/p1.jpg"</span><span style="color: #ff0000"> yjz</span><span style="color: #0000ff">="img/p1big.jpg"</span><span style="color: #ff0000"> src</span><span style="color: #0000ff">="img/wait_load.jpg"</span><span style="color: #ff0000"> class</span><span style="color: #0000ff">="wait_load"</span><span style="color: #ff0000"> alt</span><span style="color: #0000ff">=""</span> <span style="color: #0000ff">/&gt;&lt;/</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>预加载图片<span style="color: #0000ff">&lt;/</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;/</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;&lt;</span><span style="color: #800000">img </span><span style="color: #ff0000">xsrc</span><span style="color: #0000ff">="img/p2.jpg"</span><span style="color: #ff0000"> yjz</span><span style="color: #0000ff">="img/p2big.jpg"</span><span style="color: #ff0000"> src</span><span style="color: #0000ff">="img/wait_load.jpg"</span><span style="color: #ff0000"> class</span><span style="color: #0000ff">="wait_load"</span><span style="color: #ff0000"> alt</span><span style="color: #0000ff">=""</span> <span style="color: #0000ff">/&gt;&lt;/</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>延迟加载图片<span style="color: #0000ff">&lt;/</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;/</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>

        <span style="color: #0000ff">&lt;</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;&lt;</span><span style="color: #800000">img </span><span style="color: #ff0000">xsrc</span><span style="color: #0000ff">="img/p3.jpg"</span><span style="color: #ff0000"> yjz</span><span style="color: #0000ff">="img/p3big.jpg"</span><span style="color: #ff0000"> src</span><span style="color: #0000ff">="img/wait_load.jpg"</span><span style="color: #ff0000"> class</span><span style="color: #0000ff">="wait_load"</span><span style="color: #ff0000"> alt</span><span style="color: #0000ff">=""</span> <span style="color: #0000ff">/&gt;&lt;/</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>延迟加载图片<span style="color: #0000ff">&lt;/</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;/</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>

        <span style="color: #0000ff">&lt;</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;&lt;</span><span style="color: #800000">img </span><span style="color: #ff0000">xsrc</span><span style="color: #0000ff">="img/p4.jpg"</span><span style="color: #ff0000"> yjz</span><span style="color: #0000ff">="img/p4big.jpg"</span><span style="color: #ff0000"> src</span><span style="color: #0000ff">="img/wait_load.jpg"</span><span style="color: #ff0000"> class</span><span style="color: #0000ff">="wait_load"</span><span style="color: #ff0000"> alt</span><span style="color: #0000ff">=""</span> <span style="color: #0000ff">/&gt;&lt;/</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>延迟加载图片<span style="color: #0000ff">&lt;/</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;/</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>

        <span style="color: #0000ff">&lt;</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;&lt;</span><span style="color: #800000">img </span><span style="color: #ff0000">xsrc</span><span style="color: #0000ff">="img/p5.jpg"</span><span style="color: #ff0000"> yjz</span><span style="color: #0000ff">="img/p5big.jpg"</span><span style="color: #ff0000"> src</span><span style="color: #0000ff">="img/wait_load.jpg"</span><span style="color: #ff0000"> class</span><span style="color: #0000ff">="wait_load"</span><span style="color: #ff0000"> alt</span><span style="color: #0000ff">=""</span> <span style="color: #0000ff">/&gt;&lt;/</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>延迟加载图片<span style="color: #0000ff">&lt;/</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;/</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>

        <span style="color: #0000ff">&lt;</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;&lt;</span><span style="color: #800000">img </span><span style="color: #ff0000">xsrc</span><span style="color: #0000ff">="img/p6.jpg"</span><span style="color: #ff0000"> yjz</span><span style="color: #0000ff">="img/p6big.jpg"</span><span style="color: #ff0000"> src</span><span style="color: #0000ff">="img/wait_load.jpg"</span><span style="color: #ff0000"> class</span><span style="color: #0000ff">="wait_load"</span><span style="color: #ff0000"> alt</span><span style="color: #0000ff">=""</span> <span style="color: #0000ff">/&gt;&lt;/</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>延迟加载图片<span style="color: #0000ff">&lt;/</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;/</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>

        <span style="color: #0000ff">&lt;</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;&lt;</span><span style="color: #800000">img </span><span style="color: #ff0000">xsrc</span><span style="color: #0000ff">="img/p7.jpg"</span><span style="color: #ff0000"> yjz</span><span style="color: #0000ff">="img/p7big.jpg"</span><span style="color: #ff0000"> src</span><span style="color: #0000ff">="img/wait_load.jpg"</span><span style="color: #ff0000"> class</span><span style="color: #0000ff">="wait_load"</span><span style="color: #ff0000"> alt</span><span style="color: #0000ff">=""</span> <span style="color: #0000ff">/&gt;&lt;/</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>延迟加载图片<span style="color: #0000ff">&lt;/</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;/</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>

        <span style="color: #0000ff">&lt;</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;&lt;</span><span style="color: #800000">img </span><span style="color: #ff0000">xsrc</span><span style="color: #0000ff">="img/p8.jpg"</span><span style="color: #ff0000"> yjz</span><span style="color: #0000ff">="img/p8big.jpg"</span><span style="color: #ff0000"> src</span><span style="color: #0000ff">="img/wait_load.jpg"</span><span style="color: #ff0000"> class</span><span style="color: #0000ff">="wait_load"</span><span style="color: #ff0000"> alt</span><span style="color: #0000ff">=""</span> <span style="color: #0000ff">/&gt;&lt;/</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>延迟加载图片<span style="color: #0000ff">&lt;/</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;/</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>

        <span style="color: #0000ff">&lt;</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;&lt;</span><span style="color: #800000">img </span><span style="color: #ff0000">xsrc</span><span style="color: #0000ff">="img/p9.jpg"</span><span style="color: #ff0000"> yjz</span><span style="color: #0000ff">="img/p9big.jpg"</span><span style="color: #ff0000"> src</span><span style="color: #0000ff">="img/wait_load.jpg"</span><span style="color: #ff0000"> class</span><span style="color: #0000ff">="wait_load"</span><span style="color: #ff0000"> alt</span><span style="color: #0000ff">=""</span> <span style="color: #0000ff">/&gt;&lt;/</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>延迟加载图片<span style="color: #0000ff">&lt;/</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;/</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>

        <span style="color: #0000ff">&lt;</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;&lt;</span><span style="color: #800000">img </span><span style="color: #ff0000">xsrc</span><span style="color: #0000ff">="img/p10.jpg"</span><span style="color: #ff0000"> yjz</span><span style="color: #0000ff">="img/p10big.jpg"</span><span style="color: #ff0000"> src</span><span style="color: #0000ff">="img/wait_load.jpg"</span><span style="color: #ff0000"> class</span><span style="color: #0000ff">="wait_load"</span><span style="color: #ff0000"> alt</span><span style="color: #0000ff">=""</span> <span style="color: #0000ff">/&gt;&lt;/</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>延迟加载图片<span style="color: #0000ff">&lt;/</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;/</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>

        <span style="color: #0000ff">&lt;</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;&lt;</span><span style="color: #800000">img </span><span style="color: #ff0000">xsrc</span><span style="color: #0000ff">="img/p11.jpg"</span><span style="color: #ff0000"> yjz</span><span style="color: #0000ff">="img/p11big.jpg"</span><span style="color: #ff0000"> src</span><span style="color: #0000ff">="img/wait_load.jpg"</span><span style="color: #ff0000"> class</span><span style="color: #0000ff">="wait_load"</span><span style="color: #ff0000"> alt</span><span style="color: #0000ff">=""</span> <span style="color: #0000ff">/&gt;&lt;/</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>延迟加载图片<span style="color: #0000ff">&lt;/</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;/</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>

        <span style="color: #0000ff">&lt;</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;&lt;</span><span style="color: #800000">img </span><span style="color: #ff0000">xsrc</span><span style="color: #0000ff">="img/p12.jpg"</span><span style="color: #ff0000"> yjz</span><span style="color: #0000ff">="img/p12big.jpg"</span><span style="color: #ff0000"> src</span><span style="color: #0000ff">="img/wait_load.jpg"</span><span style="color: #ff0000"> class</span><span style="color: #0000ff">="wait_load"</span><span style="color: #ff0000"> alt</span><span style="color: #0000ff">=""</span> <span style="color: #0000ff">/&gt;&lt;/</span><span style="color: #800000">dt</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>延迟加载图片<span style="color: #0000ff">&lt;/</span><span style="color: #800000">dd</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;/</span><span style="color: #800000">dl</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">id</span><span style="color: #0000ff">="photo_big"</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;</span><span style="color: #800000">h2 </span><span style="color: #ff0000">class</span><span style="color: #0000ff">="tuo"</span><span style="color: #0000ff">&gt;&lt;</span><span style="color: #800000">img </span><span style="color: #ff0000">src</span><span style="color: #0000ff">="img/close.png"</span><span style="color: #ff0000"> alt</span><span style="color: #0000ff">=""</span><span style="color: #ff0000"> class</span><span style="color: #0000ff">="close"</span><span style="color: #0000ff">/&gt;</span>预加载图片<span style="color: #0000ff">&lt;/</span><span style="color: #800000">h2</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">class</span><span style="color: #0000ff">="big"</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">img </span><span style="color: #ff0000">src</span><span style="color: #0000ff">="img/loading.gif"</span><span style="color: #ff0000"> alt</span><span style="color: #0000ff">=""</span><span style="color: #0000ff">/&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">strong </span><span style="color: #ff0000">class</span><span style="color: #0000ff">="sl"</span><span style="color: #0000ff">&gt;</span><span style="color: #ff0000">&amp;lt;</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">strong</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">strong </span><span style="color: #ff0000">class</span><span style="color: #0000ff">="sr"</span><span style="color: #0000ff">&gt;</span><span style="color: #ff0000">&amp;gt;</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">strong</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">span </span><span style="color: #ff0000">class</span><span style="color: #0000ff">="left"</span><span style="color: #0000ff">&gt;&lt;/</span><span style="color: #800000">span</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">span </span><span style="color: #ff0000">class</span><span style="color: #0000ff">="right"</span><span style="color: #0000ff">&gt;&lt;/</span><span style="color: #800000">span</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">em </span><span style="color: #ff0000">class</span><span style="color: #0000ff">="index"</span><span style="color: #0000ff">&gt;</span>22222<span style="color: #0000ff">&lt;/</span><span style="color: #800000">em</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span></pre>
</div>
<p>css</p>
<div class="cnblogs_code">
<pre><span style="color: #008000">/*</span><span style="color: #008000">预加载图片</span><span style="color: #008000">*/</span><span style="color: #800000">
#photo_big </span>{<span style="color: #ff0000">
    width</span>:<span style="color: #0000ff">620px</span>;<span style="color: #ff0000">
    height</span>:<span style="color: #0000ff">511px</span>;<span style="color: #ff0000">
    border</span>:<span style="color: #0000ff">1px solid #ccc</span>;<span style="color: #ff0000">
    position</span>:<span style="color: #0000ff">absolute</span>;<span style="color: #ff0000">
    display</span>:<span style="color: #0000ff">none</span>;<span style="color: #ff0000">
    z-index</span>:<span style="color: #0000ff">9999</span>;<span style="color: #ff0000">
    background</span>:<span style="color: #0000ff">#fff</span>;
}<span style="color: #800000">
#photo_big h2 </span>{<span style="color: #ff0000">
    height</span>:<span style="color: #0000ff">40px</span>;<span style="color: #ff0000">
    line-height</span>:<span style="color: #0000ff">40px</span>;<span style="color: #ff0000">
    text-align</span>:<span style="color: #0000ff">center</span>;<span style="color: #ff0000">
    font-size</span>:<span style="color: #0000ff">14px</span>;<span style="color: #ff0000">
    letter-spacing</span>:<span style="color: #0000ff">1px</span>;<span style="color: #ff0000">
    color</span>:<span style="color: #0000ff">#666</span>;<span style="color: #ff0000">
    background</span>:<span style="color: #0000ff">url(img/login_header.png) repeat-x</span>;<span style="color: #ff0000">
    margin</span>:<span style="color: #0000ff">0</span>;<span style="color: #ff0000">
    padding</span>:<span style="color: #0000ff">0</span>;<span style="color: #ff0000">
    border-bottom</span>:<span style="color: #0000ff">1px solid #ccc</span>;
    <span style="color: #008000">/*</span><span style="color: #008000">margin:0 0 20px 0;</span><span style="color: #008000">*/</span><span style="color: #ff0000">
    cursor</span>:<span style="color: #0000ff">move</span>;
}<span style="color: #800000">
#photo_big h2 img </span>{<span style="color: #ff0000">
    float</span>:<span style="color: #0000ff">right</span>;<span style="color: #ff0000">
    position</span>:<span style="color: #0000ff">relative</span>;<span style="color: #ff0000">
    top</span>:<span style="color: #0000ff">14px</span>;<span style="color: #ff0000">
    right</span>:<span style="color: #0000ff">8px</span>;<span style="color: #ff0000">
    cursor</span>:<span style="color: #0000ff">pointer</span>;
}<span style="color: #800000">
#photo_big .big </span>{<span style="color: #ff0000">
    width</span>:<span style="color: #0000ff">620px</span>;<span style="color: #ff0000">
    height</span>:<span style="color: #0000ff">460px</span>;<span style="color: #ff0000">
    padding</span>:<span style="color: #0000ff">10px 0 0 0</span>;<span style="color: #ff0000">
    background-color</span>:<span style="color: #0000ff"> #333</span>;
}<span style="color: #800000">
#photo_big .big img </span>{<span style="color: #ff0000">
    display</span>:<span style="color: #0000ff">block</span>;<span style="color: #ff0000">
    margin</span>:<span style="color: #0000ff">0 auto</span>;<span style="color: #ff0000">
    position</span>:<span style="color: #0000ff">relative</span>;<span style="color: #ff0000">
    top</span>:<span style="color: #0000ff">190px</span>;
}<span style="color: #800000">
#photo_big .big strong </span>{<span style="color: #ff0000">
    display</span>:<span style="color: #0000ff">block</span>;<span style="color: #ff0000">
    width</span>:<span style="color: #0000ff">100px</span>;<span style="color: #ff0000">
    height</span>:<span style="color: #0000ff">100px</span>;<span style="color: #ff0000">
    line-height</span>:<span style="color: #0000ff">100px</span>;<span style="color: #ff0000">
    text-align</span>:<span style="color: #0000ff">center</span>;<span style="color: #ff0000">
    background</span>:<span style="color: #0000ff">#000</span>;<span style="color: #ff0000">
    opacity</span>:<span style="color: #0000ff">0</span>;<span style="color: #ff0000">
    filter</span>:<span style="color: #0000ff">alpha(opacity=0)</span>;<span style="color: #ff0000">
    font-size</span>:<span style="color: #0000ff">60px</span>;<span style="color: #ff0000">
    color</span>:<span style="color: #0000ff">#fff</span>;<span style="color: #ff0000">
    cursor</span>:<span style="color: #0000ff">pointer</span>;<span style="color: #ff0000">
    position</span>:<span style="color: #0000ff">absolute</span>;<span style="color: #ff0000">
    border-radius</span>:<span style="color: #0000ff"> 20px</span>;
}<span style="color: #800000">
#photo_big .big strong.sl </span>{<span style="color: #ff0000">
    top</span>:<span style="color: #0000ff">210px</span>;<span style="color: #ff0000">
    left</span>:<span style="color: #0000ff">20px</span>;
}<span style="color: #800000">
#photo_big .big strong.sr </span>{<span style="color: #ff0000">
    top</span>:<span style="color: #0000ff">210px</span>;<span style="color: #ff0000">
    right</span>:<span style="color: #0000ff">20px</span>;
}<span style="color: #800000">
#photo_big .big span </span>{<span style="color: #ff0000">
    display</span>:<span style="color: #0000ff">block</span>;<span style="color: #ff0000">
    width</span>:<span style="color: #0000ff">300px</span>;<span style="color: #ff0000">
    height</span>:<span style="color: #0000ff">450px</span>;<span style="color: #ff0000">
    background</span>:<span style="color: #0000ff">#000</span>;<span style="color: #ff0000">
    opacity</span>:<span style="color: #0000ff">0</span>;<span style="color: #ff0000">
    filter</span>:<span style="color: #0000ff">alpha(opacity=0)</span>;<span style="color: #ff0000">
    position</span>:<span style="color: #0000ff">absolute</span>;<span style="color: #ff0000">
    cursor</span>:<span style="color: #0000ff">pointer</span>;
}<span style="color: #800000">
#photo_big .big span.left </span>{<span style="color: #ff0000">
    top</span>:<span style="color: #0000ff">50px</span>;<span style="color: #ff0000">
    left</span>:<span style="color: #0000ff">10px</span>;
}<span style="color: #800000">
#photo_big .big span.right </span>{<span style="color: #ff0000">
    top</span>:<span style="color: #0000ff">50px</span>;<span style="color: #ff0000">
    right</span>:<span style="color: #0000ff">10px</span>;
}<span style="color: #800000">
#photo_big .big em </span>{<span style="color: #ff0000">
    position</span>:<span style="color: #0000ff">absolute</span>;<span style="color: #ff0000">
    top</span>:<span style="color: #0000ff">470px</span>;<span style="color: #ff0000">
    right</span>:<span style="color: #0000ff">20px</span>;<span style="color: #ff0000">
    color</span>:<span style="color: #0000ff">#fff</span>;<span style="color: #ff0000">
    font-size</span>:<span style="color: #0000ff">20px</span>;<span style="color: #ff0000">
    font-style</span>:<span style="color: #0000ff">normal</span>;
}</pre>
</div>
<p>前台js</p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">预加载图片</span>
    <span style="color: #008000">//</span><span style="color: #008000">点击弹窗</span>
    $('.wait_load').on_click(<span style="color: #0000ff">function</span><span style="color: #000000"> () {
        $(</span>'#suo_ping'<span style="color: #000000">).xian_shi().zhe_zhao_suo_ping().yi_dong_tou_ming({
            </span>'attr': 'o',  <span style="color: #008000">//</span><span style="color: #008000">动画方式</span>
            'target': 50, <span style="color: #008000">//</span><span style="color: #008000">目标量</span>
            't': 50,      <span style="color: #008000">//</span><span style="color: #008000">每次动画时间</span>
            'step': 5,     <span style="color: #008000">//</span><span style="color: #008000">跨度</span>
            fn: <span style="color: #0000ff">function</span><span style="color: #000000"> () {
                $(</span>'#suo_ping').chuang_kou_shi_jian(<span style="color: #0000ff">function</span><span style="color: #000000"> () {
                    $(</span>'#suo_ping'<span style="color: #000000">).zhe_zhao_suo_ping();
                    $(</span>'#photo_big'<span style="color: #000000">).yuan_su_ju_zhong();
                })
            }
        });
        $(</span>'#photo_big').c_css('display', 'block').yuan_su_ju_zhong().tuo_zhuai('tuo'<span style="color: #000000">);

        </span><span style="color: #0000ff">var</span> temp_img = <span style="color: #0000ff">new</span> Image();                           <span style="color: #008000">//</span><span style="color: #008000">创建临时图片对象</span>
<span style="color: #000000">
        $(temp_img).yuan_su_shi_jian(</span>'load',<span style="color: #0000ff">function</span> () {     <span style="color: #008000">//</span><span style="color: #008000">当图片加载成功时</span>
            $('#photo_big .big img').hq_shu_xing_zhi('src'<span style="color: #000000">,temp_img.src).yi_dong_tou_ming({
                attr:</span>'o'<span style="color: #000000">,
                target:</span>100<span style="color: #000000">,
                t:</span>30<span style="color: #000000">,
                step:</span>10<span style="color: #000000">
            }).c_css(</span>'width','600px').c_css('height','450px').c_css('top',0).shzh_tou_ming_du(0<span style="color: #000000">);
        });
        temp_img.src </span>= $(<span style="color: #0000ff">this</span>).hq_shu_xing_zhi('yjz');        <span style="color: #008000">//</span><span style="color: #008000">图片加载地址</span>

        <span style="color: #008000">//</span><span style="color: #008000">图片鼠标划过</span>
        <span style="color: #008000">//</span><span style="color: #008000">左边</span>
        $('#photo_big .big .left').shu_biao_yi_ru_yi_chu(<span style="color: #0000ff">function</span><span style="color: #000000"> () {
            $(</span>'#photo_big .big .sl'<span style="color: #000000">).yi_dong_tou_ming({
                attr:</span>'o'<span style="color: #000000">,
                target:</span>50<span style="color: #000000">,
                t:</span>30<span style="color: #000000">,
                step:</span>10<span style="color: #000000">
            });
        }, </span><span style="color: #0000ff">function</span><span style="color: #000000"> () {
            $(</span>'#photo_big .big .sl'<span style="color: #000000">).yi_dong_tou_ming({
                attr:</span>'o'<span style="color: #000000">,
                target:</span>0<span style="color: #000000">,
                t:</span>30<span style="color: #000000">,
                step:</span>10<span style="color: #000000">
            });
        });
        </span><span style="color: #008000">//</span><span style="color: #008000">右边</span>
        $('#photo_big .big .right').shu_biao_yi_ru_yi_chu(<span style="color: #0000ff">function</span><span style="color: #000000"> () {
            $(</span>'#photo_big .big .sr'<span style="color: #000000">).yi_dong_tou_ming({
                attr:</span>'o'<span style="color: #000000">,
                target:</span>50<span style="color: #000000">,
                t:</span>30<span style="color: #000000">,
                step:</span>10<span style="color: #000000">
            });
        }, </span><span style="color: #0000ff">function</span><span style="color: #000000"> () {
            $(</span>'#photo_big .big .sr'<span style="color: #000000">).yi_dong_tou_ming({
                attr:</span>'o'<span style="color: #000000">,
                target:</span>0<span style="color: #000000">,
                t:</span>30<span style="color: #000000">,
                step:</span>10<span style="color: #000000">
            });
        });

        </span><span style="color: #008000">//</span><span style="color: #008000">预加载设置</span>
        <span style="color: #0000ff">var</span> children = <span style="color: #0000ff">this</span>.parentNode.parentNode;   <span style="color: #008000">//</span><span style="color: #008000">获取当前元素的父节点的父节点，也就是dl</span>
<span style="color: #000000">        prev_next(children);

        </span><span style="color: #008000">//</span><span style="color: #008000">上一张</span>
        $('#photo_big .big .left').on_click(<span style="color: #0000ff">function</span><span style="color: #000000"> () {
            shang_xian(</span><span style="color: #0000ff">this</span><span style="color: #000000">);
            </span><span style="color: #0000ff">var</span> children = $('#photo_big dl dt img').hq_jd(sh_jd_suo_yin($('#photo_big .big img').hq_shu_xing_zhi('suoy'), $('#photo'<span style="color: #000000">).sh_jd())).parentNode.parentNode;
            prev_next(children);
        });

        </span><span style="color: #008000">//</span><span style="color: #008000">下一张</span>
        $('#photo_big .big .right').on_click(<span style="color: #0000ff">function</span><span style="color: #000000"> () {
            shang_xian(</span><span style="color: #0000ff">this</span><span style="color: #000000">);
            </span><span style="color: #0000ff">var</span> children = $('#photo_big dl dt img').hq_jd(xia_jd_suo_yin($('#photo_big .big img').hq_shu_xing_zhi('suoy'), $('#photo'<span style="color: #000000">).sh_jd())).parentNode.parentNode;
            prev_next(children);
        });

        </span><span style="color: #008000">//</span><span style="color: #008000">共用函数</span>
        <span style="color: #0000ff">function</span><span style="color: #000000"> shang_xian(_this) {
            $(</span>'#photo_big .big img').hq_shu_xing_zhi('src', 'img/loading.gif').c_css('width', '32px').c_css('height', '32px').c_css('top', '190px'<span style="color: #000000">);
            </span><span style="color: #0000ff">var</span> current_img = <span style="color: #0000ff">new</span><span style="color: #000000"> Image();

            $(current_img).yuan_su_shi_jian(</span>'load', <span style="color: #0000ff">function</span> () {    <span style="color: #008000">//</span><span style="color: #008000">当前图片加载完毕后执行</span>
                $('#photo_big .big img').hq_shu_xing_zhi('src', current_img.src).yi_dong_tou_ming({     <span style="color: #008000">//</span><span style="color: #008000">从显示图片获取到索引</span>
                    attr: 'o'<span style="color: #000000">,
                    target: </span>100<span style="color: #000000">,
                    t: </span>30<span style="color: #000000">,
                    step: </span>10<span style="color: #000000">
                }).shzh_tou_ming_du(</span>0).c_css('width', '600px').c_css('height', '450px').c_css('top', 0<span style="color: #000000">);
            });

            current_img.src </span>= $(_this).hq_shu_xing_zhi('src'<span style="color: #000000">);
        }

        </span><span style="color: #008000">//</span><span style="color: #008000">共用函数</span>
        <span style="color: #0000ff">function</span><span style="color: #000000"> prev_next(children) {
            </span><span style="color: #0000ff">var</span> prev = sh_jd_suo_yin($(children).hq_suo_yin(), children.parentNode);   <span style="color: #008000">//</span><span style="color: #008000">获取当前节点的，上一个节点在父元素的索引</span>
            <span style="color: #0000ff">var</span> next = xia_jd_suo_yin($(children).hq_suo_yin(), children.parentNode);  <span style="color: #008000">//</span><span style="color: #008000">获取当前节点的，下一个节点在父元素的索引</span>

            <span style="color: #0000ff">var</span> prev_img = <span style="color: #0000ff">new</span> Image();  <span style="color: #008000">//</span><span style="color: #008000">预加载上一张图片</span>
            <span style="color: #0000ff">var</span> next_img = <span style="color: #0000ff">new</span> Image();  <span style="color: #008000">//</span><span style="color: #008000">预加载下一张图片</span>
<span style="color: #000000">
            prev_img.src </span>= $('#photo dl dt img').guo_lv_jie_dian(prev).hq_shu_xing_zhi('yjz');  <span style="color: #008000">//</span><span style="color: #008000">预加载上一张图片</span>
            next_img.src = $('#photo dl dt img').guo_lv_jie_dian(next).hq_shu_xing_zhi('yjz');  <span style="color: #008000">//</span><span style="color: #008000">预加载下一张图片</span>
            $('#photo_big .big .left').hq_shu_xing_zhi('src', prev_img.src);  <span style="color: #008000">//</span><span style="color: #008000">将上一张地址赋值给左点击</span>
            $('#photo_big .big .right').hq_shu_xing_zhi('src', next_img.src); <span style="color: #008000">//</span><span style="color: #008000">将下一张地址赋值给右点击</span>
            $('#photo_big .big img').hq_shu_xing_zhi('suoy', $(children).hq_suo_yin()); <span style="color: #008000">//</span><span style="color: #008000">将当前索引赋值给显示图片</span>
            <span style="color: #008000">//</span><span style="color: #008000">显示图片张数</span>
            $('#photo_big .big .index').wen_ben(parseInt($(children).hq_suo_yin()) + 1 + '/' + $('#photo dl dt img'<span style="color: #000000">).jd_length());
        }

    });

    </span><span style="color: #008000">//</span><span style="color: #008000">关闭弹窗</span>
    $('#photo_big .close').on_click(<span style="color: #0000ff">function</span><span style="color: #000000"> () {
        $(</span>'#photo_big').c_css('display', 'none'<span style="color: #000000">);
        $(</span>'#suo_ping'<span style="color: #000000">).yi_dong_tou_ming({
            </span>'attr': 'o',  <span style="color: #008000">//</span><span style="color: #008000">动画方式</span>
            'target': 0, <span style="color: #008000">//</span><span style="color: #008000">目标量</span>
            't': 50,      <span style="color: #008000">//</span><span style="color: #008000">每次动画时间</span>
            'step': 5     <span style="color: #008000">//</span><span style="color: #008000">跨度</span>
<span style="color: #000000">        });
        $(</span>'#photo_big .big img').hq_shu_xing_zhi('src','img/loading.gif').c_css('width','32px').c_css('height','32px').c_css('top','190px');  <span style="color: #008000">//</span><span style="color: #008000">关闭弹窗后，恢复默认图片</span>
        $('#suo_ping'<span style="color: #000000">).jie_chu_suo_ping();
    });</span></pre>
</div>
<p>首先引入封装库</p></div>