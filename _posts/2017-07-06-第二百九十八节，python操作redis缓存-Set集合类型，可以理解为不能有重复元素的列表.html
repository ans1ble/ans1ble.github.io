第二百九十八节，python操作redis缓存-Set集合类型，可以理解为不能有重复元素的列表


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>python操作redis缓存-Set集合类型，可以理解为<span style="color: #ff0000">不能有重复元素的列表</span></strong></p>
<p>&nbsp;</p>
<p><strong><span style="color: #ff0000"><span style="color: #0000ff">sadd(name,values)</span>name对应的集合中添加元素</span></strong></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.<span style="background-color: #ff99cc">sadd(<span style="color: #800000">'</span><span style="color: #800000">adc8868</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>)</span>                                         <span style="color: #008000">#</span><span style="color: #008000">sadd(name,values)name对应的集合中添加元素</span>
<span style="color: #000000">
f </span>= r.smembers(<span style="color: #800000">'</span><span style="color: #800000">adc8868</span><span style="color: #800000">'</span>)                                       <span style="color: #008000">#</span><span style="color: #008000">获取name对应的集合的所有成员</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(f)
</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000">{b'123'}</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">scard(name)</span>获取name对应的集合中元素个数</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.<span style="background-color: #ff99cc">sadd(<span style="color: #800000">'</span><span style="color: #800000">adc8868</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>)</span>                                         <span style="color: #008000">#</span><span style="color: #008000">sadd(name,values)name对应的集合中添加元素</span>
<span style="color: #000000">
f </span>= r.scard(<span style="color: #800000">'</span><span style="color: #800000">adc8868</span><span style="color: #800000">'</span>)                                          <span style="color: #008000">#</span><span style="color: #008000">scard(name)获取name对应的集合中元素个数</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(f)
</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000">1</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">sdiff(keys, *args)</span>在第一个name对应的集合中且不在其他name对应的集合的元素集合</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">adc8861</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>)                                   <span style="color: #008000">#</span><span style="color: #008000">sadd(name,values)name对应的集合中添加元素</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">adc8862</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">789</span><span style="color: #800000">'</span><span style="color: #000000">)

f </span>= r.<span style="background-color: #ff99cc">sdiff(<span style="color: #800000">'</span><span style="color: #800000">adc8862</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">adc8861</span><span style="color: #800000">'</span>)</span>                                <span style="color: #008000">#</span><span style="color: #008000">sdiff(keys, *args)在第一个name对应的集合中且不在其他name对应的集合的元素集合</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(f)
</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000">{b'789'}</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">sdiffstore(dest, keys, *args)</span>获取第一个name对应的集合中且不在其他name对应的集合，再将其新加入到dest对应的集合中</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">adc8861</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>)                                   <span style="color: #008000">#</span><span style="color: #008000">sadd(name,values)name对应的集合中添加元素</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">adc8862</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">789</span><span style="color: #800000">'</span><span style="color: #000000">)

f </span>= r.<span style="background-color: #ff99cc">sdiffstore(<span style="color: #800000">'</span><span style="color: #800000">adc</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">adc8862</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">adc8861</span><span style="color: #800000">'</span>)</span>                    <span style="color: #008000">#</span><span style="color: #008000">sdiffstore(dest, keys, *args)获取第一个name对应的集合中且不在其他name对应的集合，再将其新加入到dest对应的集合中</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(f)

n </span>= r.smembers(<span style="color: #800000">'</span><span style="color: #800000">adc</span><span style="color: #800000">'</span>)                                          <span style="color: #008000">#</span><span style="color: #008000">获取name对应的集合的所有成员</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)
</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000"> 1</span><span style="color: #008000">
#</span><span style="color: #008000"> {b'789'}</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">sinter(keys, *args)</span>获取多个集合与第一个集合里交集的数据，也就是相同的数据</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">851</span><span style="color: #800000">'</span>)                                <span style="color: #008000">#</span><span style="color: #008000">sadd(name,values)name对应的集合中添加元素</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi2</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">789</span><span style="color: #800000">'</span><span style="color: #000000">)

n </span>= r.<span style="background-color: #ff99cc">sinter(<span style="color: #800000">"</span><span style="color: #800000">rdi1</span><span style="color: #800000">"</span>,<span style="color: #800000">"</span><span style="color: #800000">rdi2</span><span style="color: #800000">"</span>)</span>                                     <span style="color: #008000">#</span><span style="color: #008000">sinter(keys, *args)获取多个集合与第一个集合里交集的数据，也就是相同的数据</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)

</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000">{b'123', b'456'}</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">sinterstore(dest, keys, *args)</span>获取多个集合与第一个集合里交集的数据，也就是相同的数据，在将其加入到dest对应的集合中</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">851</span><span style="color: #800000">'</span>)                                <span style="color: #008000">#</span><span style="color: #008000">sadd(name,values)name对应的集合中添加元素</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi2</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">789</span><span style="color: #800000">'</span><span style="color: #000000">)

n </span>= r.<span style="background-color: #ff99cc">sinterstore(<span style="color: #800000">'</span><span style="color: #800000">adc</span><span style="color: #800000">'</span>,<span style="color: #800000">"</span><span style="color: #800000">rdi1</span><span style="color: #800000">"</span>,<span style="color: #800000">"</span><span style="color: #800000">rdi2</span><span style="color: #800000">"</span>)</span>                           <span style="color: #008000">#</span><span style="color: #008000">sinterstore(dest, keys, *args)获取多个集合与第一个集合里交集的数据，也就是相同的数据，在将其加入到dest对应的集合中</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)

n </span>= r.smembers(<span style="color: #800000">'</span><span style="color: #800000">adc</span><span style="color: #800000">'</span>)                                          <span style="color: #008000">#</span><span style="color: #008000">获取name对应的集合的所有成员</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)
</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000"> 2</span><span style="color: #008000">
#</span><span style="color: #008000"> {b'123', b'456'}</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">sismember(name, value)</span>检查value是否是name对应的集合的成员</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">851</span><span style="color: #800000">'</span>)                                <span style="color: #008000">#</span><span style="color: #008000">sadd(name,values)name对应的集合中添加元素</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi2</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">789</span><span style="color: #800000">'</span><span style="color: #000000">)

n </span>= r.<span style="background-color: #ff99cc">sismember(<span style="color: #800000">"</span><span style="color: #800000">rdi1</span><span style="color: #800000">"</span>,<span style="color: #800000">'</span><span style="color: #800000">851</span><span style="color: #800000">'</span>)</span>                           <span style="color: #008000">#</span><span style="color: #008000">sismember(name, value)检查value是否是name对应的集合的成员</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)

</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000">True</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">smembers(name)</span> 获取name对应的集合的所有成员</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">851</span><span style="color: #800000">'</span>)                                <span style="color: #008000">#</span><span style="color: #008000">sadd(name,values)name对应的集合中添加元素</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi2</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">789</span><span style="color: #800000">'</span><span style="color: #000000">)

n </span>= r.<span style="background-color: #ff99cc">smembers(<span style="color: #800000">"</span><span style="color: #800000">rdi1</span><span style="color: #800000">"</span>)</span>                           <span style="color: #008000">#</span><span style="color: #008000">smembers(name) 获取name对应的集合的所有成员</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)

</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000">{b'123', b'851', b'456'}</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">smove(src, dst, value)</span>将某个成员从一个集合中移动到另外一个集合</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">851</span><span style="color: #800000">'</span>)                                <span style="color: #008000">#</span><span style="color: #008000">sadd(name,values)name对应的集合中添加元素</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi2</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">789</span><span style="color: #800000">'</span><span style="color: #000000">)

n </span>= r.<span style="background-color: #ff99cc">smove(<span style="color: #800000">"</span><span style="color: #800000">rdi1</span><span style="color: #800000">"</span>,<span style="color: #800000">'</span><span style="color: #800000">rdi2</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">851</span><span style="color: #800000">'</span>)</span>                           <span style="color: #008000">#</span><span style="color: #008000">smove(src, dst, value)将某个成员从一个集合中移动到另外一个集合</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)

</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000">True</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">spop(name)</span>从集合的右侧（尾部）移除一个成员，并将其返回</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">851</span><span style="color: #800000">'</span>)                                <span style="color: #008000">#</span><span style="color: #008000">sadd(name,values)name对应的集合中添加元素</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi2</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">789</span><span style="color: #800000">'</span><span style="color: #000000">)

n </span>= r.<span style="background-color: #ff99cc">spop(<span style="color: #800000">"</span><span style="color: #800000">rdi1</span><span style="color: #800000">"</span>)</span>                           <span style="color: #008000">#</span><span style="color: #008000">spop(name)从集合的右侧（尾部）移除一个成员，并将其返回</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)

</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000">b'851'</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">srandmember(name, numbers)</span>从name对应的集合中随机获取 numbers 个元素</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">851</span><span style="color: #800000">'</span>)                                <span style="color: #008000">#</span><span style="color: #008000">sadd(name,values)name对应的集合中添加元素</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi2</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">789</span><span style="color: #800000">'</span><span style="color: #000000">)

n </span>= r.<span style="background-color: #ff99cc">srandmember(<span style="color: #800000">"</span><span style="color: #800000">rdi1</span><span style="color: #800000">"</span>,number=2)</span>                           <span style="color: #008000">#</span><span style="color: #008000">srandmember(name, numbers)从name对应的集合中随机获取 numbers 个元素</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)

</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000">[b'851', b'123']</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">srem(name, values)</span>在name对应的集合中删除某些值</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">851</span><span style="color: #800000">'</span>)                                <span style="color: #008000">#</span><span style="color: #008000">sadd(name,values)name对应的集合中添加元素</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi2</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">789</span><span style="color: #800000">'</span><span style="color: #000000">)

n </span>= r.<span style="background-color: #ff99cc">srem(<span style="color: #800000">"</span><span style="color: #800000">rdi1</span><span style="color: #800000">"</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>)</span>                           <span style="color: #008000">#</span><span style="color: #008000">srem(name, values)在name对应的集合中删除某些值</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)

</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000">1</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">sunion(keys, *args)</span>获取多个name对应的集合的并集，并集后相同的数据只显示一个</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">851</span><span style="color: #800000">'</span>)                                <span style="color: #008000">#</span><span style="color: #008000">sadd(name,values)name对应的集合中添加元素</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi2</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">789</span><span style="color: #800000">'</span><span style="color: #000000">)

n </span>= r.<span style="background-color: #ff99cc">sunion(<span style="color: #800000">"</span><span style="color: #800000">rdi1</span><span style="color: #800000">"</span>,<span style="color: #800000">'</span><span style="color: #800000">rdi2</span><span style="color: #800000">'</span>)</span>                           <span style="color: #008000">#</span><span style="color: #008000">sunion(keys, *args)获取多个name对应的集合的并集，并集后相同的数据只显示一个</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)

</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000">{b'456', b'123', b'789', b'851'}</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">sunionstore(dest,keys, *args)</span>获取多个name对应的集合的并集，并集后相同的数据只取一个，并将结果保存到dest对应的集合中</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">851</span><span style="color: #800000">'</span>)                                <span style="color: #008000">#</span><span style="color: #008000">sadd(name,values)name对应的集合中添加元素</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi2</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">789</span><span style="color: #800000">'</span><span style="color: #000000">)

r.<span style="background-color: #ff99cc">sunionstore(</span></span><span style="background-color: #ff99cc"><span style="color: #800000">'</span><span style="color: #800000">adc</span><span style="color: #800000">'</span>,<span style="color: #800000">"</span><span style="color: #800000">rdi1</span><span style="color: #800000">"</span>,<span style="color: #800000">'</span><span style="color: #800000">rdi2</span><span style="color: #800000">'</span>)</span>               <span style="color: #008000">#</span><span style="color: #008000">sunionstore(dest,keys, *args)获取多个name对应的集合的并集，并集后相同的数据只取一个，并将结果保存到dest对应的集合中</span>
n = r.smembers(<span style="color: #800000">"</span><span style="color: #800000">adc</span><span style="color: #800000">"</span>)                           <span style="color: #008000">#</span><span style="color: #008000">smembers(name) 获取name对应的集合的所有成员</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)

</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000">{b'456', b'851', b'123', b'789'}</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">sscan(name, cursor=0, match=None, count=None)</span>同字符串的操作，用于增量迭代分批获取元素，避免内存消耗太大【推荐使用下面那个方法】</strong></span><br><strong>    　　name，redis的name</strong><br><strong>　　cursor，游标（基于游标分批取获取数据）</strong><br><strong>　　match，匹配指定key，默认None 表示所有的key</strong><br><strong>　　count，每次分片最少获取个数，默认None表示采用Redis的默认分片个数</strong><br><strong>　　如：</strong><br><strong>　　第一次：cursor1, data1 = r.sscan('name', cursor=0, match=None, count=None)</strong><br><strong>　　第二次：cursor2, data2 = r.sscan('name', cursor=cursor1, match=None, count=None)</strong><br><strong>　　...</strong><br><strong>　　直到返回值cursor的值为0时，表示数据已经通过分片获取完毕</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">851</span><span style="color: #800000">'</span>)                                <span style="color: #008000">#</span><span style="color: #008000">sadd(name,values)name对应的集合中添加元素</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi2</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">789</span><span style="color: #800000">'</span><span style="color: #000000">)

</span><span style="color: #008000">#</span><span style="color: #008000">sscan(name, cursor=0, match=None, count=None)用于增量迭代分批获取元素，避免内存消耗太大</span>
<span style="background-color: #ffff99">cursor1</span>, data1 = r.<span style="background-color: #ff99cc">sscan(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,cursor=0,match=<span style="color: #800000">'</span><span style="color: #800000">*1</span><span style="color: #800000">'</span>,count=None)</span>       <span style="color: #008000">#</span><span style="color: #008000">获取name对应的元素，匹配以1结尾的元素</span>
<span style="color: #0000ff">print</span>(cursor1, data1)                                                 <span style="color: #008000">#</span><span style="color: #008000">返回两个值，第一个是获取的游标位置，第二个是获取到的数据</span>
<span style="color: #000000">
cursor2, data2 </span>= r.<span style="background-color: #ff99cc">sscan(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="background-color: #ffff99">cursor=cursor1</span>,match=<span style="color: #800000">'</span><span style="color: #800000">*2</span><span style="color: #800000">'</span>,count=None)</span>    <span style="color: #008000">#</span><span style="color: #008000">第二次获取，游标使用第一次返回的游标位置，使其向后继续</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(cursor2, data2)


</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000">0 [b'851']</span><span style="color: #008000">
#</span><span style="color: #008000">0 []</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">sscan_iter(name, match=None, count=None)</span>用于增量迭代分批获取元素，避免内存消耗太大【推荐】</strong></span><br><strong>    　　name，redis的name</strong><br><strong>　　match，匹配指定key，默认None 表示所有的key</strong><br><strong>　　count，每次分片最少获取个数，默认None表示采用Redis的默认分片个数</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">851</span><span style="color: #800000">'</span>)                                <span style="color: #008000">#</span><span style="color: #008000">sadd(name,values)name对应的集合中添加元素</span>
r.sadd(<span style="color: #800000">'</span><span style="color: #800000">rdi2</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">456</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">789</span><span style="color: #800000">'</span><span style="color: #000000">)

</span><span style="color: #008000">#</span><span style="color: #008000">sscan_iter(name, match=None, count=None)用于增量迭代分批获取元素，避免内存消耗太大</span>
n = r.<span style="background-color: #ff99cc">sscan_iter(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,match=<span style="color: #800000">'</span><span style="color: #800000">*1</span><span style="color: #800000">'</span>,count=None)</span>       <span style="color: #008000">#</span><span style="color: #008000">获取name对应的元素，匹配以1结尾的元素</span>
<span style="color: #0000ff">print</span>(n)                                             <span style="color: #008000">#</span><span style="color: #008000">返回获取到的数据对象，需要循环</span>

<span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span><span style="color: #000000"> n:
    </span><span style="color: #0000ff">print</span>(i)                                         <span style="color: #008000">#</span><span style="color: #008000">循环出获取到的数据</span>


<span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000"> &lt;generator object StrictRedis.sscan_iter at 0x0000023F18C94570&gt;</span><span style="color: #008000">
#</span><span style="color: #008000"> b'851'</span></pre>
</div>
<p>&nbsp;</p></div>