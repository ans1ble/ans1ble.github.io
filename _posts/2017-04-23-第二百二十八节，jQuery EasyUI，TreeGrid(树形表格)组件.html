第二百二十八节，jQuery EasyUI，TreeGrid(树形表格)组件


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>jQuery EasyUI，TreeGrid(树形表格)组件</strong></p>
<p>&nbsp;<img src="https://images2015.cnblogs.com/blog/955761/201704/955761-20170423232247726-1094217643.png" alt=""></p>
<p><strong>学习要点：</strong></p>
<p><strong> 　　1.加载方式 </strong></p>
<p><strong>　　2.属性列表 </strong></p>
<p><strong>　　3.事件列表 </strong></p>
<p><strong>　　4.方法列表</strong></p>
<p>&nbsp;</p>
<p><strong>本节课重点了解 EasyUI 中 TreeGrid(树形表格)组件的使用方法，<span style="color: #ff0000">这个组件依赖于 DataGrid(数据表格)组件。</span></strong></p>
<p>&nbsp;</p>
<p><strong><span style="color: #ff0000">一．加载方式</span></strong></p>
<p><span style="color: #0000ff"><strong>建立一个 JSON 文件</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #000000">[
  {
    </span>"id": 1<span style="color: #000000">,
    </span>"name": "系统管理"<span style="color: #000000">,
    </span>"date": "2015-05-10"<span style="color: #000000">,
    </span>"children"<span style="color: #000000">: [
      {
        </span>"id": 2<span style="color: #000000">,
        </span>"name": "主机信息"<span style="color: #000000">,
        </span>"date": "2015-05-11"<span style="color: #000000">
      }
    ]
  },
  {
    </span>"id": 3<span style="color: #000000">,
    </span>"name": "会员管理"<span style="color: #000000">,
    </span>"date": "2015-05-10"<span style="color: #000000">,
    </span>"children"<span style="color: #000000">: [
      {
        </span>"id": 4<span style="color: #000000">,
        </span>"name": "认证审核"<span style="color: #000000">,
        </span>"date": "2015-05-11"<span style="color: #000000">
      }
    ]
  }
]</span></pre>
</div>
<p><span style="color: #0000ff"><strong>class 加载方式</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">&lt;</span><span style="color: #800000">table </span><span style="color: #ff0000">class</span><span style="color: #0000ff">="easyui-treegrid"</span><span style="color: #ff0000"> style</span><span style="color: #0000ff">="width:380px;height:150px"</span><span style="color: #ff0000">
       data-options</span><span style="color: #0000ff">="url:'property.json',idField:'id',treeField:'name'"</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">thead</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">tr</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;</span><span style="color: #800000">th </span><span style="color: #ff0000">data-options</span><span style="color: #0000ff">="field:'name',width:180"</span><span style="color: #0000ff">&gt;</span>菜单名称<span style="color: #0000ff">&lt;/</span><span style="color: #800000">th</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;</span><span style="color: #800000">th </span><span style="color: #ff0000">data-options</span><span style="color: #0000ff">="field:'date',width:180"</span><span style="color: #0000ff">&gt;</span>创建时间<span style="color: #0000ff">&lt;/</span><span style="color: #800000">th</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;/</span><span style="color: #800000">tr</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;/</span><span style="color: #800000">thead</span><span style="color: #0000ff">&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">table</span><span style="color: #0000ff">&gt;</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #0000ff"><strong>JS 加载方式</strong></span></p>
<p><span style="color: #ff0000"><strong>treegrid()将一个table元素执行TreeGrid(树形表格)组件</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">&lt;</span><span style="color: #800000">table </span><span style="color: #ff0000">id</span><span style="color: #0000ff">="box"</span><span style="color: #ff0000"> style</span><span style="color: #0000ff">="width:380px;height:150px;"</span><span style="color: #0000ff">&gt;&lt;/</span><span style="color: #800000">table</span><span style="color: #0000ff">&gt;</span></pre>
</div>
<div class="cnblogs_code">
<pre>$(<span style="color: #0000ff">function</span><span style="color: #000000"> () {
    $(</span>'#box'<span style="color: #000000">).treegrid({
        url: </span>'property.json'<span style="color: #000000">,
        idField: </span>'id',            <span style="color: #008000">//</span><span style="color: #008000">定义关键字段来标识树节点。也就是数据的id</span>
        treeField: 'name',        <span style="color: #008000">//</span><span style="color: #008000">定义树形显示字段</span>
        columns: [[                <span style="color: #008000">//</span><span style="color: #008000">定义表格头名称</span>
<span style="color: #000000">            {
                title: </span>'菜单名称'<span style="color: #000000">,
                field: </span>'name'<span style="color: #000000">,
                width: </span>180<span style="color: #000000">,
            },
            {
                title: </span>'创建时间'<span style="color: #000000">,
                field: </span>'date'<span style="color: #000000">,
                width: </span>180<span style="color: #000000">,
            }
        ]],
    });
});</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>二．属性列表</strong></span></p>
<p><span style="color: #ff0000"><strong>树形表格扩展自 datagrid(数据表格)，树形表格新增的属性如下：</strong></span></p>
<p><span style="color: #ff0000"><strong><strong>方法和 DataGrid 一致，不在重复！略。</strong></strong></span></p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201704/955761-20170423225416679-1924231422.png" alt=""></strong></span></p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201704/955761-20170423225423304-711527959.png" alt=""></strong></span></p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">idField</span> &nbsp; string 定义关键字段来标识树节点。（必须的）</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">treeField</span> &nbsp; string 定义树节点字段。（必须的）</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">animate</span> &nbsp; boolean 定义在节点展开或折叠的时候是否显示动画效果。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">loader</span> &nbsp; function(param,success,error)定义以何种方式从远程服务器读取数据。返回false 可以忽略该动作。该函数具有一下参数：param：传递到远程服务器的参数对象。success(data)：当检索数据成功的时候调用的回调函数。error()：当检索数据失败的时候调用的回调函数。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">loadFilter</span> &nbsp; function(data,parentId) 返回过滤后的数据进行展示。</strong></span></p>
<p><strong><span style="color: #ff0000"><span style="color: #0000ff">方法和 DataGrid 一致，不在重复！略。</span><br></span></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>三．事件列表</strong></span></p>
<p><span style="color: #ff0000"><strong>树形表格的事件扩展自 datagrid(数据表格)，树形表格新增的时间如下：</strong></span></p>
<p><span style="color: #ff0000"><strong><strong>&nbsp;事件和 DataGrid 基本一致，代码演示忽略。</strong></strong></span></p>
<p><strong><span style="color: #ff0000"><span style="color: #0000ff"><img src="https://images2015.cnblogs.com/blog/955761/201704/955761-20170423225938163-1617930205.png" alt=""></span></span></strong></p>
<p>&nbsp;</p>
<p><img src="https://images2015.cnblogs.com/blog/955761/201704/955761-20170423225949522-1535747628.png" alt=""></p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">onClickRow</span> &nbsp; row 在用户点击节点的时候触发。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">onDblClickRow</span> &nbsp; row 在用户双击节点的时候触发。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">onClickCell</span> &nbsp; field,row 在用户点击单元格的时候触发。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">onDblClickCell</span> &nbsp; field,row 在用户双击单元格的时候触发。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">onBeforeLoad</span> &nbsp; row, param在请求数据加载之前触发，返回 false可以取消加载动作。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">onLoadSuccess</span> &nbsp; row, data 数据加载完成之后触发。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">onLoadError</span> &nbsp; arguments数据加载失败的时候触发，参数和jQuery 的$.ajax()函数的'error'回调函数一样。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">onBeforeExpand</span> &nbsp; row在节点展开之前触发，返回 false 可以取消展开节点的动作。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">onExpand</span> &nbsp; row 在节点被展开的时候触发。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">onBeforeCollapse</span> &nbsp; row在节点折叠之前触发，返回 false 可以取消折叠节点的动作。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">onCollapse</span> &nbsp; row 在节点被折叠的时候触发。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">onContextMenu</span> &nbsp; e, row 在右键点击节点的时候触发。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">onBeforeEdit</span> &nbsp; row 在用户开始编辑节点的时候触发。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">onAfterEdit</span> &nbsp; row,changes 在用户完成编辑的时候触发。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">onCancelEdit</span> &nbsp; row 在用户取消编辑节点的时候触发。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #0000ff"><strong>&nbsp;事件和 DataGrid 基本一致，代码演示忽略。</strong></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>四．方法列表</strong></span></p>
<p><span style="color: #ff0000"><strong>很多方法都使用'id'命名参数，而'id'参数代表树节点的值。</strong></span></p>
<p><span style="color: #ff0000"><strong>方法和 DataGrid 一致，代码演示忽略。</strong></span></p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201704/955761-20170423230932163-858902126.png" alt=""></strong></span></p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201704/955761-20170423230938757-2016191579.png" alt=""></strong></span></p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201704/955761-20170423230945429-8798344.png" alt=""></strong></span></p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201704/955761-20170423230952007-748455361.png" alt=""></strong></span></p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201704/955761-20170423231024491-329319884.png" alt=""></strong></span></p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201704/955761-20170423231033116-1760662345.png" alt=""></strong></span></p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">options</span> &nbsp; none 返回树形表格的属性。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">resize</span> &nbsp; options设置树形表格大小，options 包含 2 个属性：width：树形表格的新宽度。height：树形表格的新高度。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">fixRowHeight</span> &nbsp; id 修正指定的行高。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">load</span> &nbsp; param 读取并显示首页内容。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">loadData</span> &nbsp; data 读取树形表格数据。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">reload</span> &nbsp; id重新加载树形表格数据。如果'id'属性有值，将重新载入指定树形行，否则重新载入所有行。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">reloadFooter</span> &nbsp; footer 重新载入页脚数据。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">getData</span> &nbsp; none 获取载入数据。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">getFooterRows</span> &nbsp; none 获取页脚数据。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">getRoot</span> &nbsp; none 获取根节点，返回节点对象。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">getRoots</span> &nbsp; none 获取所有根节点，返回节点数组。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">getParent</span> &nbsp; id 获取父节点。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">getChildren</span> &nbsp; id 获取子节点。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">getSelected</span> &nbsp; none获取选择的节点并返回它，如果没有节点被选中则返回 null。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">getSelections</span> &nbsp; none 获取所有选择的节点。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">getLevel</span> &nbsp; id 获取指定节点等级。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">find</span> &nbsp; id 查找指定节点并返回节点数据。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">select</span> &nbsp; id 选择一个节点。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">unselect</span> &nbsp; id 反选一个节点。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">selectAll</span> &nbsp; none 选择所有节点。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">unselectAll</span> &nbsp; none 反选所有节点。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">collapse</span> &nbsp; id 折叠一个节点。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">expand</span> &nbsp; id 展开一个节点。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">collapseAll</span> &nbsp; id 折叠所有节点。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">expandAll</span> &nbsp; id 展开所有节点。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">expandTo</span> &nbsp; id 打开从根节点到指定节点之间的所有节点。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">toggle</span> &nbsp; id 节点展开/折叠状态触发器。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">append</span> &nbsp; param追加节点到一个父节点，'param'参数包含如下属性：parent：父节点 ID，如果未指定则追加到根节点。data：数组，节点数据。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">insert</span> &nbsp; param插入一个新节点到指定节点。'param'参数包含一下参数：before：插入指定节点 ID 值之前。after：插入指定节点 ID 值之后。data：新节点数据。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">remove</span> &nbsp; id 移除一个节点和他的所有子节点。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">pop</span> &nbsp; id 弹出并返回节点数据以及它的子节点之后删除。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">refresh</span> &nbsp; id 刷新指定节点。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">update</span> &nbsp; param更新指定节点。'param'参数包含以下属性：id：要更新的节点的 ID。row：新的行数据。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">beginEdit</span> &nbsp; id 开始编辑一个节点。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">endEdit</span> &nbsp; id 结束编辑一个节点。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">cancelEdit</span> &nbsp; id 取消编辑一个节点。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">getEditors</span> &nbsp; id获取指定行编辑器。每个编辑器都包含以下属性：actions：编辑器执行的动作。target：目标编辑器的 jQuery 对象。field：字段名称。type：编辑器类型。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">getEditor</span> &nbsp; param获取指定编辑器，'param'参数包含 2 个属性：id：行节点 ID。field：字段名称。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #0000ff"><strong>&nbsp;方法和 DataGrid 一致，代码演示忽略。</strong></span></p></div>