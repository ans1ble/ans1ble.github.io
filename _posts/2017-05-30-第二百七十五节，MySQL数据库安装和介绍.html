第二百七十五节，MySQL数据库安装和介绍


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>MySQL数据库安装</strong></p>
<p>&nbsp;</p>
<h3><span style="color: #ff0000">一、概述</span></h3>
<p><strong>1、什么是数据库 ？</strong><br>　答：数据的仓库，称其为数据库</p>
<p>&nbsp;</p>
<p><strong>2、什么是 MySQL、Oracle、SQLite、Access、MS SQL Server等 ？</strong><br>　答：他们均是一种软件，都有两个主要的功能：<br>	　　a. 将数据保存到文件或内存<br>	　　b. 接收特定的命令，然后对文件进行相应的操作</p>
<p>MySQL是一个关系型数据库管理系统，由瑞典MySQL AB 公司开发，目前属于 Oracle 旗下公司。MySQL 最流行的关系型数据库管理系统，在 WEB 应用方面MySQL是最好的 RDBMS (Relational Database Management System，关系数据库管理系统) 应用软件之一。</p>
<p>PS：如果有了以上软件，无须自己再去创建文件和文件夹，而是直接传递 命令 给上述软件，让其来进行文件操作，他们统称为数据库管理系统（DBMS，Database Management System）</p>
<p>&nbsp;</p>
<p><strong>3、什么是SQL语句 ？</strong><br>　答：上述提到MySQL等软件可以接受命令，并做出相应的操作，由于命令中可以包含删除文件、获取文件内容等众多操作，对于编写的命令就是是SQL语句。SQL是结构化语言（Structured Query Language）的缩写，SQL是一种专门用来与数据库通信的语言。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>二、下载安装MySQL数据库安</strong></span></p>
<p><strong>想要使用MySQL来存储并操作数据，则需要做几件事情：</strong></p>
<p><br>　　a. 安装MySQL服务端<br>　　b. 安装MySQL客户端<br>　　b. 【客户端】连接【服务端】<br>　　c. 【客户端】发送命令给【服务端MySQL】服务的接受命令并执行相应操作(增删改查等)</p>
<p><span style="color: #0000ff"><strong>&nbsp;官方下载网址：http://dev.mysql.com/downloads/mysql/</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><strong>Window版本安装</strong></strong></span></p>
<p><span style="color: #000000">1、下载 ，MySQL Community Server 5.7.16版本</span></p>
<p><span style="color: #000000"><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530072414164-1613511977.png" alt=""></span></p>
<p>2、解压<br>如果想要让MySQL安装在指定目录，那么就将解压后的文件夹移动到指定目录，如：E:\&nbsp;</p>
<p><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530072759914-1877900779.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #000000">解压后文件夹里的文件</span></p>
<p><span style="color: #000000"><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530073254946-958897721.png" alt=""></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>安装和启动MySQL</strong></span></p>
<p><span style="color: #000000">MySQL解压后的 bin 目录下有一大堆的可执行文件</span></p>
<p><span style="color: #000000"><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530073910852-2095046327.png" alt=""></span></p>
<p>&nbsp;</p>
<p><strong><span style="color: #000000">1、初始化</span></strong></p>
<p><strong><span style="color: #000000">cmd以管理员身份运行</span></strong></p>
<p><strong><span style="color: #000000"><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530075205399-1491887379.png" alt=""></span></strong></p>
<p><span style="color: #000000"><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530075549805-512819341.png" alt=""></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong><span style="color: #000000">进入初始化目录</span></strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">在 cmd终端 输入 <span style="color: #ff0000">cd E:\mysql-5.7.16-winx64\bin</span></span>
<span style="color: #000000">
C:\WINDOWS\system32</span>&gt;<span style="color: #ff0000">cd E:\mysql-5.7.16-winx64\bin</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530080012914-1913603031.png" alt=""></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong><span style="color: #000000">进入目录后初始化数据</span></strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">在 E:\mysql-5.7.16-winx64\bin&gt; 目录下输入 <span style="color: #ff0000">mysqld --initialize-insecure</span></span>
<span style="color: #000000">
E:\mysql</span>-5.7.16-winx64\bin&gt;<span style="color: #ff0000">mysqld --initialize-insecure</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530081841352-62759852.png" alt=""></p>
<p><strong>注意：此时没有什么返回信息，查看E:\mysql-5.7.16-winx64目录下是否自动生成了data文件夹，如果生成了此文件夹并且文件夹里包含了数据，表示初始化成功</strong></p>
<p><strong><span style="color: #000000"><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530082318102-1956721964.png" alt=""></span></strong></p>
<p><strong><span style="color: #000000">data文件夹里包含数据</span></strong></p>
<p><strong><span style="color: #000000"><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530082451211-1026241939.png" alt=""></span></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>启动MySQL服务</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">在 E:\mysql-5.7.16-winx64\bin&gt; 目录下输入 <span style="color: #ff0000">mysqld</span></span>
<span style="color: #000000">
E:\mysql</span>-5.7.16-winx64\bin&gt;<span style="color: #ff0000">mysqld</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530082941758-373618179.png" alt=""></p>
<p><strong>注意：此时cmd终端无法操作了，直接关闭<strong>cmd终端</strong>窗口</strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>重新以管理员身份运行cmd终端进入E:\mysql-5.7.16-winx64\bin&gt;目录</strong></p>
<p><strong><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530083915508-1811285677.png" alt=""></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong><strong>启动MySQL客户端并连接MySQL服务</strong></strong></p>
<p><strong><strong>由于初始化时使用的【mysqld --initialize-insecure】命令，其默认未给root账户设置密码</strong></strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">在 E:\mysql-5.7.16-winx64\bin&gt; 目录下输入<span style="color: #ff0000"> mysql -u root -p</span></span>
<span style="color: #000000">
E:\mysql</span>-5.7.16-winx64\bin&gt;<span style="color: #ff0000">mysql -u root -p

</span><span style="color: #008000">//</span><span style="color: #008000">Enter password: 提示请输入密码，直接回车</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530084313352-1805689040.png" alt=""></p>
<p><strong>到此为止，MySQL服务端已经安装成功并且客户端已经可以连接上，以后再操作MySQL时，只需要重复上述&nbsp;<span style="color: #ff0000"><code class="python plain">mysql&nbsp;</code><code class="python keyword">-</code><code class="python plain">u root&nbsp;</code><code class="python keyword">-</code><code class="python plain">p&nbsp;</code></span>步骤即可。但是，重复的进入可执行文件目录比较繁琐，如想日后操作简便，可以做如下操作。</strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>添加环境变量</strong></p>
<p><strong>将MySQL可执行文件添加到环境变量中，从而执行执行命令即可</strong></p>
<p><span style="color: #0000ff"><strong><code class="python plain">【环境变量】</code><code class="python keyword">-</code><code class="python keyword">-</code><code class="python plain">》【在第二个内容框中找到 变量名为Path 的一行，双击】&nbsp;</code><code class="python keyword">-</code><code class="python keyword">-</code><code class="python plain">&gt; 【将MySQL的</code><code class="python functions">bin</code><code class="python plain">目录路径追加到变值值中，用 ； 分割】</code></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">如：</span>
C:\Program Files (x86)\Parallels\Parallels Tools\Applications;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Python27;C:\Python35;C:\mysql-5.7.16-winx64\bin</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530085717774-878480002.png" alt=""></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>如此一来，以后再启动服务并连接时不需要在进入bin目录了，仅需：</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000"> 启动MySQL服务，在终端输入</span>
<span style="color: #000000">mysqld
 
</span><span style="color: #008000">//</span><span style="color: #008000"> 连接MySQL服务，在终端输入：</span>
mysql -u root -p</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>将MySQL服务制作成windows服务</strong></p>
<p><strong>上一步解决了一些问题，但不够彻底，因为在执行【mysqd】启动MySQL服务器时，当前终端会被hang住，那么做一下设置即可解决此问题：</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000"> 制作MySQL的Windows服务，在终端执行此命令：</span>
"E:\mysql-5.7.16-winx64\bin\mysqld" --<span style="color: #000000">install
 
</span><span style="color: #008000">//</span><span style="color: #008000"> 移除MySQL的Windows服务，在终端执行此命令：</span>
"E:\mysql-5.7.16-winx64\bin\mysqld" --remove</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>注册成服务之后，以后再启动和关闭MySQL服务时，仅需执行如下命令：</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000"> 启动MySQL服务</span>
<span style="color: #000000">net start mysql
 
</span><span style="color: #008000">//</span><span style="color: #008000"> 关闭MySQL服务</span>
net stop mysql</pre>
</div>
<p>&nbsp;</p>
<p><strong>卸载mysql是cd到bin目录下执行<span style="color: #ff0000">mysqld --remove</span></strong></p>
<p><strong>检测安装，输入 <span style="color: #ff0000">mysql --version</span></strong></p>
<p><strong>输入<span style="color: #ff0000">exit</span>退出</strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><strong>Linux版本安装</strong></strong></span></p>
<p><span style="color: #ff0000"><strong><strong>在线安装</strong></strong></span></p>
<p><strong><strong>安装：</strong></strong></p>
<div class="cnblogs_code">
<pre>yum install mysql-server　　</pre>
</div>
<p><strong>服务端启动</strong></p>
<div class="cnblogs_code">
<pre>mysql.server start</pre>
</div>
<p><strong>客户端连接</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">连接：</span>
    mysql -h host -u user -<span style="color: #000000">p
 
    </span><span style="color: #008000">//</span><span style="color: #008000">常见错误：</span>
        ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock'<span style="color: #000000"> (2), it means that the MySQL server daemon (Unix) or service (Windows) is not running.

//退出：
    QUIT 或者 Control+D</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>离线安装【推荐】</strong></span></p>
<p><strong>1、解压MySQL-5.7.16-Linux-glibc2.5-x86_64.tar.gz，并拷贝到/usr/local/mysql目录下 </strong><br>解压：</p>
<div class="cnblogs_code">
<pre>tar -zxvf mysql-5.7.16-linux-glibc2.5-x86_64.tar.gz</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530102638399-1750166644.png" alt=""></p>
<p>拷贝：</p>
<div class="cnblogs_code">
<pre>sudo cp -r mysql-5.7.16-linux-glibc2.5-x86_64 /usr/local/mysql</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530102753993-1723206364.png" alt=""></p>
<p><strong>2、添加系统mysql组和mysql用户</strong>&nbsp;<br>添加系统mysql组</p>
<div class="cnblogs_code">
<pre>sudo groupadd mysql</pre>
</div>
<p>添加mysql用户</p>
<div class="cnblogs_code">
<pre>sudo useradd -r -g mysql mysql</pre>
</div>
<p>添加完成后可用<code>id mysql</code>查看</p>
<p><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530103000930-419959323.png" alt=""></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>3、安装数据库</strong></p>
<p>切换到/usr/local/mysql目录</p>
<div class="cnblogs_code">
<pre>cd /usr/local/mysql</pre>
</div>
<p>修改当前目录拥有者为mysql用户</p>
<div class="cnblogs_code">
<pre>sudo chown -R mysql:mysql ./</pre>
</div>
<p>安装数据库（5.7版本的安装已经不建议使用mysql_install_db 来安装，而是使用mysqld）</p>
<div class="cnblogs_code">
<pre>bin/mysqld --initialize --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530103411055-580280128.png" alt=""></p>
<p>临时密码：xk?hs6OhU</p>
<p>执行以下命令创建RSA private key</p>
<div class="cnblogs_code">
<pre>sudo bin/mysql_ssl_rsa_setup  --datadir=/usr/local/mysql/data</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530103513321-473911723.png" alt=""></p>
<p>修改当前目录拥有者为root用户</p>
<div class="cnblogs_code">
<pre>sudo chown -R root:root ./</pre>
</div>
<p>修改当前data目录拥有者为mysql用户</p>
<div class="cnblogs_code">
<pre>sudo chown -R mysql:mysql data</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530103643618-28748570.png" alt=""></p>
<p>&nbsp;</p>
<p><strong>4、配置my.cnf和开机启动</strong></p>
<div class="cnblogs_code">
<pre>cd support-<span style="color: #000000">files
sudo cp my</span>-<span style="color: #0000ff">default</span>.cnf /etc/<span style="color: #000000">my.cnf
sudo cp mysql.server </span>/etc/init.d/mysql
sudo vim /etc/init.d/mysql             ##修改basedir=  自己的路径     修改datadir= 自己的路径</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530103803696-624300055.png" alt=""></p>
<p><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530103808743-1873705469.png" alt=""></p>
<p>&nbsp;</p>
<p>修改完毕后<code>:wq!</code>保存并退出vi&nbsp;<br>vi命令：</p>
<div class="cnblogs_code">
<pre><span style="color: #000000">按ESC键 跳到命令模式，然后： 
:w 保存文件但不退出vi 
:w file 将修改另外保存到file中，不退出vi 
:w</span>!<span style="color: #000000"> 强制保存，不推出vi 
:wq 保存文件并退出vi 
:wq</span>!<span style="color: #000000"> 强制保存文件，并退出vi 
q: 不保存文件，退出vi 
:q</span>!<span style="color: #000000"> 不保存文件，强制退出vi 
:e</span>! 放弃所有修改，从上次保存文件开始再编辑</pre>
</div>
<p>&nbsp;</p>
<p>修改my.cnf</p>
<div class="cnblogs_code">
<pre>sudo vim /etc/my.cnf</pre>
</div>
<div class="cnblogs_code">
<pre><span style="color: #000000">[mysqld] 
character</span>-set-server=<span style="color: #000000">utf8 
datadir</span>=/home/mysql/mysqldata 
basedir=/usr/local/mysql 
socket=/var/lib/mysql/mysql.sock</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201705/955761-20170530103925008-974474788.png" alt=""></p>
<p>&nbsp;</p>
<p>保存并退出</p>
<p><strong>5、启动mysql</strong></p>
<div class="cnblogs_code">
<pre>service mysql start</pre>
</div>
<p>登录mysql，并设置远程连接</p>
<div class="cnblogs_code">
<pre>mysql -u user -<span style="color: #000000">p

GRANT ALL PRIVILEGES ON </span>*.* TO 'user'@'%' IDENTIFIED BY 'password'<span style="color: #000000"> WITH GRANT OPTION;
flush privileges;</span></pre>
</div>
<p>&nbsp;</p></div>