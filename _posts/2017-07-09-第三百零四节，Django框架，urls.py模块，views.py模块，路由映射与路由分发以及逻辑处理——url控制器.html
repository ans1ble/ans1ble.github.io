第三百零四节，Django框架，urls.py模块，views.py模块，路由映射与路由分发以及逻辑处理——url控制器


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>Django框架，urls.py模块，views.py模块，路由映射与路由分发以及逻辑处理——url控制器</strong></p>
<p><span style="color: #ff0000"><strong>这一节主讲url控制器</strong></span></p>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170709153234228-1960514504.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>一、urls.py模块</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>这个模块是配置路由映射的模块，当用户访问一个url地址时，通过这个路由映射模块，映射给对应的逻辑处理函数</strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170709075414884-993912328.png" alt=""></strong></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">urlpatterns</span>等于的一个列表，列表里的一个元素就是一条路由映射</strong></span></p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">urlpatterns</span>路由映射配置方式</strong></span></p>
<p><strong>参数说明：</strong></p>
<p><strong>一个正则表达式字符串</strong><br><strong>一个可调用对象，通常为一个视图函数或一个指定视图函数路径的字符串</strong><br><strong>可选的要传递给视图函数的默认参数（字典形式）</strong><br><strong>一个可选的name参数</strong></p>
<div class="cnblogs_code">
<pre>urlpatterns =<span style="color: #000000"> [
    url(正则表达式, 映射函数，参数[可选]，别名[可选]),
]<br>
urlpatterns </span>=<span style="color: #000000"> [
    url(r</span><span style="color: #800000">'</span><span style="color: #800000">^admin/</span><span style="color: #800000">'</span>, admin.site.urls,{<span style="color: #800000">'</span><span style="color: #800000">a</span><span style="color: #800000">'</span>:<span style="color: #800000">'</span><span style="color: #800000">123</span><span style="color: #800000">'</span>},<span style="color: #800000">'</span><span style="color: #800000">ADMIN</span><span style="color: #800000">'</span><span style="color: #000000">),
]</span></pre>
</div>
<p><span style="color: #0000ff"><strong>如：</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #800000">"""</span><span style="color: #800000">Xiangmu URL Configuration

The `urlpatterns` list routes URLs to views. For more information please see:
    https://docs.djangoproject.com/en/1.10/topics/http/urls/
Examples:
Function views
    1. Add an import:  from my_app import views
    2. Add a URL to urlpatterns:  url(r'^$', views.home, name='home')
Class-based views
    1. Add an import:  from other_app.views import Home
    2. Add a URL to urlpatterns:  url(r'^$', Home.as_view(), name='home')
Including another URLconf
    1. Import the include() function: from django.conf.urls import url, include
    2. Add a URL to urlpatterns:  url(r'^blog/', include('blog.urls'))
</span><span style="color: #800000">"""</span>
<span style="color: #0000ff">from</span> django.conf.urls <span style="color: #0000ff">import</span><span style="color: #000000"> url
</span><span style="color: #0000ff">from</span> django.contrib <span style="color: #0000ff">import</span><span style="color: #000000"> admin
</span><span style="color: #0000ff">from</span> app1 <span style="color: #0000ff">import</span><span style="color: #000000"> views

urlpatterns </span>=<span style="color: #000000"> [
    url(r</span><span style="color: #800000">'</span><span style="color: #800000">^admin/</span><span style="color: #800000">'</span>, admin.site.urls),   <span style="color: #008000">#</span><span style="color: #008000">系统生成的映射</span>
　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　<span style="background-color: #ffffff; color: #008080">#注意里面的任意一条映射匹配成功，后面的则不在匹配</span><span style="background-color: #ff99cc"><span style="color: #000000">
    url(r</span><span style="color: #800000">'</span><span style="color: #800000">^articles/2003/$</span><span style="color: #800000">'</span>, views.special_case_2003),</span>                           <span style="color: #008000">#</span><span style="color: #008000">表示articles/2003/这个路径映射views模块的special_case_2003函数</span>
    <span style="color: #008000">#</span><span style="color: #008000"> url(r'^articles/([0-9]{4})/$', views.year_archive),                        #表示2003可以是0-9的任意4个数字</span>
    <span style="color: #008000">#</span><span style="color: #008000"> url(r'^articles/([0-9]{4})/([0-9]{2})/$', views.month_archive),            #表示匹配二级目录</span>
    <span style="color: #008000">#</span><span style="color: #008000"> url(r'^articles/([0-9]{4})/([0-9]{2})/([0-9]+)/$', views.article_detail),  #表示匹配三级目录</span>
]</pre>
</div>
<p>&nbsp;</p>
<p><span style="background-color: #ffff00; color: #ff0000"><strong>二、views.py模块，路由映射的函数模块，逻辑处理路由映射的需求</strong></span></p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170709090027587-1889982022.png" alt=""></strong></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>注意：自定义映射函数时，有两个重点</strong></span></p>
<p><span style="color: #ff0000"><strong><strong><span style="color: #0000ff">HttpResponse(字符串)</span>方法向用户返回字符串</strong></strong></span></p>
<p><span style="color: #ff0000"><strong>　　1，定义的函数必须，定义一个形式参数，这个形式参数接收的url请求信息对象，可以通过这个形式参数的各种方法获取到各种请求信息</strong></span></p>
<p><span style="color: #ff0000"><strong>　　2，向用户返回信息，必须在函数结尾return，如果是要给用户返回一串字符串，那就必须返回</strong></span><span style="color: #ff0000"><strong><span style="color: #0000ff">HttpResponse</span>方法，参数是要返回的字符串，需要先导入这个方法</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render,<span style="background-color: #ff99cc">HttpResponse

</span></span><span style="color: #008000">#</span><span style="color: #008000"> Create your views here.</span>

<span style="color: #0000ff">def</span><span style="color: #000000"> special_case_2003(<span style="background-color: #ff99cc">request</span>):
    </span><span style="background-color: #ff99cc"><span style="color: #0000ff">print</span>(request.method)</span>       <span style="color: #008000">#</span><span style="color: #008000">获取用户请求的路径</span>
    <span style="background-color: #ff99cc"><span style="color: #0000ff">return</span> HttpResponse</span>(<span style="color: #800000">'</span><span style="color: #800000">你好</span><span style="color: #800000">'</span>)</pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #000000"><strong>最后测试一下</strong></span></p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170709091957556-377110033.png" alt=""></strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #000000"><strong>浏览器输入：http://127.0.0.1:8000/articles/2003/</strong></span></p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170709092130650-565749167.png" alt=""></strong></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>逻辑处理时获取用户访问路径</strong></span></p>
<p><span style="color: #ff0000"><strong>逻辑处理自定义函数的第二个参数，就是接收用户请求路径的，所以需要自定义形式参数来接收</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render,HttpResponse

</span><span style="color: #008000">#</span><span style="color: #008000"> Create your views here.</span>

<span style="color: #0000ff">def</span><span style="color: #000000"> special_case_2003(request,<span style="background-color: #ff99cc">name</span>):
    </span><span style="color: #0000ff">print</span>(request.method)       <span style="color: #008000">#</span><span style="color: #008000">获取用户请求的路径</span>
    <span style="color: #0000ff">print</span><span style="color: #000000">(<span style="background-color: #ff99cc">name</span>)　　　　　　　　   <span style="color: #008080">#打印路径
    </span></span><span style="color: #0000ff">return</span> HttpResponse(<span style="background-color: #ff99cc">name</span>)　 <span style="color: #008080">#将路径返回到页面</span></pre>
</div>
<p><span style="color: #ff0000"><strong>注意：要获取路径时，需要在路由映射哪里用正则的分组()号，将要获取的路径分组，也就是括起来，<span style="color: #0000ff">如果路由映射里有多个分组，逻辑函数就需要多个形式参数接收</span></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #800000">"""</span><span style="color: #800000">Xiangmu URL Configuration

The `urlpatterns` list routes URLs to views. For more information please see:
    https://docs.djangoproject.com/en/1.10/topics/http/urls/
Examples:
Function views
    1. Add an import:  from my_app import views
    2. Add a URL to urlpatterns:  url(r'^$', views.home, name='home')
Class-based views
    1. Add an import:  from other_app.views import Home
    2. Add a URL to urlpatterns:  url(r'^$', Home.as_view(), name='home')
Including another URLconf
    1. Import the include() function: from django.conf.urls import url, include
    2. Add a URL to urlpatterns:  url(r'^blog/', include('blog.urls'))
</span><span style="color: #800000">"""</span>
<span style="color: #0000ff">from</span> django.conf.urls <span style="color: #0000ff">import</span><span style="color: #000000"> url
</span><span style="color: #0000ff">from</span> django.contrib <span style="color: #0000ff">import</span><span style="color: #000000"> admin
</span><span style="color: #0000ff">from</span> app1 <span style="color: #0000ff">import</span><span style="color: #000000"> views

urlpatterns </span>=<span style="color: #000000"> [
    url(r</span><span style="color: #800000">'</span><span style="color: #800000">^admin/</span><span style="color: #800000">'</span>, admin.site.urls),   <span style="color: #008000">#</span><span style="color: #008000">系统生成的映射</span>
<span style="color: #000000">
    url(r</span><span style="color: #800000">'</span><span style="color: #800000">^<span style="background-color: #ff99cc">(articles/2003)</span>/$</span><span style="color: #800000">'</span>, views.special_case_2003),                         <span style="color: #008000">#</span><span style="color: #008000">表示articles/2003/这个路径映射views模块的special_case_2003函数</span>
    <span style="color: #008000">#</span><span style="color: #008000"> url(r'^articles/([0-9]{4})/$', views.year_archive),                        #表示2003可以是0-9的任意4个数字</span>
    <span style="color: #008000">#</span><span style="color: #008000"> url(r'^articles/([0-9]{4})/([0-9]{2})/$', views.month_archive),            #表示匹配二级目录</span>
    <span style="color: #008000">#</span><span style="color: #008000"> url(r'^articles/([0-9]{4})/([0-9]{2})/([0-9]+)/$', views.article_detail),  #表示匹配三级目录</span>
]</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170709100858790-1230188269.png" alt=""></p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170709100921400-2131964771.png" alt=""></strong></span></p>
<p><strong>&nbsp;上面我们讲到的是自定义形式参数接收访问路径，下面我们讲设置固定形式参数</strong></p>
<p><span style="color: #ff0000"><strong>逻辑处理函数，接收用户访问路径时设置固定形式参数，</strong></span></p>
<p><span style="color: #000000"><strong>需要在路由映射里设置，逻辑函数接收的参数名称<span style="color: #0000ff">?P&lt;year&gt;</span></strong></span></p>
<p><span style="color: #000000"><strong><span style="color: #0000ff">路由映射</span></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #800000">"""</span><span style="color: #800000">Xiangmu URL Configuration

The `urlpatterns` list routes URLs to views. For more information please see:
    https://docs.djangoproject.com/en/1.10/topics/http/urls/
Examples:
Function views
    1. Add an import:  from my_app import views
    2. Add a URL to urlpatterns:  url(r'^$', views.home, name='home')
Class-based views
    1. Add an import:  from other_app.views import Home
    2. Add a URL to urlpatterns:  url(r'^$', Home.as_view(), name='home')
Including another URLconf
    1. Import the include() function: from django.conf.urls import url, include
    2. Add a URL to urlpatterns:  url(r'^blog/', include('blog.urls'))
</span><span style="color: #800000">"""</span>
<span style="color: #0000ff">from</span> django.conf.urls <span style="color: #0000ff">import</span><span style="color: #000000"> url
</span><span style="color: #0000ff">from</span> django.contrib <span style="color: #0000ff">import</span><span style="color: #000000"> admin
</span><span style="color: #0000ff">from</span> app1 <span style="color: #0000ff">import</span><span style="color: #000000"> views

urlpatterns </span>=<span style="color: #000000"> [
    url(r</span><span style="color: #800000">'</span><span style="color: #800000">^admin/</span><span style="color: #800000">'</span>, admin.site.urls),   <span style="color: #008000">#</span><span style="color: #008000">系统生成的映射</span>
<span style="color: #000000">
    url(r</span><span style="color: #800000">'</span><span style="color: #800000">^(<span style="background-color: #ff99cc"><strong>?P&lt;year&gt;</strong></span>articles/2003)/$</span><span style="color: #800000">'</span>, views.special_case_2003),                         <span style="color: #008000">#</span><span style="color: #008000">表示articles/2003/这个路径映射views模块的special_case_2003函数</span>
    <span style="color: #008000">#</span><span style="color: #008000"> url(r'^articles/([0-9]{4})/$', views.year_archive),                        #表示2003可以是0-9的任意4个数字</span>
    <span style="color: #008000">#</span><span style="color: #008000"> url(r'^articles/([0-9]{4})/([0-9]{2})/$', views.month_archive),            #表示匹配二级目录</span>
    <span style="color: #008000">#</span><span style="color: #008000"> url(r'^articles/([0-9]{4})/([0-9]{2})/([0-9]+)/$', views.article_detail),  #表示匹配三级目录</span>
]</pre>
</div>
<p><span style="color: #0000ff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render,HttpResponse

</span><span style="color: #008000">#</span><span style="color: #008000"> Create your views here.</span>

<span style="color: #0000ff">def</span><span style="color: #000000"> special_case_2003(request,<span style="background-color: #ff99cc">year</span>):
    </span><span style="background-color: #ff99cc"><span style="color: #0000ff">print</span><span style="color: #000000">(year)
    </span></span><span style="color: #0000ff">return</span> render(request,<span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>)</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>逻辑处理返回html文件</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong>将HTML文件放到<span style="color: #0000ff">templates</span>文件夹，逻辑处理的时候会自动到这个文件夹搜索相应文件</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170709110016212-416757330.png" alt=""></strong></span></p>
<p><span style="color: #000000; background-color: #ffffff"><strong>需要先导入render方法</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><span style="color: #0000ff">render(用户请求对象，html文件路径名称)</span>方法,向用户返回html文件内容</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"><span style="background-color: #ff99cc"> render</span>,HttpResponse

</span><span style="color: #008000">#</span><span style="color: #008000"> Create your views here.</span>

<span style="color: #0000ff">def</span><span style="color: #000000"> special_case_2003(<span style="background-color: #ffff00">request</span>,name):
    </span><span style="color: #0000ff">return</span> <span style="background-color: #ff99cc">render(<span style="background-color: #ffff00">request</span>,<span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>)</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>整个流程</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>路由映射</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #800000">"""</span><span style="color: #800000">Xiangmu URL Configuration

The `urlpatterns` list routes URLs to views. For more information please see:
    https://docs.djangoproject.com/en/1.10/topics/http/urls/
Examples:
Function views
    1. Add an import:  from my_app import views
    2. Add a URL to urlpatterns:  url(r'^$', views.home, name='home')
Class-based views
    1. Add an import:  from other_app.views import Home
    2. Add a URL to urlpatterns:  url(r'^$', Home.as_view(), name='home')
Including another URLconf
    1. Import the include() function: from django.conf.urls import url, include
    2. Add a URL to urlpatterns:  url(r'^blog/', include('blog.urls'))
</span><span style="color: #800000">"""</span>
<span style="color: #0000ff">from</span> django.conf.urls <span style="color: #0000ff">import</span><span style="color: #000000"> url
</span><span style="color: #0000ff">from</span> django.contrib <span style="color: #0000ff">import</span><span style="color: #000000"> admin
</span><span style="color: #0000ff">from</span> app1 <span style="color: #0000ff">import</span><span style="color: #000000"> views

urlpatterns </span>=<span style="color: #000000"> [
    url(r</span><span style="color: #800000">'</span><span style="color: #800000">^admin/</span><span style="color: #800000">'</span>, admin.site.urls),   <span style="color: #008000">#</span><span style="color: #008000">系统生成的映射</span>
<span style="background-color: #ff99cc"><span style="color: #000000">
    url(r</span><span style="color: #800000">'</span><span style="color: #800000">^(articles/2003)/$</span><span style="color: #800000">'</span>, <span style="background-color: #ffff00">views.special_case_2003</span>)</span>,                         <span style="color: #008000">#</span><span style="color: #008000">表示articles/2003/这个路径映射views模块的special_case_2003函数</span>
    <span style="color: #008000">#</span><span style="color: #008000"> url(r'^articles/([0-9]{4})/$', views.year_archive),                        #表示2003可以是0-9的任意4个数字</span>
    <span style="color: #008000">#</span><span style="color: #008000"> url(r'^articles/([0-9]{4})/([0-9]{2})/$', views.month_archive),            #表示匹配二级目录</span>
    <span style="color: #008000">#</span><span style="color: #008000"> url(r'^articles/([0-9]{4})/([0-9]{2})/([0-9]+)/$', views.article_detail),  #表示匹配三级目录</span>
]</pre>
</div>
<p><span style="color: #0000ff"><strong>逻辑处理</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render,HttpResponse

</span><span style="color: #008000">#</span><span style="color: #008000"> Create your views here.</span>

<span style="color: #0000ff">def</span><span style="color: #000000"> special_case_2003(<span style="background-color: #ffff00">request</span>,name):
    </span><span style="color: #0000ff">return</span> <span style="background-color: #ff99cc">render(<span style="background-color: #ffff00">request</span>,<span style="color: #800000">'</span><span style="color: #800000; background-color: #ffff00">index.html</span><span style="color: #800000">'</span>)</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><strong>整个流程图</strong></strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170709110926837-1138776157.png" alt=""></strong></span></p>
<p>&nbsp;</p>
<p><strong>上面讲的，都是通过全局里的urls.py模块路由映射的，如果网站很大有很多个app应用，那么就需要路由分发，每一个app应用负责一个业务</strong></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong><strong>路由分发</strong></strong></span></p>
<p><span style="color: #ff0000"><strong><strong>过个全局里的<strong>urls.py模块，配置路由分发，将制定的路径分发到指定的app应用里的<strong><strong><strong>urls.py模块里路由映射</strong></strong></strong></strong></strong></strong></span></p>
<p><span style="color: #ff0000"><strong><strong><strong><strong><strong><strong>全局<strong><strong><strong>urls.py模块路由分发</strong></strong></strong></strong></strong></strong></strong></strong></strong></span></p>
<p><span style="color: #ff0000"><strong><strong><strong><strong><strong><strong><strong><strong><strong>首先要在全局<strong><strong><strong><strong><strong><strong><strong><strong><strong>urls.py模块引入</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></span></p>
<p><span style="color: #0000ff"><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>from django.conf.urls import include, url</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></span></p>
<p><span style="color: #ff0000"><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><span style="color: #0000ff">include('app1.urls')</span>函数，设置要分发的路由映射路径名称</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></span></p>
<p>&nbsp;</p>
<p><strong><strong><strong><strong><strong><strong><strong>全局<strong><strong><strong>urls.py模块路由分发</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.conf.urls <span style="color: #0000ff">import</span><span style="color: #000000"> include, url
urlpatterns </span>=<span style="color: #000000"> [
    <span style="background-color: #ff99cc">url(r</span></span><span style="background-color: #ff99cc"><span style="color: #800000">'</span><span style="color: #800000">^bug</span><span style="color: #800000">'</span>, include(<span style="color: #800000">'</span><span style="color: #800000">app1.urls</span><span style="color: #800000">'</span>))</span>,   <span style="color: #008000">#</span><span style="color: #008000">将访问路径以bug开头的路径分发到app1下的urls.py模块里进行路由映射</span>
<span style="color: #000000">
]</span></pre>
</div>
<p><strong>app1.py路由映射</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.conf.urls <span style="color: #0000ff">import</span><span style="color: #000000"> url
</span><span style="color: #0000ff">from</span> django.contrib <span style="color: #0000ff">import</span><span style="color: #000000"> admin
</span><span style="color: #0000ff">from</span> app1 <span style="color: #0000ff">import</span><span style="color: #000000"> views

urlpatterns </span>=<span style="color: #000000"> [
    <span style="background-color: #ff99cc">url(r</span></span><span style="background-color: #ff99cc"><span style="color: #800000">'</span><span style="color: #800000">articles/</span><span style="color: #800000">'</span>, views.special)</span>,  <span style="color: #008000">#</span><span style="color: #008000">表示接收全局的路由分发，做路由映射，映射到views下的special函数处理</span>
]</pre>
</div>
<p><strong>views.py逻辑处理</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render,HttpResponse

</span><span style="color: #008000">#</span><span style="color: #008000"> Create your views here.</span>

<span style="color: #0000ff">def</span><span style="color: #000000"><span style="background-color: #ff99cc"> special(request)</span>:
    </span><span style="color: #0000ff">return</span> <span style="background-color: #ff99cc">render(request,<span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>)</span>   <span style="color: #008000">#</span><span style="color: #008000">向用户显示一个html页面</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170709143352384-941891911.png" alt=""></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>路由映射第三个参数，额外传参，字典方式，逻辑处理函数以参数方式接收字典键</strong></span></p>
<p><strong>路由映射</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.conf.urls <span style="color: #0000ff">import</span><span style="color: #000000"> url
</span><span style="color: #0000ff">from</span> django.contrib <span style="color: #0000ff">import</span><span style="color: #000000"> admin
</span><span style="color: #0000ff">from</span> app1 <span style="color: #0000ff">import</span><span style="color: #000000"> views

urlpatterns </span>=<span style="color: #000000"> [
    url(r</span><span style="color: #800000">'</span><span style="color: #800000">articles/</span><span style="color: #800000">'</span>, views.special,<span style="background-color: #ff99cc">{<span style="color: #800000">'</span><span style="color: #800000">anme</span><span style="color: #800000">'</span>:1234}</span>)     <span style="color: #008000">#</span><span style="color: #008000">路由映射第三个参数，额外传参，字典方式，逻辑处理函数以参数方式接收字典键</span>
]</pre>
</div>
<p><strong>逻辑处理</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.shortcuts <span style="color: #0000ff">import</span><span style="color: #000000"> render,HttpResponse

</span><span style="color: #008000">#</span><span style="color: #008000"> Create your views here.</span>

<span style="color: #0000ff">def</span><span style="color: #000000"> special(request,<span style="background-color: #ff99cc">anme</span>):
    </span><span style="color: #0000ff">print</span>(<span style="background-color: #ff99cc">anme</span>)                           <span style="color: #008000">#</span><span style="color: #008000">接收路由映射的额外传参字典的键</span>
    <span style="color: #0000ff">return</span> render(request,<span style="color: #800000">'</span><span style="color: #800000">index.html</span><span style="color: #800000">'</span>)   <span style="color: #008000">#</span><span style="color: #008000">向用户显示一个html页面</span></pre>
</div>
<p><strong>注意：如果额外参数，如果写在全局的路由分发里，那么这个路由分发下的所有路由映射函数都可以获取到</strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><strong>路由映射第四个参数，给路由映射的路径取一个别名，这个别名代指的就是路由映射路径，</strong></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">from</span> django.conf.urls <span style="color: #0000ff">import</span><span style="color: #000000"> url
</span><span style="color: #0000ff">from</span> django.contrib <span style="color: #0000ff">import</span><span style="color: #000000"> admin
</span><span style="color: #0000ff">from</span> app1 <span style="color: #0000ff">import</span><span style="color: #000000"> views

urlpatterns </span>=<span style="color: #000000"> [
    url(r</span><span style="background-color: #ff99cc"><span style="color: #800000">'</span><span style="color: #800000">articles/</span><span style="color: #800000">'</span></span>, views.special,{<span style="color: #800000">'</span><span style="color: #800000">anme</span><span style="color: #800000">'</span>:1234},<span style="background-color: #ff99cc">name=<span style="color: #800000">'</span><span style="color: #800000">luj</span><span style="color: #800000">'</span></span>)     <span style="color: #008000">#</span><span style="color: #008000">路由映射第三个参数，额外传参，字典方式，逻辑处理函数以参数方式接收字典键</span>
]</pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>最终url控制器流程图</strong></span></p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201707/955761-20170709153344634-65438795.png" alt=""></strong></span></p>
<p>&nbsp;</p></div>