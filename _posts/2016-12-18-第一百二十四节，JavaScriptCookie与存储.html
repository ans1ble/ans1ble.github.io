第一百二十四节，JavaScriptCookie与存储


			<div id="cnblogs_post_body" class="blogpost-body"><p><span style="font-size: 18pt; color: #0000ff"><strong>JavaScriptCookie与存储</strong></span></p>
<p>&nbsp;</p>
<p align="left"><strong>学习要点：</strong></p>
<p align="left"><strong>1.cookie</strong></p>
<p align="left"><strong>2.cookie局限性</strong></p>
<p align="left"><strong>3.其他存储</strong></p>
<p align="left">&nbsp;</p>
<p align="left"><strong>随着Web越来越复杂，开发者急切的需要能够本地化存储的脚本功能。这个时候，第一个出现的方案：cookie诞生了。cookie的意图是：在本地的客户端的磁盘上以很小的文件形式保存数据。</strong></p>
<p>&nbsp;</p>
<p align="left"><span style="color: #ff0000; background-color: #ffff00"><strong>一．</strong><strong>Cookie</strong></span></p>
<p align="left"><strong>cookie也叫HTTP Cookie，最初是客户端与服务器端进行会话使用的。比如，会员登录，下次回访网站时无须登录了；或者是购物车，购买的商品没有及时付款，过两天发现购物车里还有之前的商品列表。</strong></p>
<p align="left"><strong>HTTP Cookie要求服务器对任意HTTP请求发送Set-Cookie，因此，Cookie的处理原则上需要在服务器环境下进行。当然，现在大部分浏览器在客户端也能实现Cookie的生成和获取。(目前Chrome不可以在客户端操作，其他浏览器均可)</strong></p>
<p align="left">&nbsp;</p>
<p align="left"><span style="color: #ff0000"><strong>cookie的组成</strong></span></p>
<p align="left"><strong>cookie由名/值对形式的文本组成：name=value。完整格式为：</strong></p>
<p align="left"><strong>name=value; [expires=date]; [path=path]; [domain=somewhere.com]; [secure]</strong></p>
<p align="left"><strong>中括号是可选，name=value是必选。</strong></p>
<p align="left">&nbsp;</p>
<p align="left"><span style="color: #ff0000"><strong>向磁盘写入<strong>cookie</strong></strong></span></p>
<p align="left"><span style="color: #000000"><strong><strong>使用方式：</strong></strong></span></p>
<p align="left"><span style="color: #000000"><strong><strong>document.cookie = 名称</strong></strong></span></p>
<p align="left"><span style="color: #000000"><strong><strong><strong><strong>document.cookie = 名称 = 值</strong></strong></strong></strong></span></p>
<p align="left"><span style="color: #ff00ff"><strong><strong><strong><strong><strong>完整形式：document.cookie = 'user=值;expires=失效时间;path=访问路径;domain=访问域名;secure=安全的https限制通讯';</strong></strong></strong></strong></strong></span></p>
<p align="left"><span style="color: #ff00ff"><strong><strong><strong><strong>如果名称或者值有中文需要编码和解码</strong></strong></strong></strong></span></p>
<div class="cnblogs_code">
<pre>document.cookie = 'user=' + encodeURIComponent('李炎恢');    <span style="color: #008000">//</span><span style="color: #008000">编码方式向磁盘写入cookie</span>
alert(decodeURIComponent(document.cookie));                <span style="color: #008000">//</span><span style="color: #008000">解码方式读取写入的cookie</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>读取写入的cookie</strong></span></p>
<p align="left"><strong>使用方式：</strong></p>
<p align="left"><strong>document.cookie</strong></p>
<p align="left"><strong>如果写入有编码，读取就需要解码</strong></p>
<div class="cnblogs_code">
<pre>document.cookie = 'user=' + encodeURIComponent('李炎恢');    <span style="color: #008000">//</span><span style="color: #008000">编码方式向磁盘写入cookie</span>
alert(decodeURIComponent(document.cookie));                <span style="color: #008000">//</span><span style="color: #008000">解码方式读取写入的cookie</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><strong>expires=</strong>cookie有效时间</strong></span></p>
<p><span style="color: #000000"><strong>每个浏览器都各自保存了<strong>cookie文件，设置有效时间，就是告诉浏览器这个<strong>cookie保存多久，</strong></strong></strong></span></p>
<p align="left"><strong>失效时间，如果没有声明，则为浏览器关闭后即失效。声明了失效时间，那么时间到期后方能失效。</strong></p>
<p align="left"><span style="color: #ff0000"><strong>设置失效时间</strong></span></p>
<p align="left"><span style="color: #ff00ff"><strong>expires=失效时间（单位Mon Dec 26 2016 15:07:40 GMT+0800）</strong></span></p>
<p align="left">&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> date = <span style="color: #0000ff">new</span> Date();                        <span style="color: #008000">//</span><span style="color: #008000">创建日期对象</span><span style="color: #008000">
//</span><span style="color: #008000">getDate获取系统当前日期</span><span style="color: #008000">
//</span><span style="color: #008000">setDate将日期转换成毫秒数</span>
date.setDate(date.getDate() + 7<span style="color: #000000">);
</span><span style="color: #008000">//</span><span style="color: #008000">alert(date); 返回Mon Dec 26 2016 15:07:40 GMT+0800</span><span style="color: #008000">
//</span><span style="color: #008000">向磁盘写入一个cookie文件，名称为user，值为林贵秀编码，有效时间expires=有效日期</span>
document.cookie = "user= " + encodeURIComponent('林贵秀') +";expires=" + date;</pre>
</div>
<p align="left">&nbsp;</p>
<p align="left"><span style="color: #0000ff"><strong>PS：可以通过Firefox浏览器查看和验证失效时间。如果要提前删除cookie也非常简单，只要重新创建cookie把时间设置当前时间之前即可：date.getDate() - 1或new Date(0)。</strong></span></p>
<p align="left">&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><strong><strong><strong><strong>path=<strong>cookie</strong>访问路径</strong></strong></strong></strong></strong></span></p>
<p><span style="color: #000000"><strong><strong><strong><strong><strong>访问路径，当设置了路径，那么只有设置的那个路径文件才可以访问cookie。</strong></strong></strong></strong></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> date = <span style="color: #0000ff">new</span> Date();                        <span style="color: #008000">//</span><span style="color: #008000">创建日期对象</span><span style="color: #008000">
//</span><span style="color: #008000">getDate获取系统当前日期</span><span style="color: #008000">
//</span><span style="color: #008000">setDate将日期转换成毫秒数</span>
date.setDate(date.getDate() + 7<span style="color: #000000">);
</span><span style="color: #008000">//</span><span style="color: #008000">alert(date); 返回Mon Dec 26 2016 15:07:40 GMT+0800</span>
<span style="color: #0000ff">var</span> path = '/js/'; <span style="color: #008000">//</span><span style="color: #008000">表示当前工程目录下的js文件夹下</span><span style="color: #008000">
//</span><span style="color: #008000">向磁盘写入一个cookie文件，名称为user，值为林贵秀编码，有效时间expires=有效日期</span>
document.cookie = "user= " + encodeURIComponent('林贵秀') +";expires=" + date + ";path=" + path;</pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>domain=cookie访问域名</strong></span></p>
<p><span style="color: #000000"><strong>访问域名，用于限制只有设置的域名才可以访问，那么没有设置，会默认限制为创建cookie的域名</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> date = <span style="color: #0000ff">new</span> Date();                        <span style="color: #008000">//</span><span style="color: #008000">创建日期对象</span><span style="color: #008000">
//</span><span style="color: #008000">getDate获取系统当前日期</span><span style="color: #008000">
//</span><span style="color: #008000">setDate将日期转换成毫秒数</span>
date.setDate(date.getDate() + 7<span style="color: #000000">);
</span><span style="color: #008000">//</span><span style="color: #008000">alert(date); 返回Mon Dec 26 2016 15:07:40 GMT+0800</span>
<span style="color: #0000ff">var</span> path = '/js/'; <span style="color: #008000">//</span><span style="color: #008000">表示当前工程目录下的js文件夹下</span>
<span style="color: #0000ff">var</span> domain = 'localhost'; <span style="color: #008000">//</span><span style="color: #008000">设置访问域名</span><span style="color: #008000">
//</span><span style="color: #008000">向磁盘写入一个cookie文件，名称为user，值为林贵秀编码，有效时间expires=有效日期</span>
document.cookie = "user= " + encodeURIComponent('林贵秀') +";expires=" + date + ";path=" + path + ";domain=" + domain;</pre>
</div>
<p align="left"><strong>PS：如果定义了60.com，那么在这个域名下的任何网页都可访问，如果定义了v.60.com，那么只能在这个二级域名访问该cookie，而主域名和其他子域名则不能访问。</strong></p>
<p align="left"><strong>PS：设置域名，必须在当前域名绑定的服务器上设置，如果在60.com服务器上随意设置其他域名，则会无法创建cookie。</strong></p>
<p align="left">&nbsp;</p>
<p align="left"><span style="color: #ff0000"><strong><strong><strong><strong><strong><strong>secure<strong><strong><strong><strong><strong>安全的https限制通讯</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></span></p>
<p align="left"><span style="color: #000000"><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>安全设置，指明必须通过安全的通信通道来传输(HTTPS)才能获取cookie。仅限加密连接</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> date = <span style="color: #0000ff">new</span> Date();                        <span style="color: #008000">//</span><span style="color: #008000">创建日期对象</span><span style="color: #008000">
//</span><span style="color: #008000">getDate获取系统当前日期</span><span style="color: #008000">
//</span><span style="color: #008000">setDate将日期转换成毫秒数</span>
date.setDate(date.getDate() + 7<span style="color: #000000">);
</span><span style="color: #008000">//</span><span style="color: #008000">alert(date); 返回Mon Dec 26 2016 15:07:40 GMT+0800</span>
<span style="color: #0000ff">var</span> path = '/js/'; <span style="color: #008000">//</span><span style="color: #008000">表示当前工程目录下的js文件夹下</span>
<span style="color: #0000ff">var</span> domain = 'localhost'; <span style="color: #008000">//</span><span style="color: #008000">设置访问域名</span><span style="color: #008000">
//</span><span style="color: #008000">向磁盘写入一个cookie文件，名称为user，值为林贵秀编码，有效时间expires=有效日期</span>
document.cookie = "user= " + encodeURIComponent('林贵秀') +";expires=" + date + ";path=" + path + ";domain=" + domain + ";secure";</pre>
</div>
<p align="left"><strong>PS：https安全通信链接需要单独配置。</strong></p>
<p align="left">&nbsp;</p>
<p align="left"><span style="color: #ff0000"><strong>JavaScript设置、读取和删除并不是特别的直观方便，我们可以封装成函数来方便调用。</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">创建cookie</span>
setCookie('usr1', '林闺秀1', 1<span style="color: #000000">);
setCookie(</span>'usr2', '林闺秀2', 2<span style="color: #000000">);
setCookie(</span>'usr3', '林闺秀3', 3<span style="color: #000000">);

</span><span style="color: #008000">//</span><span style="color: #008000">创建cookie，创建cookie函数</span><span style="color: #008000">
//</span><span style="color: #008000">setCookie函数接收cookie，名称，值，失效日期(天数)，[访问路径，访问域名，安全通讯https限制]</span>
<span style="color: #0000ff">function</span><span style="color: #000000"> setCookie(name, value, expires, path, domain, secure) {
    </span><span style="color: #008000">//</span><span style="color: #008000">将接收到的名称和值编码后，格式化成键值对</span>
    <span style="color: #0000ff">var</span> cookieText = encodeURIComponent(name) + '=' +<span style="color: #000000"> encodeURIComponent(value);
    </span><span style="color: #0000ff">if</span> (<span style="color: #0000ff">typeof</span> expires == "number" &amp;&amp; expires &gt; 0) {  <span style="color: #008000">//</span><span style="color: #008000">判断接收到的失效日期，是否是数值类型并且大于0</span>
        <span style="color: #0000ff">var</span> date = <span style="color: #0000ff">new</span> Date();         <span style="color: #008000">//</span><span style="color: #008000">创建日期对象</span>
        date.setDate(date.getDate() + expires);  <span style="color: #008000">//</span><span style="color: #008000">获取系统当前时间，加上接收到的失效时间等于总失效日期</span>
        cookieText += '; expires=' + date;  <span style="color: #008000">//</span><span style="color: #008000">将失效日期累加到cookieText</span>
<span style="color: #000000">    }
    </span><span style="color: #0000ff">if</span> (path) {   <span style="color: #008000">//</span><span style="color: #008000">判断访问路径是否存在</span>
        cookieText += '; expires=' + path;  <span style="color: #008000">//</span><span style="color: #008000">如果访问路径存在，将访问路径累加到cookieText</span>
<span style="color: #000000">    }
    </span><span style="color: #0000ff">if</span> (domain) {  <span style="color: #008000">//</span><span style="color: #008000">判断访问域名是否存在</span>
        cookieText += '; domain=' + domain;  <span style="color: #008000">//</span><span style="color: #008000">如果访问域名存在，将访问域名累加到cookieText</span>
<span style="color: #000000">    }
    </span><span style="color: #0000ff">if</span> (secure) {  <span style="color: #008000">//</span><span style="color: #008000">判断https通讯限制是否存在</span>
        cookieText += '; secure';  <span style="color: #008000">//</span><span style="color: #008000">如果https通讯限制存在，将https通讯限制累加到cookieText</span>
<span style="color: #000000">    }
    document.cookie </span>= cookieText;  <span style="color: #008000">//</span><span style="color: #008000">向磁盘写入cookie文件</span>
<span style="color: #000000">}

</span><span style="color: #008000">//</span><span style="color: #008000">获取cookie</span>
alert(getCookie('usr1'<span style="color: #000000">));
alert(getCookie(</span>'usr2'<span style="color: #000000">));
alert(getCookie(</span>'usr3'<span style="color: #000000">));

</span><span style="color: #008000">//</span><span style="color: #008000">获取cookie，获取cookie函数，获取cookie名称的值</span>
<span style="color: #0000ff">function</span> getCookie(name) {  <span style="color: #008000">//</span><span style="color: #008000">接收要获取的cookie名称，</span>
    <span style="color: #008000">//</span><span style="color: #008000">将接收到的cookie名称进行编码后，格式化赋值给cookieName</span>
    <span style="color: #0000ff">var</span> cookieName = encodeURIComponent(name) + '='<span style="color: #000000">;
    </span><span style="color: #008000">//</span><span style="color: #008000">用编码和格式化后的cookie名称，在document.cookie里查找它的索引位置</span>
    <span style="color: #0000ff">var</span> cookieStart =<span style="color: #000000"> document.cookie.indexOf(cookieName);
    </span><span style="color: #008000">//</span><span style="color: #008000">默认cookie值为空</span>
    <span style="color: #0000ff">var</span> cookieValue = <span style="color: #0000ff">null</span><span style="color: #000000">;

    </span><span style="color: #0000ff">if</span> (cookieStart &gt; -1) {   <span style="color: #008000">//</span><span style="color: #008000">判断如果查找cookie名称的索引大于负一</span>
        <span style="color: #008000">//</span><span style="color: #008000">从cookie名称开始搜索;的位置</span>
        <span style="color: #0000ff">var</span> cookieEnd = document.cookie.indexOf(';'<span style="color: #000000">, cookieStart);
        </span><span style="color: #0000ff">if</span> (cookieEnd == -1) { <span style="color: #008000">//</span><span style="color: #008000">判断如果从cookie名称开始搜索;的位置等于负一</span>
            cookieEnd = document.cookie.length; <span style="color: #008000">//</span><span style="color: #008000">cookieEnd重新赋值等于document.cookie的长度</span>
<span style="color: #000000">        }
        </span><span style="color: #008000">//</span><span style="color: #008000">截取字符串，cookie名称位置加上cookie名称长度等于截取开始位置，从cookie名称开始搜索;引号的位置为结束位置</span>
        <span style="color: #008000">//</span><span style="color: #008000">将截取的字符串解码</span>
        cookieValue = decodeURIComponent(document.cookie.substring(cookieStart +<span style="color: #000000"> cookieName.length, cookieEnd));
    }
    </span><span style="color: #0000ff">return</span> cookieValue;  <span style="color: #008000">//</span><span style="color: #008000">返回解码后的cookie名称值</span>
<span style="color: #000000">}

</span><span style="color: #008000">//</span><span style="color: #008000">删除cookie</span>
unsetCookie('usr1'<span style="color: #000000">);

</span><span style="color: #008000">//</span><span style="color: #008000">删除cookie，删除cookie函数</span>
<span style="color: #0000ff">function</span> unsetCookie(name) {  <span style="color: #008000">//</span><span style="color: #008000">接收要删除cookie名称</span>
    <span style="color: #008000">//</span><span style="color: #008000">重新创建此cookie，cookie名称等于空，过期时间设置成过去，这样cookie就失效了</span>
    document.cookie = name + "= ; expires=" + <span style="color: #0000ff">new</span> Date(0<span style="color: #000000">);
}</span></pre>
</div>
<p align="left">&nbsp;</p>
<p align="left"><span style="color: #ff0000"><strong>二．cookie</strong><strong>局限性</strong></span></p>
<p align="left"><strong>cookie虽然在持久保存客户端用户数据提供了方便，分担了服务器存储的负担。但是还有很多局限性的。</strong></p>
<p align="left"><strong><span style="color: #ff00ff">第一：</span>每个特定的域名下最多生成20个cookie（根据不同的浏览器有所区别）。</strong></p>
<p align="left"><strong>1.IE6或更低版本最多20个cookie</strong></p>
<p align="left"><strong>2.IE7和之后的版本最多可以50个cookie。IE7最初也只能20个，之后因被升级不定后增加了。</strong></p>
<p align="left"><strong>3.Firefox最多50个cookie</strong></p>
<p align="left"><strong>4.Opera最多30个cookie</strong></p>
<p align="left"><strong>5.Safari和Chrome没有做硬性限制。</strong></p>
<p align="left"><strong>&nbsp;</strong></p>
<p align="left"><strong>PS：为了更好的兼容性，所以按照最低的要求来，也就是<span style="color: #ff00ff">最多不得超过20个cookie</span>。当超过指定的 cookie时，浏览器会清理掉早期的cookie。IE和Opera会清理近期最少使用的cookie，Firefox会随机清理cookie。</strong></p>
<p align="left"><strong>&nbsp;</strong></p>
<p align="left"><strong><span style="color: #ff00ff">第二：</span>cookie的最大大约为4096字节(4k)，为了更好的兼容性，<span style="color: #ff00ff">一般不能超过4095字节</span>即可。</strong></p>
<p align="left"><strong>&nbsp;</strong></p>
<p align="left"><strong><span style="color: #ff00ff">第三：</span>cookie存储在客户端的文本文件，所以特别重要和<span style="color: #ff00ff">敏感的数据是不建议保存在cookie的</span>。比如银行卡号，用户密码等。</strong></p>
<p>&nbsp;</p>
<p align="left">&nbsp;</p>
<p align="left"><span style="color: #ff0000"><strong>三．</strong><strong>其他存储</strong></span></p>
<p align="left"><span style="color: #ff0000"><strong><strong>userData储存<strong>IE提供的一种存储其实属于css，非IE不支持，【及不推荐使用】IE10以上也不支持，为了将移除</strong></strong></strong></span></p>
<p align="left"><strong>IE提供了一种存储可以持久化用户数据，叫做userData，从IE5.0就开始支持。每个数据最多128K，每个域名下最多1M。这个持久化数据存放在缓存中，如果缓存没有清理，那么会一直存在。</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">首先要在html页面写上cssstyle="behavior:url(#default#userData)"</span><span style="color: #008000">
//</span><span style="color: #008000">&lt;div style="behavior:url(#default#userData)" id="box"&gt;&lt;/div&gt;</span>
<span style="color: #000000">
addEvent(window, </span>'load', <span style="color: #0000ff">function</span> () {    <span style="color: #008000">//</span><span style="color: #008000">创建事件，等待页面加载完毕后激发函数</span>
    <span style="color: #008000">//</span><span style="color: #008000">通过id获取到标签元素，</span>
    <span style="color: #0000ff">var</span> box = document.getElementById('box'<span style="color: #000000">);
    </span><span style="color: #008000">//</span><span style="color: #008000">给元素添加一个属性名称和值，如果属性名称和值有中文需要编码</span>
    box.setAttribute('name', encodeURIComponent('林贵秀'<span style="color: #000000">));
    </span><span style="color: #008000">//</span><span style="color: #008000">保存文件，里面写名称，相当于cookie名称</span>
    box.save('bookinfo'<span style="color: #000000">);

    </span><span style="color: #008000">//</span><span style="color: #008000">box.removeAttribute('name');            //删除userDate</span>
    <span style="color: #008000">//</span><span style="color: #008000">box.save('bookinfo');</span>
<span style="color: #000000">
    box.load(</span>'bookinfo'); <span style="color: #008000">//</span><span style="color: #008000">相当于加载cookie名称，里面接收名称</span>
    <span style="color: #008000">//</span><span style="color: #008000">解码打印出元素的属性值</span>
    alert(decodeURIComponent(box.getAttribute('name'<span style="color: #000000">)));
});

</span><span style="color: #008000">//</span><span style="color: #008000">跨浏览器添加事件，添加事件兼容</span>
<span style="color: #0000ff">function</span> addEvent(obj, type, fn) {     <span style="color: #008000">//</span><span style="color: #008000">添加事件函数，接收3个参数，1事件对象，2事件名称，3事件函数</span>
    <span style="color: #008000">//</span><span style="color: #008000">判断浏览器如果支持w3c</span>
    <span style="color: #0000ff">if</span><span style="color: #000000"> (obj.addEventListener) {
        </span><span style="color: #008000">//</span><span style="color: #008000">就用w3c的addEventListener方法添加对象，将事件名称和事件函数传入添加事件</span>
        obj.addEventListener(type, fn, <span style="color: #0000ff">false</span><span style="color: #000000">);
    } </span><span style="color: #0000ff">else</span> <span style="color: #0000ff">if</span> (obj.attachEvent) {   <span style="color: #008000">//</span><span style="color: #008000">判断如果浏览器是IE9以下，就用IE的方法attachEvent添加事件</span>
        <span style="color: #008000">//</span><span style="color: #008000">将事件名称和事件函数传入创建对象</span>
        obj.attachEvent('on' +<span style="color: #000000"> type, fn);
    }
}</span></pre>
</div>
<p>&nbsp;</p>
<p align="left"><span style="color: #ff0000"><strong>Web存储</strong></span></p>
<p align="left"><strong>在比较高版本的浏览器，JavaScript提供了sessionStorage和globalStorage。在HTML5中提供了localStorage来取代globalStorage。而浏览器最低版本为：IE8+、Firefox3.5+、Chrome 4+和Opera10.5+。</strong></p>
<p align="left"><strong>PS：由于这三个对浏览器版本要求较高，我们就只简单的在Firefox了解一下，有兴趣的可以通过关键字搜索查询。</strong></p>
<p align="left"><span style="color: #ff0000"><strong>sessionStorage数据<strong>Web存储</strong></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">通过方法存储和获取</span>
sessionStorage.setItem('name', '李炎恢');  <span style="color: #008000">//</span><span style="color: #008000">存储数据</span>
alert(sessionStorage.getItem('name')); <span style="color: #008000">//</span><span style="color: #008000">获取存储数据</span>

<span style="color: #008000">//</span><span style="color: #008000">通过属性存储和获取</span>
sessionStorage.book = '李炎恢';  <span style="color: #008000">//</span><span style="color: #008000">存储数据</span>
alert(sessionStorage.book);  <span style="color: #008000">//</span><span style="color: #008000">获取存储数据</span>

<span style="color: #008000">//</span><span style="color: #008000">删除存储</span>
sessionStorage.removeItem('name');</pre>
</div>
<p>&nbsp;</p>
<p><strong>由于localStorage代替了globalStorage，所以在Firefox、Opera和Chrome目前的最新版本已不支持。</strong></p>
<p><span style="color: #ff0000"><strong><strong>localStorage<strong>数据<strong>Web存储</strong></strong></strong></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">通过方法存储和获取</span>
localStorage.setItem('name', '李炎恢');  <span style="color: #008000">//</span><span style="color: #008000">储存数据</span>
alert(localStorage.getItem('name'));  <span style="color: #008000">//</span><span style="color: #008000">读取储存数据</span>
　　
<span style="color: #008000">//</span><span style="color: #008000">通过属性存储和获取</span>
localStorage.book = '李炎恢';  <span style="color: #008000">//</span><span style="color: #008000">储存数据</span>
alert(localStorage.book);   <span style="color: #008000">//</span><span style="color: #008000">读取储存数据</span>
　　
<span style="color: #008000">//</span><span style="color: #008000">删除存储</span>
localStorage.removeItem('name');</pre>
</div>
<p align="left"><strong>PS：这三个对象都是永久保存的，保存在缓存里，只有手工删除或者清理浏览器缓存方可失效。在容量上也有一些限制，主要看浏览器的差异，Firefox3+、IE8+、Opera为5M，，Chrome和Safari为2.5M。</strong></p></div>