第二十三节，不同数据类型在内存中的存址方式，及深浅拷贝


			<div id="cnblogs_post_body" class="blogpost-body"><p><span style="font-size: 15px;"><strong>不同数据类型在内存中的存址方式</strong></span></p>
<p><strong>字符串str</strong>，一次性创建，不能被修改，只要有修改字符串，就是在重新创建新的字符串<br />Python底层是c语言写的，c语言没有字符串的说法，字符串是字符数组，所以在内存址是字符数组的方式</p>
<p><img src="https://images2015.cnblogs.com/blog/955761/201607/955761-20160706170844483-1621259156.png" alt="" /></p>
<p>&nbsp;</p>
<p><strong>列表list</strong></p>
<p><img src="https://images2015.cnblogs.com/blog/955761/201607/955761-20160707141744921-136322862.png" alt="" /></p>
<p>&nbsp;</p>
<p><strong>copy.copy()浅拷贝：只拷贝第一层，下面的指向的原始地址</strong></p>
<p><strong>copy.deepcopy（）深拷贝：除底层的字符串或数字外，其他的上层都拷贝，底层的字符串或数字还是指向的原始地址</strong></p>
<p><strong>注意：在使用拷贝时，必须先引入拷贝模块&nbsp;<span style="font-size: 18px;"><code class="python keyword">import</code>&nbsp;<code class="python plain">copy</code></span></strong></p>
<p>&nbsp;</p>
<p><strong>一、数字和字符串</strong></p>
<p>对于 数字 和 字符串 而言，赋值、浅拷贝和深拷贝无意义，因为其永远指向同一个内存地址。</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">import</span><span style="color: #000000;"> copy
</span><span style="color: #008000;">#</span><span style="color: #008000;"> ######### 数字、字符串 #########</span>
n1 = 123
<span style="color: #008000;">#</span><span style="color: #008000;"> n1 = "i am alex age 10"</span>
<span style="color: #0000ff;">print</span><span style="color: #000000;">(id(n1))
</span><span style="color: #008000;">#</span><span style="color: #008000;"> ## 赋值 ##</span>
n2 =<span style="color: #000000;"> n1
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(id(n2))
</span><span style="color: #008000;">#</span><span style="color: #008000;"> ## 浅拷贝 ##</span>
n2 =<span style="color: #000000;"> copy.copy(n1)
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(id(n2))
  
</span><span style="color: #008000;">#</span><span style="color: #008000;"> ## 深拷贝 ##</span>
n3 =<span style="color: #000000;"> copy.deepcopy(n1)
</span><span style="color: #0000ff;">print</span>(id(n3))</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201607/955761-20160707141822514-1813047048.png" alt="" /></p>
<p>&nbsp;</p>
<p><strong>二、其他基本数据类型</strong></p>
<p>对于字典、元祖、列表 而言，进行赋值、浅拷贝和深拷贝时，其内存地址的变化是不同的。</p>
<p>1、赋值</p>
<p><strong>赋值</strong>，只是创建一个变量，该变量指向原来内存地址，如：</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1</span> <span style="color: #008000;">#</span><span style="color: #008000;">!/usr/bin/env python</span>
<span style="color: #008080;">2</span> <span style="color: #008000;">#</span><span style="color: #008000;"> -*- coding:utf-8 -*-</span>
<span style="color: #008080;">3</span> n1 = {<span style="color: #800000;">"</span><span style="color: #800000;">k1</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">wu</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">k2</span><span style="color: #800000;">"</span>: 123, <span style="color: #800000;">"</span><span style="color: #800000;">k3</span><span style="color: #800000;">"</span>: [<span style="color: #800000;">"</span><span style="color: #800000;">alex</span><span style="color: #800000;">"</span>, 456<span style="color: #000000;">]} 
</span><span style="color: #008080;">4</span> n2 = n1</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201607/955761-20160707143034092-2090968626.png" alt="" /></p>
<p>&nbsp;</p>
<p>2、浅拷贝</p>
<p><strong>浅拷贝</strong>，在内存中只额外创建第一层数据</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1</span> <span style="color: #008000;">#</span><span style="color: #008000;">!/usr/bin/env python</span>
<span style="color: #008080;">2</span> <span style="color: #008000;">#</span><span style="color: #008000;"> -*- coding:utf-8 -*-</span>
<span style="color: #008080;">3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> copy
</span><span style="color: #008080;">4</span> n1 = {<span style="color: #800000;">"</span><span style="color: #800000;">k1</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">wu</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">k2</span><span style="color: #800000;">"</span>: 123, <span style="color: #800000;">"</span><span style="color: #800000;">k3</span><span style="color: #800000;">"</span>: [<span style="color: #800000;">"</span><span style="color: #800000;">alex</span><span style="color: #800000;">"</span>, 456<span style="color: #000000;">]}
</span><span style="color: #008080;">5</span> n3 = copy.copy(n1)</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201607/955761-20160707143230217-1305022453.png" alt="" /></p>
<p>&nbsp;</p>
<p>3、深拷贝</p>
<p><strong>深拷贝</strong>，在内存中将所有的数据重新创建一份（排除最后一层，即：python内部对字符串和数字的优化）</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1</span> <span style="color: #008000;">#</span><span style="color: #008000;">!/usr/bin/env python</span>
<span style="color: #008080;">2</span> <span style="color: #008000;">#</span><span style="color: #008000;"> -*- coding:utf-8 -*-</span>
<span style="color: #008080;">3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> copy  
</span><span style="color: #008080;">4</span> n1 = {<span style="color: #800000;">"</span><span style="color: #800000;">k1</span><span style="color: #800000;">"</span>: <span style="color: #800000;">"</span><span style="color: #800000;">wu</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">k2</span><span style="color: #800000;">"</span>: 123, <span style="color: #800000;">"</span><span style="color: #800000;">k3</span><span style="color: #800000;">"</span>: [<span style="color: #800000;">"</span><span style="color: #800000;">alex</span><span style="color: #800000;">"</span>, 456<span style="color: #000000;">]}
</span><span style="color: #008080;">5</span> n4 = copy.deepcopy(n1)</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201607/955761-20160707143406967-1855456279.png" alt="" /></p>
<p>&nbsp;</p></div>