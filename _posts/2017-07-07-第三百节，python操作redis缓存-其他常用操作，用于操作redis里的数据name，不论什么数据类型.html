第三百节，python操作redis缓存-其他常用操作，用于操作redis里的数据name，不论什么数据类型


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>python操作redis缓存-其他常用操作，用于操作redis里的数据name，不论什么数据类型</strong></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">delete(*names)</span>根据删除redis中的任意数据类型</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.zadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">a1</span><span style="color: #800000">'</span>,1, <span style="color: #800000">'</span><span style="color: #800000">b2</span><span style="color: #800000">'</span>,2, <span style="color: #800000">'</span><span style="color: #800000">c1</span><span style="color: #800000">'</span>,3, <span style="color: #800000">'</span><span style="color: #800000">n4</span><span style="color: #800000">'</span>,4, <span style="color: #800000">'</span><span style="color: #800000">n5</span><span style="color: #800000">'</span>,51)           <span style="color: #008000">#</span><span style="color: #008000">zadd(name, *args, **kwargs)在name对应的有序集合中添加元素</span>
r.<span style="background-color: #ff99cc">delete(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>)</span>                                                 <span style="color: #008000">#</span><span style="color: #008000">delete(*names)根据删除redis中的任意数据类型</span>
<span style="color: #000000">


n </span>= r.zrange(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,0, 5, desc=False, withscores=True, score_cast_func=str)  <span style="color: #008000">#</span><span style="color: #008000">按照索引范围获取name对应的有序集合的元素</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)
</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000"> []</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">exists(name)</span>检测redis的name是否存在</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.zadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">a1</span><span style="color: #800000">'</span>,1, <span style="color: #800000">'</span><span style="color: #800000">b2</span><span style="color: #800000">'</span>,2, <span style="color: #800000">'</span><span style="color: #800000">c1</span><span style="color: #800000">'</span>,3, <span style="color: #800000">'</span><span style="color: #800000">n4</span><span style="color: #800000">'</span>,4, <span style="color: #800000">'</span><span style="color: #800000">n5</span><span style="color: #800000">'</span>,51)           <span style="color: #008000">#</span><span style="color: #008000">zadd(name, *args, **kwargs)在name对应的有序集合中添加元素</span>
<span style="color: #0000ff">print</span>(r.<span style="background-color: #ff99cc">exists(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>)</span> )                                                <span style="color: #008000">#</span><span style="color: #008000">exists(name)检测redis的name是否存在</span>
<span style="color: #000000">


n </span>= r.zrange(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,0, 5, desc=False, withscores=True, score_cast_func=str)  <span style="color: #008000">#</span><span style="color: #008000">按照索引范围获取name对应的有序集合的元素</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)
</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000"> True</span><span style="color: #008000">
#</span><span style="color: #008000"> [(b'a1', "b'1'"), (b'b2', "b'2'"), (b'c1', "b'3'"), (b'n4', "b'4'"), (b'n5', "b'51'")]</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">keys(pattern='*')</span>根据模型获取redis的name</strong></span><br><strong>更多：</strong><br><strong>    　　KEYS <span style="color: #ff0000">*</span> 匹配数据库中所有 key 。</strong><br><strong>    　　KEYS h<span style="color: #ff0000">?</span>llo 匹配 hello ， hallo 和 hxllo 等。？匹配一个任意字符</strong><br><strong>    　　KEYS h<span style="background-color: #ffffff; color: #ff0000">*</span>llo 匹配 hllo 和 heeeeello 等。*匹配多个任意字符</strong><br><strong>    　　KEYS h<span style="color: #ff0000">[ae]</span>llo 匹配 hello 和 hallo ，但不匹配 hillo，[]或者，匹配括号里的任意一个字符</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.zadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">a1</span><span style="color: #800000">'</span>,1, <span style="color: #800000">'</span><span style="color: #800000">b2</span><span style="color: #800000">'</span>,2, <span style="color: #800000">'</span><span style="color: #800000">c1</span><span style="color: #800000">'</span>,3, <span style="color: #800000">'</span><span style="color: #800000">n4</span><span style="color: #800000">'</span>,4, <span style="color: #800000">'</span><span style="color: #800000">n5</span><span style="color: #800000">'</span>,51)           <span style="color: #008000">#</span><span style="color: #008000">zadd(name, *args, **kwargs)在name对应的有序集合中添加元素</span>
a = r.<span style="background-color: #ff99cc">keys(pattern=<span style="color: #800000">'</span><span style="color: #800000">*</span><span style="color: #800000">'</span>)</span>                                      <span style="color: #008000">#</span><span style="color: #008000">keys(pattern='*')根据模型获取redis的name,</span>
<span style="color: #0000ff">print</span>(a)        <span style="color: #008000">#</span><span style="color: #008000">获取所有</span>
b = r.<span style="background-color: #ff99cc">keys(pattern=<span style="color: #800000">'</span><span style="color: #800000">r?i1</span><span style="color: #800000">'</span>)</span>     <span style="color: #008000">#</span><span style="color: #008000">匹配一个任意字符</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(b)



n </span>= r.zrange(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,0, 5, desc=False, withscores=True, score_cast_func=str)  <span style="color: #008000">#</span><span style="color: #008000">按照索引范围获取name对应的有序集合的元素</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)
</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000"> [b'rdi1']</span><span style="color: #008000">
#</span><span style="color: #008000"> [b'rdi1']</span><span style="color: #008000">
#</span><span style="color: #008000"> [(b'a1', "b'1'"), (b'b2', "b'2'"), (b'c1', "b'3'"), (b'n4', "b'4'"), (b'n5', "b'51'")]</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">expire(name ,time)</span>为某个redis的某个name设置超时时间（秒）</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.zadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">a1</span><span style="color: #800000">'</span>,1, <span style="color: #800000">'</span><span style="color: #800000">b2</span><span style="color: #800000">'</span>,2, <span style="color: #800000">'</span><span style="color: #800000">c1</span><span style="color: #800000">'</span>,3, <span style="color: #800000">'</span><span style="color: #800000">n4</span><span style="color: #800000">'</span>,4, <span style="color: #800000">'</span><span style="color: #800000">n5</span><span style="color: #800000">'</span>,51)          <span style="color: #008000">#</span><span style="color: #008000">zadd(name, *args, **kwargs)在name对应的有序集合中添加元素</span>
r.<span style="background-color: #ff99cc">expire(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,60)</span>                                         <span style="color: #008000">#</span><span style="color: #008000">expire(name ,time)为某个redis的某个name设置超时时间</span>
<span style="color: #000000">
n </span>= r.zrange(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,0, 5, desc=False, withscores=True, score_cast_func=str)  <span style="color: #008000">#</span><span style="color: #008000">按照索引范围获取name对应的有序集合的元素</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)
</span><span style="color: #008000">#</span><span style="color: #008000">返回</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">rename(src, dst)</span>对redis的name重命名为</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.zadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">a1</span><span style="color: #800000">'</span>,1, <span style="color: #800000">'</span><span style="color: #800000">b2</span><span style="color: #800000">'</span>,2, <span style="color: #800000">'</span><span style="color: #800000">c1</span><span style="color: #800000">'</span>,3, <span style="color: #800000">'</span><span style="color: #800000">n4</span><span style="color: #800000">'</span>,4, <span style="color: #800000">'</span><span style="color: #800000">n5</span><span style="color: #800000">'</span>,51)          <span style="color: #008000">#</span><span style="color: #008000">zadd(name, *args, **kwargs)在name对应的有序集合中添加元素</span>
r.<span style="background-color: #ff99cc">rename(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">adc</span><span style="color: #800000">'</span>)</span>                                         <span style="color: #008000">#</span><span style="color: #008000">rename(src, dst)对redis的name重命名为</span>
<span style="color: #000000">
n </span>= r.zrange(<span style="color: #800000">'</span><span style="color: #800000">adc</span><span style="color: #800000">'</span>,0, 5, desc=False, withscores=True, score_cast_func=str)  <span style="color: #008000">#</span><span style="color: #008000">按照索引范围获取name对应的有序集合的元素</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)
</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000"> [(b'a1', "b'1'"), (b'b2', "b'2'"), (b'c1', "b'3'"), (b'n4', "b'4'"), (b'n5', "b'51'")]</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">move(name, db))</span>将redis的某个值移动到指定的db下</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">randomkey()</span>随机获取一个redis的name（不删除）</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.zadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">a1</span><span style="color: #800000">'</span>,1, <span style="color: #800000">'</span><span style="color: #800000">b2</span><span style="color: #800000">'</span>,2, <span style="color: #800000">'</span><span style="color: #800000">c1</span><span style="color: #800000">'</span>,3, <span style="color: #800000">'</span><span style="color: #800000">n4</span><span style="color: #800000">'</span>,4, <span style="color: #800000">'</span><span style="color: #800000">n5</span><span style="color: #800000">'</span>,51)          <span style="color: #008000">#</span><span style="color: #008000">zadd(name, *args, **kwargs)在name对应的有序集合中添加元素</span>
<span style="color: #0000ff">print</span>(r.<span style="background-color: #ff99cc">randomkey()</span>)                                         <span style="color: #008000">#</span><span style="color: #008000">randomkey()随机获取一个redis的name（不删除）</span>
<span style="color: #000000">
n </span>= r.zrange(<span style="color: #800000">'</span><span style="color: #800000">adc</span><span style="color: #800000">'</span>,0, 5, desc=False, withscores=True, score_cast_func=str)  <span style="color: #008000">#</span><span style="color: #008000">按照索引范围获取name对应的有序集合的元素</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)
</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000"> b'rdi1'</span><span style="color: #008000">
#</span><span style="color: #008000"> [(b'a1', "b'1'"), (b'b2', "b'2'"), (b'c1', "b'3'"), (b'n4', "b'4'"), (b'n5', "b'51'")]</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">type(name)</span>获取name对应值的类型</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.zadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">a1</span><span style="color: #800000">'</span>,1, <span style="color: #800000">'</span><span style="color: #800000">b2</span><span style="color: #800000">'</span>,2, <span style="color: #800000">'</span><span style="color: #800000">c1</span><span style="color: #800000">'</span>,3, <span style="color: #800000">'</span><span style="color: #800000">n4</span><span style="color: #800000">'</span>,4, <span style="color: #800000">'</span><span style="color: #800000">n5</span><span style="color: #800000">'</span>,51)          <span style="color: #008000">#</span><span style="color: #008000">zadd(name, *args, **kwargs)在name对应的有序集合中添加元素</span>
<span style="color: #0000ff">print</span>(r.<span style="background-color: #ff99cc">type(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>)</span>)                                         <span style="color: #008000">#</span><span style="color: #008000">type(name)获取name对应值的类型</span>
<span style="color: #000000">
n </span>= r.zrange(<span style="color: #800000">'</span><span style="color: #800000">adc</span><span style="color: #800000">'</span>,0, 5, desc=False, withscores=True, score_cast_func=str)  <span style="color: #008000">#</span><span style="color: #008000">按照索引范围获取name对应的有序集合的元素</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)
</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000"> b'zset'</span><span style="color: #008000">
#</span><span style="color: #008000"> [(b'a1', "b'1'"), (b'b2', "b'2'"), (b'c1', "b'3'"), (b'n4', "b'4'"), (b'n5', "b'51'")]</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">scan(cursor=0, match=None, count=None)</span>增量式迭代获取，redis里匹配的的name【推荐使用下面的方法】</strong></span><br><strong>  　　cursor，游标（基于游标分批取获取数据）</strong><br><strong>  　　match，匹配指定key，默认None 表示所有的key</strong><br><strong>  　　count，每次分片最少获取个数，默认None表示采用Redis的默认分片个数</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.zadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">a1</span><span style="color: #800000">'</span>,1, <span style="color: #800000">'</span><span style="color: #800000">b2</span><span style="color: #800000">'</span>,2, <span style="color: #800000">'</span><span style="color: #800000">c1</span><span style="color: #800000">'</span>,3, <span style="color: #800000">'</span><span style="color: #800000">n4</span><span style="color: #800000">'</span>,4, <span style="color: #800000">'</span><span style="color: #800000">n5</span><span style="color: #800000">'</span>,51)          <span style="color: #008000">#</span><span style="color: #008000">zadd(name, *args, **kwargs)在name对应的有序集合中添加元素</span>
<span style="background-color: #ffff99">a</span>, b = r.<span style="background-color: #ff99cc">scan(cursor=0, match=<span style="color: #800000">'</span><span style="color: #800000">r*</span><span style="color: #800000">'</span>, count=None)</span>                 <span style="color: #008000">#</span><span style="color: #008000">scan(cursor=0, match=None, count=None)增量式迭代获取，redis里匹配的的name</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(a, b)
</span><span style="color: #008000">#</span><span style="color: #008000">如果数据多</span>
a2, b2 = r.<span style="background-color: #ff99cc">scan(cursor=<span style="background-color: #ffff99">a</span>, match=<span style="color: #800000">'</span><span style="color: #800000">r*</span><span style="color: #800000">'</span>, count=<span style="color: #000000">None)
</span></span><span style="color: #0000ff">print</span><span style="color: #000000">(a2, b2)

n </span>= r.zrange(<span style="color: #800000">'</span><span style="color: #800000">adc</span><span style="color: #800000">'</span>,0, 5, desc=False, withscores=True, score_cast_func=str)  <span style="color: #008000">#</span><span style="color: #008000">按照索引范围获取name对应的有序集合的元素</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)
</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000"> 0 [b'rdi1']</span><span style="color: #008000">
#</span><span style="color: #008000"> 0 [b'rdi1']</span><span style="color: #008000">
#</span><span style="color: #008000"> [(b'a1', "b'1'"), (b'b2', "b'2'"), (b'c1', "b'3'"), (b'n4', "b'4'"), (b'n5', "b'51'")]</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><span style="color: #0000ff">scan_iter(match=None, count=None)</span>增量式迭代获取，redis里匹配的的name【推荐】</strong></span><br><strong>　　match，匹配指定key，默认None 表示所有的key</strong><br><strong>　　count，每次分片最少获取个数，默认None表示采用Redis的默认分片个数</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">#</span><span style="color: #008000">!/usr/bin/env python</span><span style="color: #008000">
#</span><span style="color: #008000"> -*- coding:utf-8 -*-</span>

<span style="color: #0000ff">import</span> redis                <span style="color: #008000">#</span><span style="color: #008000">导入操作redis模块</span>
<span style="color: #000000">
pool </span>= redis.ConnectionPool(host=<span style="color: #800000">'</span><span style="color: #800000">127.0.0.1</span><span style="color: #800000">'</span>, port=6379)  <span style="color: #008000">#</span><span style="color: #008000">配置连接池连接信息</span>
<span style="color: #000000">
r </span>= redis.Redis(connection_pool=pool)                           <span style="color: #008000">#</span><span style="color: #008000">连接连接池</span>
r.zadd(<span style="color: #800000">'</span><span style="color: #800000">rdi1</span><span style="color: #800000">'</span>,<span style="color: #800000">'</span><span style="color: #800000">a1</span><span style="color: #800000">'</span>,1, <span style="color: #800000">'</span><span style="color: #800000">b2</span><span style="color: #800000">'</span>,2, <span style="color: #800000">'</span><span style="color: #800000">c1</span><span style="color: #800000">'</span>,3, <span style="color: #800000">'</span><span style="color: #800000">n4</span><span style="color: #800000">'</span>,4, <span style="color: #800000">'</span><span style="color: #800000">n5</span><span style="color: #800000">'</span>,51)          <span style="color: #008000">#</span><span style="color: #008000">zadd(name, *args, **kwargs)在name对应的有序集合中添加元素</span>
b = r.<span style="background-color: #ff99cc">scan_iter(match=<span style="color: #800000">'</span><span style="color: #800000">r*</span><span style="color: #800000">'</span>, count=None)</span>                 <span style="color: #008000">#</span><span style="color: #008000">scan_iter(match=None, count=None)增量式迭代获取，redis里匹配的的name</span>
<span style="color: #0000ff">for</span> i <span style="color: #0000ff">in</span><span style="color: #000000"> b:
    </span><span style="color: #0000ff">print</span><span style="color: #000000">(i)


n </span>= r.zrange(<span style="color: #800000">'</span><span style="color: #800000">adc</span><span style="color: #800000">'</span>,0, 5, desc=False, withscores=True, score_cast_func=str)  <span style="color: #008000">#</span><span style="color: #008000">按照索引范围获取name对应的有序集合的元素</span>
<span style="color: #0000ff">print</span><span style="color: #000000">(n)
</span><span style="color: #008000">#</span><span style="color: #008000">返回</span><span style="color: #008000">
#</span><span style="color: #008000"> b'rdi1'</span><span style="color: #008000">
#</span><span style="color: #008000"> [(b'a1', "b'1'"), (b'b2', "b'2'"), (b'c1', "b'3'"), (b'n4', "b'4'"), (b'n5', "b'51'")]</span></pre>
</div>
<p>&nbsp;</p></div>