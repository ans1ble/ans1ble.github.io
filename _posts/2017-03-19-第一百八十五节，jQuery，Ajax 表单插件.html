第一百八十五节，jQuery，Ajax 表单插件


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>jQuery，Ajax 表单插件</strong></p>
<p>&nbsp;</p>
<p><strong>学习要点： </strong></p>
<p><strong>　　1.核心方法 </strong></p>
<p><strong>　　2.option 参数 </strong></p>
<p><strong>　　3.工具方法</strong></p>
<p><strong>传统的表单提交，需要多次跳转页面，极大的消耗资源也缺乏良好的用户体验。而这款 form.js 表单的 Ajax 提交插件将解决这个问题。</strong></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>一．核心方法 </strong></span></p>
<p><strong>官方网站：http://malsup.com/jquery/form/</strong></p>
<p><strong> form.js 插件有两个核心方法：ajaxForm()和 ajaxSubmit()，它们集合了从控制表单元素 到决定如何管理提交进行的功能。</strong></p>
<p><span style="color: #ff0000"><strong><strong>ajaxForm()方法，传统方式提交，在form元素上使用</strong></strong></span></p>
<p><span style="color: #0000ff"><strong><strong>传统方式提交，也就是采用的&lt;input type="submit" value="提交" /&gt;</strong></strong></span></p>
<p><span style="color: #0000ff"><strong><strong>注意：使用 ajaxForm()方法，会直接实现 ajax 提交。自动阻止了默认行为不会跳转页面，而它提交的 默认页面是 form 控件的 action 属性的值。提交的方式是 method 属性的值。</strong></strong></span></p>
<div class="cnblogs_code">
<pre>    $('#reg').ajaxForm(<span style="color: #0000ff">function</span> () {  <span style="color: #008000">//</span><span style="color: #008000">success : fucntion () {}就是这里的function</span>
        alert('提交');                
    });</pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><strong> ajaxSubmit()方法，表单不是传统方式提交，使用了js的&nbsp;<strong>Submit()方法，提交</strong></strong></strong></span></p>
<div class="cnblogs_code">
<pre>    $('#reg').submit(<span style="color: #0000ff">function</span> () {     <span style="color: #008000">//</span><span style="color: #008000">不会阻止默认行为，会跳转</span>
        $(<span style="color: #0000ff">this</span>).ajaxSubmit(<span style="color: #0000ff">function</span><span style="color: #000000"> () {
            alert(</span>'提交'<span style="color: #000000">);
        });
        </span><span style="color: #0000ff">return</span> <span style="color: #0000ff">false</span>;   <span style="color: #008000">//</span><span style="color: #008000">阻止默认行为</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #0000ff"><strong>注意：ajaxForm()方法，是针对 form 直接提交的，所以阻止了默认行为。而 ajaxSubmit() 方法，由于是针对 submit()方法的，所以需要手动阻止默认行为。而使用了 validate.js 验证 插件，那么 ajaxSubmit()比较适合我们。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><strong><strong>二．option 参数 </strong></strong></strong></span></p>
<p><span style="color: #0000ff"><strong><strong><strong>option 参数是一个以键值对传递的对象，可以通过这个对象，设置各种 Ajax 提交的功 能。</strong></strong></strong></span></p>
<div class="cnblogs_code">
<pre>    $('#reg').submit(<span style="color: #0000ff">function</span> () {      <span style="color: #008000">//</span><span style="color: #008000">不会阻止默认行为，会跳转</span>
        $(<span style="color: #0000ff">this</span><span style="color: #000000">).ajaxSubmit({
            url: </span>'test.php',            <span style="color: #008000">//</span><span style="color: #008000">设置提交的 url，可覆盖 action 属性</span>
            target: '#box',             <span style="color: #008000">//</span><span style="color: #008000">服务器返回的内容存放在#box 里</span>
            type: 'POST',               <span style="color: #008000">//</span><span style="color: #008000">GET,POST</span>
            dataType: <span style="color: #0000ff">null</span>,             <span style="color: #008000">//</span><span style="color: #008000">xml,json,script，默认为 null</span>
            clearForm: <span style="color: #0000ff">true</span>,            <span style="color: #008000">//</span><span style="color: #008000">成功提交后，清空表单</span>
            resetForm: <span style="color: #0000ff">true</span>,            <span style="color: #008000">//</span><span style="color: #008000">成功提交后，重置表单</span>
            data: {                     <span style="color: #008000">//</span><span style="color: #008000">增加额外的数据提交</span>
                aaa: 'bbb'<span style="color: #000000">,
                ccc: </span>'ddd'<span style="color: #000000">
            },
            beforeSubmit: </span><span style="color: #0000ff">function</span><span style="color: #000000"> (formData, jqForm, options) {    //提交前的验证
                alert(formData[</span>0].name);                    <span style="color: #008000">//</span><span style="color: #008000">得到传递表单元素的 name</span>
                alert(formData[0].value);                   <span style="color: #008000">//</span><span style="color: #008000">得到传递表单元素的 value</span>
                alert(jqForm);                              <span style="color: #008000">//</span><span style="color: #008000">得到 form 的 jquery 对象</span>
                alert(options);                             <span style="color: #008000">//</span><span style="color: #008000">得到目前 options 设置的属性</span>
                alert('正在提交中！！！'<span style="color: #000000">);
                </span><span style="color: #0000ff">return</span> <span style="color: #0000ff">true</span><span style="color: #000000">;
            },
            success: </span><span style="color: #0000ff">function</span><span style="color: #000000"> (responseText, statusText) {  //提交成功后的操作
                alert(responseText </span>+ statusText);           <span style="color: #008000">//</span><span style="color: #008000">成功后回调</span>
<span style="color: #000000">            },
            error: </span><span style="color: #0000ff">function</span> (event, errorText, errorType) { <span style="color: #008000">//</span><span style="color: #008000">错误时调用  //提交失败的操作</span>
                alert(errorText +<span style="color: #000000"> errorType);
            }
        });
        </span><span style="color: #0000ff">return</span> <span style="color: #0000ff">false</span>;   <span style="color: #008000">//</span><span style="color: #008000">阻止默认行为</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>三．工具方法 </strong></span></p>
<p><strong>form.js 除了提供两个核心方法之外，还提供了一些常用的工具方法。这些方法主要是 在提交前或后对数据或表单进行处理的。</strong></p>
<p><span style="color: #ff0000"><strong><strong><strong>formSerialize()表单序列化，内置了的，这里还是需要了解一下</strong></strong></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">表单序列化</span>
alert($('#reg').formSerialize());</pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>fieldSerialize()序列化某一个字段</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">序列化某一个字段</span>
alert($('#reg #user').fieldSerialize());</pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>fieldValue()得到某个字段的 value 值</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">得到某个字段的 value 值</span>
alert($('#reg #user').fieldValue());</pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>resetForm()重置表单</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">重置表单</span>
$('#reg').resetForm()</pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>clearFields()清空某个字段</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">清空某个字段</span>
$('#reg #user').clearFields();</pre>
</div>
<p>&nbsp;</p></div>