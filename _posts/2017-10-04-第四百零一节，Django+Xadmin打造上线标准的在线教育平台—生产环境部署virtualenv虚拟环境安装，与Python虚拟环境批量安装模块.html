第四百零一节，Django+Xadmin打造上线标准的在线教育平台—生产环境部署virtualenv虚拟环境安装，与Python虚拟环境批量安装模块


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>第四百零一节，Django+Xadmin打造上线标准的在线教育平台—生产环境部署virtualenv虚拟环境安装，与Python虚拟环境批量安装模块</strong></p>
<p>&nbsp;</p>
<p><strong><strong>virtualenv简介</strong></strong></p>
<p><strong><strong><img src="https://images2017.cnblogs.com/blog/955761/201710/955761-20171004183901974-551509189.png" alt=""></strong></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>1.安装virtualenv</strong></span></p>
<div class="cnblogs_code">
<pre>[root@192 huan_jing]<span style="color: #008000">#</span><span style="color: #008000"> pip3 install virtualenv</span>
<span style="color: #000000">Collecting virtualenv
  Downloading virtualenv</span>-15.1.0-py2.py3-none-any.whl (1<span style="color: #000000">.8MB)
    </span>100% |████████████████████████████████| 1.8MB 61kB/<span style="color: #000000">s 
Installing collected packages: virtualenv
Successfully installed virtualenv</span>-15.1<span style="color: #000000">.0
You are using pip version </span>7.1.2, however version 9.0.1 <span style="color: #0000ff">is</span><span style="color: #000000"> available.
You should consider upgrading via the </span><span style="color: #800000">'</span><span style="color: #800000">pip install --upgrade pip</span><span style="color: #800000">'</span><span style="color: #000000"> command.
[root@</span>192 huan_jing]<span style="color: #008000">#</span> </pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>2.安装virtualenvwrapper</strong></span></p>
<p><span style="color: #000000"><strong><strong>virtualenvwrapper是<strong>virtualenv的一个方便管理虚拟环境的管理器</strong></strong></strong></span></p>
<div class="cnblogs_code">
<pre>pip3 install virtualenvwrapper</pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>3.安装好virtualenvwrapper后编辑vim ~/.bashrc文件，这步很重要，不设置会导致下面的命令不可用</strong></span></p>
<div class="cnblogs_code">
<pre>vim ~/.bashrc</pre>
</div>
<p>在文件加入</p>
<div class="cnblogs_code">
<pre>export WORKON_HOME=<span style="background-color: #ff99cc">/usr/</span><span style="color: #000000"><span style="background-color: #ff99cc">xu_ni_huan_jing</span>　　　　　　存放虚拟环境的目录
source </span>/usr/local/bin/virtualenvwrapper.sh　　　　指定virtualenvwrapper.sh文件路径</pre>
</div>
<p>使刚才修改的文件失效</p>
<div class="cnblogs_code">
<pre>[root@192 xu_ni_huan_jing]<span style="color: #008000">#</span><span style="color: #008000"> source ~/.bashrc</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>4.创建虚拟环境，创建后会自动进入虚拟环境</strong></span></p>
<p><strong>mkvirtualenv 虚拟环境名称</strong></p>
<div class="cnblogs_code">
<pre>[root@192 xu_ni_huan_jing]<span style="color: #008000">#</span><span style="color: #008000; background-color: #ffff99"> mkvirtualenv jxiou</span>
Using base prefix <span style="color: #800000">'</span><span style="color: #800000">/usr/local</span><span style="color: #800000">'</span><span style="color: #000000">
New python executable </span><span style="color: #0000ff">in</span> /usr/xu_ni_huan_jing/jxiou/bin/python3.5<span style="color: #000000">
Also creating executable </span><span style="color: #0000ff">in</span> /usr/xu_ni_huan_jing/jxiou/bin/<span style="color: #000000">python
Installing setuptools, pip, wheel...done.
virtualenvwrapper.user_scripts creating </span>/usr/xu_ni_huan_jing/jxiou/bin/<span style="color: #000000">predeactivate
virtualenvwrapper.user_scripts creating </span>/usr/xu_ni_huan_jing/jxiou/bin/<span style="color: #000000">postdeactivate
virtualenvwrapper.user_scripts creating </span>/usr/xu_ni_huan_jing/jxiou/bin/<span style="color: #000000">preactivate
virtualenvwrapper.user_scripts creating </span>/usr/xu_ni_huan_jing/jxiou/bin/<span style="color: #000000">postactivate
virtualenvwrapper.user_scripts creating </span>/usr/xu_ni_huan_jing/jxiou/bin/<span style="color: #000000">get_env_details
<span style="background-color: #ffff99">(jxiou)</span> [root@</span>192 xu_ni_huan_jing]<span style="color: #008000">#</span> </pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>5.退出虚拟环境</strong></span></p>
<p><strong>deactivate</strong></p>
<div class="cnblogs_code">
<pre>(jxiou) [root@192 xu_ni_huan_jing]<span style="color: #008000">#</span><span style="color: #008000; background-color: #ffff99"> deactivate</span>
[root@192 xu_ni_huan_jing]<span style="color: #008000">#</span> </pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>6.查看有哪些虚拟环境</strong></span></p>
<p><strong>workon</strong></p>
<div class="cnblogs_code">
<pre>[root@192 /]<span style="color: #008000">#</span><span style="color: #008000; background-color: #ffff99"> workon</span>
<span style="color: #000000">jxiou2
jxiou
[root@</span>192 /]<span style="color: #008000">#</span> </pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>7.进入一个指定的虚拟环境</strong></span></p>
<p><strong>workon jxiou(虚拟环境名称)</strong></p>
<div class="cnblogs_code">
<pre>[root@192 /]<span style="color: #008000">#</span><span style="color: #008000"> workon jxiou</span>
(jxiou) [root@192 /]<span style="color: #008000">#</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>8.在虚拟环境安装开发包</strong></span></p>
<p><strong>首先要进入虚拟环境</strong></p>
<div class="cnblogs_code">
<pre>(jxiou) [root@192 /]<span style="color: #008000">#</span><span style="color: #008000"> pip install requests</span>
<span style="color: #000000">Collecting requests
  Downloading requests</span>-2.18.4-py2.py3-none-<span style="color: #000000">any.whl (88kB)
    </span>100% |████████████████████████████████| 92kB 160kB/<span style="color: #000000">s 
Collecting certifi</span>&gt;=2017.4.17 (<span style="color: #0000ff">from</span><span style="color: #000000"> requests)
  Downloading certifi</span>-2017.7.27.1-py2.py3-none-<span style="color: #000000">any.whl (349kB)
    </span>100% |████████████████████████████████| 358kB 38kB/<span style="color: #000000">s 
Collecting urllib3</span>&lt;1.23,&gt;=1.21.1 (<span style="color: #0000ff">from</span><span style="color: #000000"> requests)
  Downloading urllib3</span>-1.22-py2.py3-none-<span style="color: #000000">any.whl (132kB)
    </span>100% |████████████████████████████████| 133kB 23kB/<span style="color: #000000">s 
Collecting idna</span>&lt;2.7,&gt;=2.5 (<span style="color: #0000ff">from</span><span style="color: #000000"> requests)
  Downloading idna</span>-2.6-py2.py3-none-<span style="color: #000000">any.whl (56kB)
    </span>100% |████████████████████████████████| 61kB 15kB/<span style="color: #000000">s 
Collecting chardet</span>&lt;3.1.0,&gt;=3.0.2 (<span style="color: #0000ff">from</span><span style="color: #000000"> requests)
  Downloading chardet</span>-3.0.4-py2.py3-none-<span style="color: #000000">any.whl (133kB)
    </span>100% |████████████████████████████████| 143kB 24kB/<span style="color: #000000">s 
Installing collected packages: certifi, urllib3, idna, chardet, requests
Successfully installed certifi</span>-2017.7.27.1 chardet-3.0.4 idna-2.6 requests-2.18.4 urllib3-1.22<span style="color: #000000">
(jxiou) [root@</span>192 /]<span style="color: #008000">#</span> </pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>虚拟环境批量安装开发模块</strong></span></p>
<p><strong>1.首先在开发系统里cd进入一个目录，执行&nbsp;<span style="color: #0000ff">pip freeze &gt; chuaj.txt</span>&nbsp; 命令，将开发环境里用到的第三方模块以txt文件方式导出模块安装文件</strong></p>
<p><strong>2.在生产环境里进入虚拟环境，将开发环境里导出的<strong>txt文件放到生产虚拟环境里，执行命令 <span style="color: #0000ff">pip install -r /usr/xu_ni_huan_jing/jxiou/chuaj.txt</span> &nbsp;批量安装模块</strong></strong></p>
<p><strong><strong>如果遇到安装慢的可以ctrl+c停止安装，单独用加速镜像安装源，安装</strong></strong></p>
<p>&nbsp;</p></div>