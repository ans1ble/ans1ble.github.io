第三十四节，pickle数据类型转换二进制字节码模块


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>在使用pickle模块时需要先&nbsp;import pickle 引入模块</strong></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000;"><strong>pickle.dumps()模块函数</strong></span></p>
<p><strong>功能：将python各种类型的数据转换成计算机识别的二进制字节码【有参】</strong></p>
<p><strong>使用方法：<strong>pickle.dumps(要转换的数据类型变量)</strong><strong><br /></strong></strong></p>
<p><strong>格式如：<strong>pickle.dumps(a)</strong></strong></p>
<p><strong><strong>注意：计算机只能字节码，不能识别<strong>python的各种数据类型如：列表，元祖，字典等，要想在计算机保存这些<strong>python数据类型，就需要将这些数据类型转换成二进制字节码来保存</strong></strong></strong></strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">#</span><span style="color: #008000;">!/usr/bin/env python</span><span style="color: #008000;">
#</span><span style="color: #008000;"> -*- coding:utf8 -*-</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> pickle
yhxxi </span>= {   <span style="color: #008000;">#</span><span style="color: #008000;">创建一个嵌套字典</span>
    1<span style="color: #000000;">:{
        </span><span style="color: #800000;">"</span><span style="color: #800000;">yonghu</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">liguixiou</span><span style="color: #800000;">"</span><span style="color: #000000;">,
        </span><span style="color: #800000;">"</span><span style="color: #800000;">mima</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">12345</span><span style="color: #800000;">"</span><span style="color: #000000;">,
        </span><span style="color: #800000;">"</span><span style="color: #800000;">youjian</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">729088188@qq.com</span><span style="color: #800000;">"</span><span style="color: #000000;">,
        </span><span style="color: #800000;">"</span><span style="color: #800000;">zichan</span><span style="color: #800000;">"</span>:700<span style="color: #000000;">,
    },
    </span>2<span style="color: #000000;">:{
        </span><span style="color: #800000;">"</span><span style="color: #800000;">yonghu</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">liguixiou2</span><span style="color: #800000;">"</span><span style="color: #000000;">,
        </span><span style="color: #800000;">"</span><span style="color: #800000;">mima</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">123452</span><span style="color: #800000;">"</span><span style="color: #000000;">,
        </span><span style="color: #800000;">"</span><span style="color: #800000;">youjian</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">7290881882@qq.com</span><span style="color: #800000;">"</span><span style="color: #000000;">,
        </span><span style="color: #800000;">"</span><span style="color: #800000;">zichan</span><span style="color: #800000;">"</span>:7002<span style="color: #000000;">,
    }
}
a </span>= pickle.dumps(yhxxi) <span style="color: #008000;">#</span><span style="color: #008000;">将字典转换成二进制字节码</span>
<span style="color: #0000ff;">print</span>(a)    <span style="color: #008000;">#</span><span style="color: #008000;">打印出二进制字节码</span><span style="color: #008000;">
#</span><span style="color: #008000;">输出</span><span style="color: #008000;">
# b'\x80\x03}q\x00(K\x01}q\x01(X\x04\x00\x00\x00mimaq\x02X\x05\x00\x00\x0012345q\x03X\x07\x00\x00\x00youjianq\x04X\x10\x00\x00\x00729088188@qq.comq\x05X\x06\x00\x00\x00zichanq\x06M\xbc\x02X\x06\x00\x00\x00yonghuq\x07X\t\x00\x00\x00liguixiouq\x08uK\x02}q\t(h\x02X\x06\x00\x00\x00123452q\nh\x04X\x11\x00\x00\x007290881882@qq.comq\x0bh\x06MZ\x1bh\x07X\n\x00\x00\x00liguixiou2q\x0cuu.'<br /></span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000;"><strong>pickle.loads()模块函数</strong></span></p>
<p><strong>功能：将二进制字节码还原成它的python数据类型【有参】</strong></p>
<p><strong>使用方法：<strong>pickle.loads(需要还原的二进制字节码变量)</strong><strong><br /></strong></strong></p>
<p><strong>格式如：pickle.loads(b)<strong><br /></strong></strong></p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">#</span><span style="color: #008000;">!/usr/bin/env python</span><span style="color: #008000;">
#</span><span style="color: #008000;"> -*- coding:gbk -*-</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> pickle
a </span>= [<span style="color: #800000;">"</span><span style="color: #800000;">你好</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">我好</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">他好</span><span style="color: #800000;">"</span>]  <span style="color: #008000;">#</span><span style="color: #008000;">创建一个列表</span>
b = pickle.dumps(a)     <span style="color: #008000;">#</span><span style="color: #008000;">将列表转换成二进制字节码</span>
<span style="color: #0000ff;">print</span>(b)    <span style="color: #008000;">#</span><span style="color: #008000;">打印出转换的二进制字节码</span>
<span style="color: #000000;">
c </span>= pickle.loads(b)     <span style="color: #008000;">#</span><span style="color: #008000;">将二进制字节码还原它的数据类型</span>
<span style="color: #0000ff;">print</span>(c)  <span style="color: #008000;">#</span><span style="color: #008000;">打印出还原的数据类型</span><span style="color: #008000;">
#</span><span style="color: #008000;">输出</span><span style="color: #008000;">
#</span><span style="color: #008000;"> b'\x80\x03]q\x00(X\x06\x00\x00\x00\xe4\xbd\xa0\xe5\xa5\xbdq\x01X\x06\x00\x00\x00\xe6\x88\x91\xe5\xa5\xbdq\x02X\x06\x00\x00\x00\xe4\xbb\x96\xe5\xa5\xbdq\x03e.'</span><span style="color: #008000;">
#</span><span style="color: #008000;"> ['你好', '我好', '他好']</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000;"><strong>将一个字典转换成二进制字节码，写入本地文件，在从本地文件读出二进制字节码，还原成字典，修改字典里的某些值后，将字典转换成二进制字节码，在重新写入本地文件</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">#</span><span style="color: #008000;">!/usr/bin/env python</span><span style="color: #008000;">
#</span><span style="color: #008000;"> -*- coding:utf8 -*-</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> pickle
</span><span style="color: #800000;">"""</span><span style="color: #800000;">在一个本地文件里以二进制字节码方式保存会员信息</span><span style="color: #800000;">"""</span><span style="color: #000000;">
yhxxi </span>= {   <span style="color: #008000;">#</span><span style="color: #008000;">创建一个嵌套字典</span>
    1<span style="color: #000000;">:{
        </span><span style="color: #800000;">"</span><span style="color: #800000;">yonghu</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">liguixiou</span><span style="color: #800000;">"</span><span style="color: #000000;">,
        </span><span style="color: #800000;">"</span><span style="color: #800000;">mima</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">12345</span><span style="color: #800000;">"</span><span style="color: #000000;">,
        </span><span style="color: #800000;">"</span><span style="color: #800000;">youjian</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">729088188@qq.com</span><span style="color: #800000;">"</span><span style="color: #000000;">,
        </span><span style="color: #800000;">"</span><span style="color: #800000;">zichan</span><span style="color: #800000;">"</span>:700<span style="color: #000000;">,
    },
    </span>2<span style="color: #000000;">:{
        </span><span style="color: #800000;">"</span><span style="color: #800000;">yonghu</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">liguixiou2</span><span style="color: #800000;">"</span><span style="color: #000000;">,
        </span><span style="color: #800000;">"</span><span style="color: #800000;">mima</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">123452</span><span style="color: #800000;">"</span><span style="color: #000000;">,
        </span><span style="color: #800000;">"</span><span style="color: #800000;">youjian</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">7290881882@qq.com</span><span style="color: #800000;">"</span><span style="color: #000000;">,
        </span><span style="color: #800000;">"</span><span style="color: #800000;">zichan</span><span style="color: #800000;">"</span>:7002<span style="color: #000000;">,
    }
}
f </span>= open(<span style="color: #800000;">"</span><span style="color: #800000;">yh.txt</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">wb</span><span style="color: #800000;">"</span>)    <span style="color: #008000;">#</span><span style="color: #008000;">打开yh.txt文件写入模式b以字节类型打开</span>
f.write(pickle.dumps(yhxxi))    <span style="color: #008000;">#</span><span style="color: #008000;">将yhxxi字典通过pickle.dumps()模块函数转换成二进制字节码，写入yh.txt文件中</span>
<span style="color: #0000ff;">print</span>(pickle.dumps(yhxxi))  <span style="color: #008000;">#</span><span style="color: #008000;">打印出字典转换成的二进制字节码</span>
f.close()   <span style="color: #008000;">#</span><span style="color: #008000;">关闭打开的文件</span>

<span style="color: #800000;">"""</span><span style="color: #800000;">在一个本地文件里读取里面的二进制字节码，还原它的数据类型</span><span style="color: #800000;">"""</span><span style="color: #000000;">
f2 </span>= open(<span style="color: #800000;">"</span><span style="color: #800000;">yh.txt</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">rb</span><span style="color: #800000;">"</span>)   <span style="color: #008000;">#</span><span style="color: #008000;">打开yh.txt文件读模式b以字节类型打开</span>
fa = f2.read()  <span style="color: #008000;">#</span><span style="color: #008000;">读出文件里的内容</span>
fa2 = pickle.loads(fa)  <span style="color: #008000;">#</span><span style="color: #008000;">将文件里读出的二进制字节码还原它的数据类型</span>
f2.close()  <span style="color: #008000;">#</span><span style="color: #008000;">关闭打开的文件</span>
<span style="color: #0000ff;">print</span>(fa2)  <span style="color: #008000;">#</span><span style="color: #008000;">打印出还原的数据类型</span>

<span style="color: #800000;">"""</span><span style="color: #800000;">将还原的数据类型，修改后，转换成二进制字节码再写入文件保存</span><span style="color: #800000;">"""</span><span style="color: #000000;">
fa2[</span>2][<span style="color: #800000;">"</span><span style="color: #800000;">zichan</span><span style="color: #800000;">"</span>] = fa2[2][<span style="color: #800000;">"</span><span style="color: #800000;">zichan</span><span style="color: #800000;">"</span>] - 500   <span style="color: #008000;">#</span><span style="color: #008000;">将字典里的字典，键为2里的键为zichan的值减500</span>
fa2[2][<span style="color: #800000;">"</span><span style="color: #800000;">yonghu</span><span style="color: #800000;">"</span>] = <span style="color: #800000;">"</span><span style="color: #800000;">liguixiou3</span><span style="color: #800000;">"</span>     <span style="color: #008000;">#</span><span style="color: #008000;">将字典里的字典，键为2里的键为yonghu的值改为liguixiou3</span>
<span style="color: #0000ff;">print</span>(fa2)  <span style="color: #008000;">#</span><span style="color: #008000;">此时的fa2字典里的数据已经修改</span>
f2 = open(<span style="color: #800000;">"</span><span style="color: #800000;">yh.txt</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">wb</span><span style="color: #800000;">"</span>)   <span style="color: #008000;">#</span><span style="color: #008000;">打开yh.txt文件写入模式b以字节类型打开</span>
xieru2 = pickle.dumps(fa2)  <span style="color: #008000;">#</span><span style="color: #008000;">将修改后的字典转换成二进制字节码</span>
f2.write(pickle.dumps(fa2)) <span style="color: #008000;">#</span><span style="color: #008000;">将修改后的字典转换成二进制字节码，然后再写入yh.txt文件</span>
f2.close()  <span style="color: #008000;">#</span><span style="color: #008000;">#关闭打开的文件</span>
<span style="color: #0000ff;">print</span>(xieru2)   <span style="color: #008000;">#</span><span style="color: #008000;">打印将修改后的字典</span>

<span style="color: #008000;">#</span><span style="color: #008000;">最后输出</span><span style="color: #008000;">
#</span><span style="color: #008000;"> b'\x80\x03}q\x00(K\x01}q\x01(X\x07\x00\x00\x00youjianq\x02X\x10\x00\x00\x00729088188@qq.comq\x03X\x06\x00\x00\x00yonghuq\x04X\t\x00\x00\x00liguixiouq\x05X\x06\x00\x00\x00zichanq\x06M\xbc\x02X\x04\x00\x00\x00mimaq\x07X\x05\x00\x00\x0012345q\x08uK\x02}q\t(h\x02X\x11\x00\x00\x007290881882@qq.comq\nh\x04X\n\x00\x00\x00liguixiou2q\x0bh\x06MZ\x1bh\x07X\x06\x00\x00\x00123452q\x0cuu.'</span><span style="color: #008000;">
#</span><span style="color: #008000;"> {1: {'youjian': '729088188@qq.com', 'yonghu': 'liguixiou', 'zichan': 700, 'mima': '12345'}, 2: {'youjian': '7290881882@qq.com', 'yonghu': 'liguixiou2', 'zichan': 7002, 'mima': '123452'}}</span><span style="color: #008000;">
#</span><span style="color: #008000;"> {1: {'youjian': '729088188@qq.com', 'yonghu': 'liguixiou', 'zichan': 700, 'mima': '12345'}, 2: {'youjian': '7290881882@qq.com', 'yonghu': 'liguixiou3', 'zichan': 6502, 'mima': '123452'}}</span><span style="color: #008000;">
#</span><span style="color: #008000;"> b'\x80\x03}q\x00(K\x01}q\x01(X\x07\x00\x00\x00youjianq\x02X\x10\x00\x00\x00729088188@qq.comq\x03X\x06\x00\x00\x00yonghuq\x04X\t\x00\x00\x00liguixiouq\x05X\x06\x00\x00\x00zichanq\x06M\xbc\x02X\x04\x00\x00\x00mimaq\x07X\x05\x00\x00\x0012345q\x08uK\x02}q\t(h\x02X\x11\x00\x00\x007290881882@qq.comq\nh\x04X\n\x00\x00\x00liguixiou3q\x0bh\x06Mf\x19h\x07X\x06\x00\x00\x00123452q\x0cuu.'</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000;"><strong>pickle.dump()</strong></span></p>
<p><strong>功能：将python数据类型以二进制字节码方式直接写入文件，【有参】</strong></p>
<p><strong>使用方法：<strong>pickle.dump(要写入文件的<strong><strong>类型</strong></strong>数据变量, 打开文件变量)【有参】</strong><strong><br /></strong></strong></p>
<p><strong>格式如：pickle.dump(a,c)</strong></p>
<p><span style="color: #ff0000;"><strong>注意：pickle.dump()写入文件可以直接写入，不需要write()函数即可写入</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">#</span><span style="color: #008000;">!/usr/bin/env python</span><span style="color: #008000;">
#</span><span style="color: #008000;"> -*- coding:utf8 -*-</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> pickle
a </span>= [<span style="color: #800000;">"</span><span style="color: #800000;">你好</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">我好</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">他好</span><span style="color: #800000;">"</span>]     <span style="color: #008000;">#</span><span style="color: #008000;">创建一个列表</span>
c = open(<span style="color: #800000;">"</span><span style="color: #800000;">yh.txt</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">wb</span><span style="color: #800000;">"</span>)    <span style="color: #008000;">#</span><span style="color: #008000;">写入模式打开一个文件以二进制字节码模式</span>
pickle.dump(a,c)    <span style="color: #008000;">#</span><span style="color: #008000;">将python数据类型以二进制字节码方式直接写入文件</span>
c.close()   <span style="color: #008000;">#</span><span style="color: #008000;">关闭文件</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000;"><strong>pickle.load()</strong></span></p>
<p><strong>功能：将文件里的二进制字节码直接读出还原它的python数据类型【有参】</strong></p>
<p><strong>使用方法：pickle.load(打开文件的变量)<strong><br /></strong></strong></p>
<p><strong>格式如：pickle.load(c1)</strong></p>
<p><span style="color: #ff0000;"><strong>注意：<strong>pickle.load()读出文件可以直接读出，不需要read()函数即可读出</strong></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000;">#</span><span style="color: #008000;">!/usr/bin/env python</span><span style="color: #008000;">
#</span><span style="color: #008000;"> -*- coding:utf8 -*-</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> pickle
c1 </span>= open(<span style="color: #800000;">"</span><span style="color: #800000;">yh.txt</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">rb</span><span style="color: #800000;">"</span>)   <span style="color: #008000;">#</span><span style="color: #008000;">以读二进制模式打开文件</span>
fa = pickle.load(c1)    <span style="color: #008000;">#</span><span style="color: #008000;">将文件里的二进制字节码直接读出还原它的python数据类型</span>
c1.close()  <span style="color: #008000;">#</span><span style="color: #008000;">关闭文件</span>
<span style="color: #0000ff;">print</span>(fa)   <span style="color: #008000;">#</span><span style="color: #008000;">打印出还原的Python数据类型</span><span style="color: #008000;">
#</span><span style="color: #008000;">输出</span><span style="color: #008000;">
#</span><span style="color: #008000;"> ['你好', '我好', '他好']</span></pre>
</div>
<p>&nbsp;</p></div>