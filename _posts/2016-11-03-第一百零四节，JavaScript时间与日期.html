第一百零四节，JavaScript时间与日期


			<div id="cnblogs_post_body" class="blogpost-body"><p><span style="color: #0000ff"><strong><span style="font-size: 18pt">JavaScript时间与日期</span></strong></span></p>
<p>&nbsp;</p>
<p align="left"><strong>学习要点：</strong></p>
<p align="left"><strong>1.Date类型</strong></p>
<p align="left"><strong>2.通用的方法</strong></p>
<p align="left"><strong>3.格式化方法</strong></p>
<p align="left"><strong>4.组件方法</strong></p>
<p align="left">&nbsp;</p>
<p align="left"><strong>ECMAScript提供了Date类型来处理时间和日期。Date类型内置一系列获取和设置日期时间信息的方法。</strong></p>
<p align="left">&nbsp;</p>
<p align="left"><span style="color: #ff0000"><strong>一．</strong><strong>Date</strong><strong>类型</strong></span></p>
<p align="left"><strong>ECMAScript中的Date类型是在早期Java中java.util.Date类基础上构建的。为此，Date类型使用UTC (Coordinated Universal Time，国际协调时间[又称世界统一时间]) 1970年1月1日午夜(零时)开始经过的毫秒来保存日期。在使用这种数据存储格式的条件下，Date类型保存的日期能够精确到1970年1月1日之前或之后的285616年。</strong></p>
<p align="left"><span style="color: #ff0000"><strong><strong>Date()</strong>创建一个日期对象，使用new运算符和Date构造方法(构造函数)即可</strong></span></p>
<p align="left"><strong>在调用Date构造方法而不传递参数的情况下，新建的对象自动获取当前的时间和日期。</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span> Date();                    <span style="color: #008000">//</span><span style="color: #008000">创建一个日期对象</span>
alert(box);                    <span style="color: #008000">//</span><span style="color: #008000">打印时间对象，返回Thu Nov 03 2016 14:56:21 GMT+0800</span>
                               <span style="color: #008000">//</span><span style="color: #008000">不同浏览器显示不同</span></pre>
</div>
<p><strong>ECMAScript提供了两个方法，Date.parse()和Date.UTC()。Date.parse()方法接收一个表示日期的字符串参数，然后尝试根据这个字符串返回相应的毫秒数。ECMA-262没有定义Date.parse()应该支持哪种日期格式，因此方法的行为因实现而异，因地区而异。默认通常接收的日期格式如下：</strong></p>
<p align="left">&nbsp;</p>
<p align="left"><span style="color: #ff0000"><strong><strong><strong>Date.parse()方法接收一个表示日期的字符串参数，然后尝试根据这个字符串返回相应的毫秒数【有参传时间日期格式】</strong></strong></strong></span></p>
<p align="left"><strong>1.'月/日/年'，如6/13/2011;</strong></p>
<p align="left"><strong>2.'英文月名 日, 年'，如 May 25, 2004;</strong></p>
<p align="left"><strong>3.'英文星期几 英文月名 日 年 时:分:秒 时区'，如 Tue May 25 2004 00:00:00 GMT-070</strong></p>
<p align="left"><span style="color: #0000ff"><strong>如果Date.parse()没有传入或者不是标准的日期格式，那么就会返回NaN。</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = Date.parse('6/13/2011');                    <span style="color: #008000">//</span><span style="color: #008000">创建一个日期对象,调用parse方法，传入时间格式</span>
alert(box);                    <span style="color: #008000">//</span><span style="color: #008000">打印时间对象，返回1307894400000，时间毫秒数</span></pre>
</div>
<p align="left"><span style="color: #ff0000"><strong>如果想输出指定的日期，那么把Date.parse()传入Date构造方法里。</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box1 = <span style="color: #0000ff">new</span> Date(Date.parse('6/13/2011'));  <span style="color: #008000">//</span><span style="color: #008000">Date.parse获取指定时间的毫秒数，将毫秒数传参给Date()</span>
alert(box1); <span style="color: #008000">//</span><span style="color: #008000">返回Mon Jun 13 2011 00:00:00 GMT+0800</span>

<span style="color: #0000ff">var</span> box2 = <span style="color: #0000ff">new</span> Date('6/13/2011');             <span style="color: #008000">//</span><span style="color: #008000">直接传入指定时间，后台会自动调用Date.parse()方法</span>
alert(box2); <span style="color: #008000">//</span><span style="color: #008000">返回Mon Jun 13 2011 00:00:00 GMT+0800</span></pre>
</div>
<p align="left"><strong>PS：Date对象及其在不同浏览器中的实现有许多奇怪的行为。其中有一种倾向是<span style="color: #0000ff">将超出的范围的值替换成当前的值</span>，以便生成输出。例如，在解析“January 32, 2007”时，有的浏览器会讲其解释为“February 1, 2007”。而Opera则倾向与插入当前月份的当前日期。</strong></p>
<p align="left">&nbsp;</p>
<p align="left"><span style="color: #ff0000"><strong>Date.UTC()<strong><strong><strong>方法接收一个表示日期的字符串参数,<strong><strong><strong>返回相应的毫秒数<strong><strong><strong><br></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></span></p>
<p align="left"><strong>Date.UTC()方法同样也返回表示日期的毫秒数，但它与Date.parse()在构建值时使用不同的信息。(年份，基于0的月份[0表示1月，1表示2月]，月中的哪一天[1-31]，小时数[0-23]，分钟，秒以及毫秒)。只有前两个参数是必须的。如果没有提供月数，则天数为1；如果省略其他参数，则统统为0.</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = Date.UTC(2016,11); <span style="color: #008000">//</span><span style="color: #008000">必传参数年月</span>
alert(box);                <span style="color: #008000">//</span><span style="color: #008000">返回1480550400000</span></pre>
</div>
<p align="left"><span style="color: #ff0000"><strong>如果Date.UTC()参数传递错误，那么就会出现负值或者NaN等非法信息。</strong></span></p>
<div class="cnblogs_code">
<pre>alert(Date.UTC());                        <span style="color: #008000">//</span><span style="color: #008000">负值或者NaN</span></pre>
</div>
<p align="left"><span style="color: #ff0000"><strong>如果要输出指定日期，那么直接把Date.UTC()传入Date构造方法里即可。</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span> Date(Date.UTC(2011,11, 5, 15, 13, 16));   <span style="color: #008000">//</span><span style="color: #008000">Date.UTC获取到毫秒数，传给Date()</span>
alert(box);         <span style="color: #008000">//</span><span style="color: #008000">返回Mon Dec 05 2011 23:13:16 GMT+0800</span></pre>
</div>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span> Date(2011,11, 5, 15, 13, 16);   <span style="color: #008000">//</span><span style="color: #008000">直接传参给Date()【推荐】</span>
alert(box);         <span style="color: #008000">//</span><span style="color: #008000">返回Mon Dec 05 2011 15:13:16 GMT+0800</span></pre>
</div>
<p>&nbsp;</p>
<p align="left"><span style="color: #ff0000"><strong>二．</strong><strong>通用的方法</strong></span></p>
<p align="left"><strong>与其他类型一样，Date类型也重写了toLocaleString()、toString()和valueOf()方法；但这些方法返回值与其他类型中的方法不同。</strong></p>
<p align="left"><span style="color: #ff0000"><strong><strong>toLocaleString()方法，格式：2016/11/3 下午4:21:03，浏览器有的显示不同</strong></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span> Date();   <span style="color: #008000">//</span><span style="color: #008000">获取系统当前时间</span>
alert(box.toLocaleString()); <span style="color: #008000">//</span><span style="color: #008000">将当前时间格式化，2016/11/3 下午4:21:03，浏览器有的显示不同</span></pre>
</div>
<p align="left"><span style="color: #ff0000"><strong><strong>toString()<strong><strong>方法，格式：Thu Nov 03 2016 16:23:22 GMT+0800，返回国际时间格式</strong></strong></strong></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span> Date();   <span style="color: #008000">//</span><span style="color: #008000">获取系统当前时间</span>
alert(box.toString()); <span style="color: #008000">//</span><span style="color: #008000">将当前时间格式化，Thu Nov 03 2016 16:23:22 GMT+0800，给直接Date()一样，说明默认调用了toString()方法</span></pre>
</div>
<p align="left"><span style="color: #ff0000"><strong><strong>valueOf()<strong><strong>方法，格式：1478162137197，返回毫秒数</strong></strong></strong></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span> Date();   <span style="color: #008000">//</span><span style="color: #008000">获取系统当前时间</span>
alert(box.valueOf()); <span style="color: #008000">//</span><span style="color: #008000">将当前时间格式化，1478162137197，返回毫秒数</span></pre>
</div>
<p align="left"><strong>PS：这两个方法在不同浏览器显示的效果又不一样，但不用担心，这两个方法只是在调试比较有用，在显示时间和日期上，没什么价值。valueOf()方法显示毫秒数。</strong></p>
<p align="left">&nbsp;</p>
<p align="left"><span style="color: #ff0000"><strong>三．</strong><strong>日期格式化方法</strong></span></p>
<p align="left"><span style="color: #000000"><strong>Date类型还有一些专门用于将日期格式化为字符串的方法</strong></span></p>
<p align="left"><span style="color: #ff0000"><strong>toDateString()以特定的格式显示星期几、月、日和年/Thu Nov 03 2016</strong></span></p>
<p align="left"><span style="color: #ff0000"><strong>toTimeString()以特定的格式显示时、分、秒和时区/16:45:47 GMT+0800</strong></span></p>
<p align="left"><span style="color: #ff0000"><strong>toLocaleDateString()以特定地区格式显示、月、日和年/2016/11/3</strong></span></p>
<p align="left"><span style="color: #ff0000"><strong>toLocaleTimeString()以特定地区格式显示时、分、秒和时区/下午4:49:03</strong></span></p>
<p align="left"><span style="color: #ff0000"><strong>toUTCString()以特定的格式显示完整的UTC日期。/Thu, 03 Nov 2016 08:49:53 GMT</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.toDateString());                </span><span style="color: #008000">//</span><span style="color: #008000">以特定的格式显示星期几、月、日和年/Thu Nov 03 2016</span>
alert(box.toTimeString());                <span style="color: #008000">//</span><span style="color: #008000">以特定的格式显示时、分、秒和时区/16:45:47 GMT+0800</span>
alert(box.toLocaleDateString());            <span style="color: #008000">//</span><span style="color: #008000">以特定地区格式显示、月、日和年/2016/11/3</span>
alert(box.toLocaleTimeString());            <span style="color: #008000">//</span><span style="color: #008000">以特定地区格式显示时、分、秒和时区/下午4:49:03</span>
alert(box.toUTCString());                <span style="color: #008000">//</span><span style="color: #008000">以特定的格式显示完整的UTC日期。/Thu, 03 Nov 2016 08:49:53 GMT</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>四.组件方法</strong></span></p>
<p align="left"><strong>组件方法，是为我们单独获取你想要的各种时间/日期而提供的方法。需要注意的时候，这些方法中，有带UTC的，有不带UTC的。UTC日期指的是在没有时区偏差的情况下的日期值。</strong></p>
<p align="left"><span style="color: #0000ff"><strong>带<strong>UTC的和不带<strong>UTC的相差8个小时</strong></strong></strong></span></p>
<p align="left"><span style="color: #ff0000"><strong><strong><strong>getTime()获取日期的毫秒数，和valueOf()返回一致/1478163539545</strong></strong></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.getTime());                    </span><span style="color: #008000">//</span><span style="color: #008000">获取日期的毫秒数，和valueOf()返回一致/1478163539545</span></pre>
</div>
<p><span style="color: #ff0000"><strong>setTime()以毫秒数设置日期，会改变整个日期/1478163539545</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.setTime(</span>1478163539545));                    <span style="color: #008000">//</span><span style="color: #008000">以毫秒数设置日期，会改变整个日期/1478163539545</span></pre>
</div>
<p><span style="color: #ff0000"><strong>getFullYear()获取四位年份/2016</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.getFullYear());                    </span><span style="color: #008000">//</span><span style="color: #008000">获取四位年份/2016</span></pre>
</div>
<p><span style="color: #ff0000"><strong>setFullYear()设置四位年份，返回的是毫秒数</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.setFullYear(</span>2012));                <span style="color: #008000">//</span><span style="color: #008000">设置四位年份，返回的是毫秒数/1351935497504</span></pre>
</div>
<p><span style="color: #ff0000"><strong>getMonth()获取月份，没指定月份，从0开始算起/11</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.getMonth()</span>+1);                    <span style="color: #008000">//</span><span style="color: #008000">获取月份，没指定月份，从0开始算起/11</span></pre>
</div>
<p><span style="color: #ff0000"><strong>setMonth()设置月份/返回毫秒1480758520312</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.setMonth(</span>11));                    <span style="color: #008000">//</span><span style="color: #008000">设置月份/返回毫秒1480758520312</span></pre>
</div>
<p><span style="color: #ff0000"><strong>getDate()获取日期3</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.getDate());                    </span><span style="color: #008000">//</span><span style="color: #008000">获取日期3</span></pre>
</div>
<p><span style="color: #ff0000"><strong>setDate()设置日期，返回毫秒数/1478598717254</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.setDate(</span>8));                    <span style="color: #008000">//</span><span style="color: #008000">设置日期，返回毫秒数/1478598717254</span></pre>
</div>
<p><span style="color: #ff0000"><strong>getDay()返回星期几，0表示星期日，6表示星期六</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.getDay());                    </span><span style="color: #008000">//</span><span style="color: #008000">返回星期几，0表示星期日，6表示星期六</span></pre>
</div>
<p><span style="color: #ff0000"><strong>setDay()设置星期几返回毫秒数</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.setDay());                    </span><span style="color: #008000">//</span><span style="color: #008000">设置星期几</span></pre>
</div>
<p><span style="color: #ff0000"><strong>getHours()返回时18</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.getHours());                    </span><span style="color: #008000">//</span><span style="color: #008000">返回时18</span></pre>
</div>
<p><span style="color: #ff0000"><strong>setHours()设置时返回毫秒1478145765552</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.setHours(</span>12));                    <span style="color: #008000">//</span><span style="color: #008000">设置时返回毫秒1478145765552</span></pre>
</div>
<p><span style="color: #ff0000"><strong>getMinutes()返回分钟/4</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.getMinutes());                    </span><span style="color: #008000">//</span><span style="color: #008000">返回分钟/4</span></pre>
</div>
<p><span style="color: #ff0000"><strong>setMinutes()设置分钟返回毫秒/1478168523941</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.setMinutes(</span>22));                <span style="color: #008000">//</span><span style="color: #008000">设置分钟返回毫秒/1478168523941</span></pre>
</div>
<p><span style="color: #ff0000"><strong>getSeconds()返回秒数</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.getSeconds());                    </span><span style="color: #008000">//</span><span style="color: #008000">返回秒数</span></pre>
</div>
<p><span style="color: #ff0000"><strong>setSeconds()设置秒数返回毫秒</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.setSeconds(</span>44));                <span style="color: #008000">//</span><span style="color: #008000">设置秒数返回毫秒</span></pre>
</div>
<p><span style="color: #ff0000"><strong>getMilliseconds()返回毫秒数</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.getMilliseconds());                </span><span style="color: #008000">//</span><span style="color: #008000">返回毫秒数607</span></pre>
</div>
<p><span style="color: #ff0000"><strong>setMilliseconds()设置毫秒数</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.setMilliseconds(</span>123));                <span style="color: #008000">//</span><span style="color: #008000">设置毫秒数</span></pre>
</div>
<p><span style="color: #ff0000"><strong>getTimezoneOffset()返回本地时间和UTC时间相差的分钟数/-480</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.getTimezoneOffset());            </span><span style="color: #008000">//</span><span style="color: #008000">返回本地时间和UTC时间相差的分钟数/-480</span></pre>
</div>
<p align="left"><strong>PS：以上方法除了getTimezoneOffset()，其他都具有UTC功能，例如setDate()及getDate()获取星期几，那么就会有setUTCDate()及getUTCDate()。表示世界协调时间。&nbsp; </strong></p>
<p align="left"><strong><span style="color: #0000ff">也就是除了<strong>getTimezoneOffset()外，其他方法都有UTC功能，<strong><strong>UTC<strong>表示世界协调时间，与我们的时间相差8个小时</strong></strong></strong></strong>&nbsp;，要使用UTC功能在方法里加上UTC即可</span>&nbsp; 如：</strong></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.getUTCHours());                    </span><span style="color: #008000">//</span><span style="color: #008000">获取UTC时间</span></pre>
</div>
<p><span style="color: #ff0000"><strong>用组件方式组合完整的时间【常用】</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">var</span> box = <span style="color: #0000ff">new</span><span style="color: #000000"> Date();
alert(box.getFullYear()</span>+'-'+(box.getMonth()+1)+'-'+box.getDate()+' '+box.getHours()+':'+box.getMinutes()+':'+<span style="color: #000000">box.getSeconds());
</span><span style="color: #008000">//</span><span style="color: #008000">返回2016-11-3 18:40:22</span></pre>
</div>
<p>&nbsp;</p></div>