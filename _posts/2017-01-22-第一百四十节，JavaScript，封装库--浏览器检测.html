第一百四十节，JavaScript，封装库--浏览器检测


			<div id="cnblogs_post_body" class="blogpost-body"><p><span style="color: #0000ff"><strong>JavaScript，封装库--浏览器检测</strong></span></p>
<p><span style="color: #0000ff"><strong>在函数库编写一个，浏览器检测对象</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">/*</span><span style="color: #008000">* sys浏览器检测对象，对象下有两个属性，liu_lan_qi属性和xi_tong属性
 * liu_lan_qi属性，检测浏览器名称和版本号，如：alert(sys.liu_lan_qi);
 * xi_tong属性，检测浏览器运行环境，如：alert(sys.xi_tong);
 *</span><span style="color: #008000">*/</span><span style="color: #000000">
(</span><span style="color: #0000ff">function</span> () {                       <span style="color: #008000">//</span><span style="color: #008000">闭包，自我执行</span>
    window.sys = {};                  <span style="color: #008000">//</span><span style="color: #008000">全局变量对象，保存浏览器信息</span>
    <span style="color: #0000ff">var</span> ua = navigator.userAgent.toLowerCase();           <span style="color: #008000">//</span><span style="color: #008000">获取浏览器信息，并转化成小写</span>
    <span style="color: #0000ff">var</span> s = [];                                           <span style="color: #008000">//</span><span style="color: #008000">浏览器信息数组</span>
    <span style="color: #008000">/*</span><span style="color: #008000">*判断IE浏览器*</span><span style="color: #008000">*/</span>
    <span style="color: #0000ff">if</span> ((/msie ([\d.]+)/).test(ua)) {                      <span style="color: #008000">//</span><span style="color: #008000">IE10以下判断字段为：msie x版本号</span>
        s = ua.match(/msie ([\d.]+)/);                    <span style="color: #008000">//</span><span style="color: #008000">如果有获取到msie x版本号返回数组</span>
        sys.liu_lan_qi = '浏览器为IE：' + s[1];            <span style="color: #008000">//</span><span style="color: #008000">向sys对象添加liu_lan_qi属性，属性值等于获取到的数组第二个元素</span>
    } <span style="color: #0000ff">else</span> <span style="color: #0000ff">if</span> ((/trident/).test(ua)) {                      <span style="color: #008000">//</span><span style="color: #008000">ie10以上判断字段为：trident</span>
        s = ua.match(/rv:([\d.]+)/);                      <span style="color: #008000">//</span><span style="color: #008000">如果有获取到trident字段返回数组</span>
        sys.liu_lan_qi = '浏览器为IE：' + s[1<span style="color: #000000">];
    }
    </span><span style="color: #008000">/*</span><span style="color: #008000">*判断火狐浏览器*</span><span style="color: #008000">*/</span>
    <span style="color: #0000ff">if</span> ((/firefox\/([\d.]+)/).test(ua)) {                  <span style="color: #008000">//</span><span style="color: #008000">火狐判断字段为：firefox</span>
        s = ua.match(/firefox\/([\d.]+)/<span style="color: #000000">);
        sys.liu_lan_qi </span>= '浏览器为firefox：' + s[1<span style="color: #000000">];
    }
    </span><span style="color: #008000">/*</span><span style="color: #008000">*判断谷歌浏览器*</span><span style="color: #008000">*/</span>
    <span style="color: #0000ff">if</span> ((/chrome\/([\d.]+)/).test(ua)) {                    <span style="color: #008000">//</span><span style="color: #008000">谷歌判断字段为：chrome</span>
        s = ua.match(/chrome\/([\d.]+)/<span style="color: #000000">);
        sys.liu_lan_qi </span>= '浏览器为chrome：' + s[1<span style="color: #000000">];
    }
    </span><span style="color: #008000">/*</span><span style="color: #008000">*判断Opera浏览器*</span><span style="color: #008000">*/</span>
    <span style="color: #0000ff">if</span> ((/opera\/.*version\/([\d.]+)/).test(ua)) {         <span style="color: #008000">//</span><span style="color: #008000">谷歌判断字段为：opera 与 version</span>
        s = ua.match(/opera\/.*version\/([\d.]+)/<span style="color: #000000">);
        sys.liu_lan_qi </span>= '浏览器为Opera：' + s[1<span style="color: #000000">];
    }
    </span><span style="color: #008000">/*</span><span style="color: #008000">*判断Opera浏览器*</span><span style="color: #008000">*/</span>
    <span style="color: #0000ff">if</span> ((/version\/([\d.]+).*safari/).test(ua)) {         <span style="color: #008000">//</span><span style="color: #008000">谷歌判断字段为：version 与 safari</span>
        s = ua.match(/version\/([\d.]+).*safari/<span style="color: #000000">);
        sys.liu_lan_qi </span>= '浏览器为Opera：' + s[1<span style="color: #000000">];
    }
    </span><span style="color: #008000">/*</span><span style="color: #008000">*判断系统*</span><span style="color: #008000">*/</span>
    <span style="color: #0000ff">if</span><span style="color: #000000"> (Boolean(navigator.platform)) {
        sys.xi_tong </span>= '环境系统为：' +<span style="color: #000000"> navigator.platform;
    } </span><span style="color: #0000ff">else</span><span style="color: #000000"> {
        alert(</span>"无法检测到环境系统"<span style="color: #000000">)
    }
})();</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>前台js代码</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #000000">    alert(sys.liu_lan_qi);
    alert(sys.xi_tong);</span></pre>
</div>
<p>&nbsp;</p></div>