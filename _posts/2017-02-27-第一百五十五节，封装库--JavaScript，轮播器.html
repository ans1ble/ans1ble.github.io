第一百五十五节，封装库--JavaScript，轮播器


			<div id="cnblogs_post_body" class="blogpost-body"><p><span style="color: #0000ff"><strong>封装库--JavaScript，轮播器</strong></span></p>
<p><span style="color: #0000ff"><strong><img src="https://images2015.cnblogs.com/blog/955761/201702/955761-20170227204133001-471785456.png" alt=""></strong></span></p>
<p>&nbsp;</p>
<p>html</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">id</span><span style="color: #0000ff">="banner"</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;</span><span style="color: #800000">img </span><span style="color: #ff0000">src</span><span style="color: #0000ff">="img/banner1.jpg"</span><span style="color: #ff0000"> alt</span><span style="color: #0000ff">="轮播器第一张"</span> <span style="color: #0000ff">/&gt;</span>
        <span style="color: #0000ff">&lt;</span><span style="color: #800000">img </span><span style="color: #ff0000">src</span><span style="color: #0000ff">="img/banner2.jpg"</span><span style="color: #ff0000"> alt</span><span style="color: #0000ff">="轮播器第二张"</span> <span style="color: #0000ff">/&gt;</span>
        <span style="color: #0000ff">&lt;</span><span style="color: #800000">img </span><span style="color: #ff0000">src</span><span style="color: #0000ff">="img/banner3.jpg"</span><span style="color: #ff0000"> alt</span><span style="color: #0000ff">="轮播器第三张"</span> <span style="color: #0000ff">/&gt;</span>
        <span style="color: #0000ff">&lt;</span><span style="color: #800000">ul</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">li</span><span style="color: #0000ff">&gt;</span>●<span style="color: #0000ff">&lt;/</span><span style="color: #800000">li</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">li</span><span style="color: #0000ff">&gt;</span>●<span style="color: #0000ff">&lt;/</span><span style="color: #800000">li</span><span style="color: #0000ff">&gt;</span>
            <span style="color: #0000ff">&lt;</span><span style="color: #800000">li</span><span style="color: #0000ff">&gt;</span>●<span style="color: #0000ff">&lt;/</span><span style="color: #800000">li</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;/</span><span style="color: #800000">ul</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;</span><span style="color: #800000">span</span><span style="color: #0000ff">&gt;&lt;/</span><span style="color: #800000">span</span><span style="color: #0000ff">&gt;</span>
        <span style="color: #0000ff">&lt;</span><span style="color: #800000">strong</span><span style="color: #0000ff">&gt;&lt;/</span><span style="color: #800000">strong</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span></pre>
</div>
<p>css</p>
<div class="cnblogs_code">
<pre><span style="color: #008000">/*</span><span style="color: #008000">轮播图</span><span style="color: #008000">*/</span><span style="color: #800000">
#banner </span>{<span style="color: #ff0000">
    width</span>:<span style="color: #0000ff">900px</span>;<span style="color: #ff0000">
    height</span>:<span style="color: #0000ff">150px</span>;<span style="color: #ff0000">
    float</span>:<span style="color: #0000ff">left</span>;<span style="color: #ff0000">
    margin</span>:<span style="color: #0000ff">10px 0</span>;<span style="color: #ff0000">
    position</span>:<span style="color: #0000ff">relative</span>;<span style="color: #ff0000">
    overflow</span>:<span style="color: #0000ff"> hidden</span>;
}<span style="color: #800000">
#banner img </span>{<span style="color: #ff0000">
    display</span>:<span style="color: #0000ff">block</span>;<span style="color: #ff0000">
    position</span>:<span style="color: #0000ff">absolute</span>;<span style="color: #ff0000">
    top</span>:<span style="color: #0000ff">0</span>;<span style="color: #ff0000">
    left</span>:<span style="color: #0000ff">0</span>;<span style="color: #ff0000">
    z-index</span>:<span style="color: #0000ff">1
</span>}<span style="color: #800000">
#banner ul </span>{<span style="color: #ff0000">
    position</span>:<span style="color: #0000ff">absolute</span>;<span style="color: #ff0000">
    top</span>:<span style="color: #0000ff">128px</span>;<span style="color: #ff0000">
    left</span>:<span style="color: #0000ff">420px</span>;<span style="color: #ff0000">
    z-index</span>:<span style="color: #0000ff">4</span>;
}<span style="color: #800000">
#banner ul li </span>{<span style="color: #ff0000">
    float</span>:<span style="color: #0000ff">left</span>;<span style="color: #ff0000">
    padding</span>:<span style="color: #0000ff">0 5px</span>;<span style="color: #ff0000">
    font-size</span>:<span style="color: #0000ff">16px</span>;<span style="color: #ff0000">
    color</span>:<span style="color: #0000ff">#999</span>;<span style="color: #ff0000">
    cursor</span>:<span style="color: #0000ff">pointer</span>;
}<span style="color: #800000">
#banner span </span>{<span style="color: #ff0000">
    width</span>:<span style="color: #0000ff">900px</span>;<span style="color: #ff0000">
    height</span>:<span style="color: #0000ff">25px</span>;<span style="color: #ff0000">
    position</span>:<span style="color: #0000ff">absolute</span>;<span style="color: #ff0000">
    top</span>:<span style="color: #0000ff">125px</span>;<span style="color: #ff0000">
    left</span>:<span style="color: #0000ff">0</span>;<span style="color: #ff0000">
    background</span>:<span style="color: #0000ff">#333</span>;<span style="color: #ff0000">
    opacity</span>:<span style="color: #0000ff">0.3</span>;<span style="color: #ff0000">
    filter</span>:<span style="color: #0000ff">alpha(opacity=30)</span>;<span style="color: #ff0000">
    z-index</span>:<span style="color: #0000ff">3</span>;
}<span style="color: #800000">
#banner strong </span>{<span style="color: #ff0000">
    position</span>:<span style="color: #0000ff">absolute</span>;<span style="color: #ff0000">
    top</span>:<span style="color: #0000ff">130px</span>;<span style="color: #ff0000">
    left</span>:<span style="color: #0000ff">10px</span>;<span style="color: #ff0000">
    color</span>:<span style="color: #0000ff">#fff</span>;<span style="color: #ff0000">
    z-index</span>:<span style="color: #0000ff">4</span>;
}</pre>
</div>
<p>前台js</p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">轮播器初始化</span>
    $('#banner img').shzh_tou_ming_du(0);                                     <span style="color: #008000">//</span><span style="color: #008000">将全部图片透明度设置成0</span>
    $('#banner img').guo_lv_jie_dian(0).shzh_tou_ming_du(100);                <span style="color: #008000">//</span><span style="color: #008000">将第一张图片透明度设置成100</span>
    $('#banner ul li').guo_lv_jie_dian(0).c_css('color','#333');              <span style="color: #008000">//</span><span style="color: #008000">将第一个li改变成选择颜色</span>
    $('#banner strong').wen_ben($('#banner img').guo_lv_jie_dian(0).qh_shu_xing_zhi('alt'));  <span style="color: #008000">//</span><span style="color: #008000">将第一张图片的alt属性值赋值给strong</span>

    <span style="color: #008000">//</span><span style="color: #008000">轮播器计数器</span>
    <span style="color: #0000ff">var</span> banner_index = 1<span style="color: #000000">;

    </span><span style="color: #008000">//</span><span style="color: #008000">轮播器的种类</span>
    <span style="color: #0000ff">var</span> banner_type = 1;               <span style="color: #008000">//</span><span style="color: #008000">1表示透明度轮播器，2表示上下滚动轮播器</span>

    <span style="color: #008000">//</span><span style="color: #008000">自动轮播器</span>
    <span style="color: #0000ff">var</span> banner_timer = setInterval(befang_fn, 3000);                      <span style="color: #008000">//</span><span style="color: #008000">创建定时器</span>

    <span style="color: #008000">//</span><span style="color: #008000">手动轮播器</span>
    $('#banner ul li').shu_biao_yi_ru_yi_chu(<span style="color: #0000ff">function</span> () {                <span style="color: #008000">//</span><span style="color: #008000">鼠标移入移出事件</span>
        clearInterval(banner_timer);                                      <span style="color: #008000">//</span><span style="color: #008000">清除定时器</span>
        <span style="color: #0000ff">if</span> ($(<span style="color: #0000ff">this</span>).c_css('color') != 'rgb(51, 51, 51)' &amp;&amp; $(<span style="color: #0000ff">this</span>).c_css('color') != '#333'<span style="color: #000000">){
            befang(</span><span style="color: #0000ff">this</span>,banner_index == 0 ? $('#banner ul li').jd_length() -1 : banner_index -1<span style="color: #000000">);
        }
    },</span><span style="color: #0000ff">function</span><span style="color: #000000"> () {
        banner_index </span>= $(<span style="color: #0000ff">this</span>).hq_suo_yin() + 1<span style="color: #000000">;
        banner_timer </span>= setInterval(befang_fn, 3000<span style="color: #000000">);
    });

    </span><span style="color: #0000ff">function</span><span style="color: #000000"> befang(obj,prev) {


        $(</span>'#banner ul li').c_css('color', '#999');                <span style="color: #008000">//</span><span style="color: #008000">将全部li改变成初始颜色</span>
        $(obj).c_css('color', '#333');         <span style="color: #008000">//</span><span style="color: #008000">根据索引改变对应的li颜色</span>
        $('#banner strong').wen_ben($('#banner img').guo_lv_jie_dian($(obj).hq_suo_yin()).qh_shu_xing_zhi('alt'));  <span style="color: #008000">//</span><span style="color: #008000">将对应图片的alt属性值赋值给strong</span>

        <span style="color: #0000ff">if</span> (banner_type == 1<span style="color: #000000">) {
            $(</span>'#banner img'<span style="color: #000000">).guo_lv_jie_dian(prev).yi_dong_tou_ming({
                attr: </span>'o'<span style="color: #000000">,
                target: </span>0<span style="color: #000000">,
                t: </span>100<span style="color: #000000">,
                step: </span>2<span style="color: #000000">
            }).c_css(</span>'z-index', 1<span style="color: #000000">);

            $(</span>'#banner img'<span style="color: #000000">).guo_lv_jie_dian($(obj).hq_suo_yin()).yi_dong_tou_ming({
                attr: </span>'o'<span style="color: #000000">,
                target: </span>100<span style="color: #000000">,
                t: </span>100<span style="color: #000000">,
                step: </span>2<span style="color: #000000">
            }).c_css(</span>'z-index', 2<span style="color: #000000">);
        }</span><span style="color: #0000ff">else</span> <span style="color: #0000ff">if</span>(banner_type == 2<span style="color: #000000">){
            $(</span>'#banner img'<span style="color: #000000">).guo_lv_jie_dian(prev).yi_dong_tou_ming({
                attr: </span>'y'<span style="color: #000000">,
                target: </span>150<span style="color: #000000">,
                t: </span>100<span style="color: #000000">,
                step: </span>2<span style="color: #000000">
            }).c_css(</span>'z-index', 1).shzh_tou_ming_du(100<span style="color: #000000">);

            $(</span>'#banner img'<span style="color: #000000">).guo_lv_jie_dian($(obj).hq_suo_yin()).yi_dong_tou_ming({
                attr: </span>'y'<span style="color: #000000">,
                target: </span>0<span style="color: #000000">,
                t: </span>100<span style="color: #000000">,
                step: </span>2<span style="color: #000000">
            }).c_css(</span>'top','-150px').c_css('z-index', 2).shzh_tou_ming_du(100<span style="color: #000000">);
        }
    }

    </span><span style="color: #0000ff">function</span><span style="color: #000000"> befang_fn() {
        </span><span style="color: #0000ff">if</span> (banner_index &gt;= $('#banner ul li').jd_length()) banner_index = 0;   <span style="color: #008000">//</span><span style="color: #008000">计数器数值大于等于轮播图总量是，计数器为0</span>
        befang($('#banner ul li').guo_lv_jie_dian(banner_index).sh_jd(),banner_index == 0 ? $('#banner ul li').jd_length() -1 : banner_index -1<span style="color: #000000">);
        banner_index </span>++<span style="color: #000000">;
    }</span></pre>
</div>
<p>&nbsp;首先引入封装库</p></div>