第二百八十节，MySQL数据库-外键链表之一对多，多对多


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>MySQL数据库-外键链表之一对多，多对多</strong></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong><strong>外键链表之一对多</strong></strong></span></p>
<p><span style="color: #ff0000"><strong>外键链表：就是<span style="color: #0000ff">a表通过外键连接b表的主键</span>，建立链表关系，需要注意的是a表外键字段类型，必须与要关联的<strong>b表的主键字段类型一致，否则无法创建索引</strong></strong></span></p>
<p><span style="color: #ff0000"><strong><strong>一对多：就是b表的某一个字段值对应a表外键里的多个值，前提是a表要与b表链表</strong></strong></span></p>
<p><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170606130237825-180304653.png" alt=""></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>用Navicat 软件可视化外键链表</strong></span></p>
<p><span style="color: #ff0000"><strong>　　1、a表里创建外键连接b表的主键，<span style="color: #0000ff">首先检查a表里要设置外键的字段、和b表里的主键字段数据类型是否一致，两者数据类型必须一致，不然无法建立索引【重点】</span></strong></span></p>
<p><span style="color: #ff0000"><strong>　　2、<strong>Navicat 软件可视化打开a表，设计表-外键里设置</strong></strong></span></p>
<p><span style="color: #ff0000"><strong><strong><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170606145351481-237206596.png" alt=""></strong></strong></span></p>
<p>　　<span style="color: #ff0000"><strong>3、设置后a表和b表就建立了外键链表，可以在a表的外键字段看b表的主键字段，说明他们两者的链表关系建立</strong></span></p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170606145946372-51124079.png" alt=""></strong></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>外键链表约束</strong></span></p>
<p><span style="color: #ff0000"><strong>a表和b表链表后，两表之间建立了链表关系，a表受b表约束，也就是当a表添加或者修改一条数据时、这条数据的外键字段值如果是b表主键字段不存在的，将无法添加，会报错【重点】</strong></span></p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170606151335762-1922274591.png" alt=""></strong></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>sql语句创建表并且设置外键链表</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>KEY 外键名称 (外键字段), #设置外键名称</strong></span><br><span style="color: #ff0000"><strong>CONSTRAINT 外键名称 FOREIGN KEY (外键字段) REFERENCES 连接表名称 (连接表主键字段) #设置外键链表</strong></span></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: #008080">--</span><span style="color: #008080"> CREATE TABLE `usr` (</span><span style="color: #008080">
--</span><span style="color: #008080">   `id` int(20) NOT NULL AUTO_INCREMENT COMMENT 'id',</span><span style="color: #008080">
--</span><span style="color: #008080">   `yhm` char(255) NOT NULL COMMENT '用户名',</span><span style="color: #008080">
--</span><span style="color: #008080">   `xb` char(255) NOT NULL COMMENT '性别',</span><span style="color: #008080">
--</span><span style="color: #008080">   `nl` int(255) NOT NULL COMMENT '年龄',</span><span style="color: #008080">
--</span><span style="color: #008080">   `fzu` int(255) NOT NULL COMMENT '分组',</span><span style="color: #008080">
--</span><span style="color: #008080">   PRIMARY KEY (`id`),</span><span style="background-color: #ffff00"><span style="color: #008080">
--</span><span style="color: #008080">   KEY 外键名称 (外键字段),  #设置外键名称</span><span style="color: #008080">
--</span><span style="color: #008080">   CONSTRAINT 外键名称 FOREIGN KEY (外键字段) REFERENCES 连接表名称 (连接表主键字段) #设置外键链表</span></span><span style="color: #008080">
--</span><span style="color: #008080"> ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='用户表-连表usr_fzu';</span>


<span style="color: #0000ff">CREATE</span> <span style="color: #0000ff">TABLE</span><span style="color: #000000"> `usr` (
  `id` </span><span style="color: #0000ff">int</span>(<span style="color: #800000; font-weight: bold">20</span>) <span style="color: #808080">NOT</span> <span style="color: #0000ff">NULL</span> AUTO_INCREMENT COMMENT <span style="color: #ff0000">'</span><span style="color: #ff0000">id</span><span style="color: #ff0000">'</span><span style="color: #000000">,
  `yhm` </span><span style="color: #0000ff">char</span>(<span style="color: #800000; font-weight: bold">255</span>) <span style="color: #808080">NOT</span> <span style="color: #0000ff">NULL</span> COMMENT <span style="color: #ff0000">'</span><span style="color: #ff0000">用户名</span><span style="color: #ff0000">'</span><span style="color: #000000">,
  `xb` </span><span style="color: #0000ff">char</span>(<span style="color: #800000; font-weight: bold">255</span>) <span style="color: #808080">NOT</span> <span style="color: #0000ff">NULL</span> COMMENT <span style="color: #ff0000">'</span><span style="color: #ff0000">性别</span><span style="color: #ff0000">'</span><span style="color: #000000">,
  `nl` </span><span style="color: #0000ff">int</span>(<span style="color: #800000; font-weight: bold">255</span>) <span style="color: #808080">NOT</span> <span style="color: #0000ff">NULL</span> COMMENT <span style="color: #ff0000">'</span><span style="color: #ff0000">年龄</span><span style="color: #ff0000">'</span><span style="color: #000000">,
  `fzu` </span><span style="color: #0000ff">int</span>(<span style="color: #800000; font-weight: bold">255</span>) <span style="color: #808080">NOT</span> <span style="color: #0000ff">NULL</span> COMMENT <span style="color: #ff0000">'</span><span style="color: #ff0000">分组</span><span style="color: #ff0000">'</span><span style="color: #000000">,
  </span><span style="color: #0000ff">PRIMARY</span> <span style="color: #0000ff">KEY</span><span style="color: #000000"> (`id`),
  </span><span style="background-color: #ffff00"><span style="color: #0000ff">KEY</span> `usr<span style="color: #808080">-</span><span style="color: #000000">usr_fzu` (`fzu`),
  </span><span style="color: #0000ff">CONSTRAINT</span> `usr<span style="color: #808080">-</span>usr_fzu` <span style="color: #0000ff">FOREIGN</span> <span style="color: #0000ff">KEY</span> (`fzu`) <span style="color: #0000ff">REFERENCES</span></span><span style="color: #000000"><span style="background-color: #ffff00"> `usr_fzu` (`id`)</span>
) ENGINE</span><span style="color: #808080">=</span>InnoDB <span style="color: #0000ff">DEFAULT</span> CHARSET<span style="color: #808080">=</span>utf8 COMMENT<span style="color: #808080">=</span><span style="color: #ff0000">'</span><span style="color: #ff0000">用户表-连表usr_fzu</span><span style="color: #ff0000">'</span>;</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong><strong>sql语句删除表的外键链表</strong></strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><strong>ALTER TABLE 删除外键的表名称 DROP FOREIGN KEY 创建外键时的外键名称;#删除外键</strong></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008080">--</span><span style="color: #008080"> ALTER TABLE 删除外键的表名称 DROP FOREIGN KEY 创建外键时的外键名称;</span>

<span style="background-color: #ffff00"><span style="color: #0000ff">ALTER</span> <span style="color: #0000ff">TABLE</span> usr <span style="color: #0000ff">DROP</span> <span style="color: #0000ff">FOREIGN</span> <span style="color: #0000ff">KEY</span> usr_usr_fzu;</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>sql语句创建表的外键链表</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong>ALTER TABLE 要创建外键的表 ADD CONSTRAINT 设置外键名称 FOREIGN KEY (外键字段) REFERENCES 要连接的表名称 (要连接表的主键id);#创建外键</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008080">--</span><span style="color: #008080"> ALTER TABLE 要创建外键的表 ADD CONSTRAINT 设置外键名称 FOREIGN KEY (外键字段) REFERENCES 要连接的表名称 (要连接表的主键id);</span>


<span style="background-color: #ffff00"><span style="color: #0000ff">ALTER</span> <span style="color: #0000ff">TABLE</span> usr <span style="color: #0000ff">ADD</span> <span style="color: #0000ff">CONSTRAINT</span> usr_usr_fzu <span style="color: #0000ff">FOREIGN</span> <span style="color: #0000ff">KEY</span> (fzu) <span style="color: #0000ff">REFERENCES</span> usr_fzu (id);</span></pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>sql语句连表查询</strong></span></p>
<p><span style="color: #ff0000"><strong>LEFT JOIN：左连接的意思</strong></span><br><span style="color: #ff0000"><strong>ON：接通</strong></span><br><span style="color: #ff0000"><strong>SELECT 显示字段 FROM 外键表 LEFT JOIN 连接表 ON 外键表.外键字段 = 连接表.连接表主键;  <span style="color: #0000ff">#链表查询，将连接表的信息组合到外键表一起显示出来</span></strong></span></p>
<p><span style="color: #ff0000"><strong>a表 LEFT JOIN b表 ON a表.外键字段 = b表.主键字段</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008080">--</span><span style="color: #008080"> LEFT JOIN：左连接的意思</span><span style="color: #008080">
--</span><span style="color: #008080"> ON：接通</span><span style="color: #008080">
--</span><span style="color: #008080"> SELECT 显示字段 FROM 外键表 LEFT JOIN 连接表 ON 外键表.外键字段 = 连接表.连接表主键;  #链表查询，将连接表的信息组合到外键表一起显示出来</span>
<span style="color: #008080">-- a表 LEFT JOIN b表 ON a表.外键字段 = b表.主键字段<br><br></span>
<span style="color: #0000ff">SELECT</span> <span style="color: #808080">*</span> <span style="color: #0000ff">FROM</span> <span style="background-color: #ffff00">usr <span style="color: #808080">LEFT</span> <span style="color: #808080">JOIN</span> usr_fzu <span style="color: #0000ff">ON</span> usr.fzu <span style="color: #808080">=</span> usr_fzu.id;</span></pre>
</div>
<p><span style="color: #0000ff"><strong>外键表</strong></span></p>
<p><span style="color: #0000ff"><strong><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170606182957059-981483085.png" alt=""></strong></span></p>
<p><span style="color: #0000ff"><strong>连接表</strong></span></p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170606183119356-1321476785.png" alt=""></strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #0000ff"><strong><strong>将连接表的信息组合到外键表一起显示出来</strong></strong></span></p>
<p>&nbsp;</p>
<p><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170606183415700-2093869195.png" alt=""></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>sql语句连表加<strong>WHERE</strong>条件查询</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong>a表 LEFT JOIN b表 ON a表.外键字段 = b表.主键字段 WHERE b表.字段 = '值';</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong>举例：查询a表的外键值、属于b表主键值对应的、某个字段值的所有数据</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffffff"><strong><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170606194520481-677911317.png" alt=""></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008080">--</span><span style="color: #008080"> a表 LEFT JOIN b表 ON a表.外键字段 = b表.主键字段 WHERE b表.字段 = '值';</span>

<span style="color: #0000ff">SELECT</span> <span style="color: #808080">*</span> <span style="color: #0000ff">FROM</span> <span style="background-color: #ffff00">usr <span style="color: #808080">LEFT</span> <span style="color: #808080">JOIN</span> usr_fzu <span style="color: #0000ff">ON</span> usr.fzu <span style="color: #808080">=</span> usr_fzu.id <span style="color: #0000ff">WHERE</span> usr_fzu.usr_fzu <span style="color: #808080">=</span> <span style="color: #ff0000">'</span><span style="color: #ff0000">A</span><span style="color: #ff0000">'</span></span>;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170606195159950-184795493.png" alt=""></p>
<p><span style="color: #0000ff"><strong>可以看到只查询了属于A的数据</strong></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>sql语句连表关键字说明</strong></span></p>
<p><span style="color: #ff0000"><strong>连表关键字有3种：</strong></span></p>
<p><span style="color: #ff0000"><strong>　　LEFT JOIN</strong></span><br><span style="color: #ff0000"><strong>　　RIGHT JOIN</strong></span><br><span style="color: #ff0000"><strong>　　INNER JOIN</strong></span></p>
<p><span style="color: #ff0000"><strong>使用方法：</strong></span></p>
<p><span style="color: #ff0000"><strong>　　<span style="color: #0000ff">a表</span> LEFT JOIN <span style="color: #0000ff">b表</span> ON <span style="color: #0000ff">a表.xx</span> = <span style="color: #0000ff">b表.xx</span></strong></span><br><span style="color: #ff0000"><strong>　　<span style="color: #0000ff">a表</span> RIGHT JOIN <span style="color: #0000ff">b表</span> ON <span style="color: #0000ff">a表.xx</span> = <span style="color: #0000ff">b表.xx</span></strong></span><br><span style="color: #ff0000"><strong>　　<span style="color: #0000ff">a表</span> INNER JOIN <span style="color: #0000ff">b表</span> ON <span style="color: #0000ff">a表.xx</span> = <span style="color: #0000ff">b表.xx</span></strong></span></p>
<p><span style="color: #ff0000; font-size: 18px; background-color: #ffff00"><strong><span style="color: #0000ff">注意：a表是外键表，b表是连接表</span></strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>它们连表之间的区别</strong></span></p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong><strong>　　</strong></strong><strong><strong>LEFT JOIN ：以</strong></strong><strong><strong><strong><strong>LEFT JOIN前面的表为主，前面的表所有数据都会显示</strong></strong></strong></strong></span></p>
<p><span style="color: #ff0000"><strong><strong><strong><strong>　　　　<strong>a表&nbsp;LEFT JOIN&nbsp;b表：以a表为主，只显示与a表有关联的b表数据</strong></strong></strong></strong></strong></span></p>
<p><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170606210858887-778134788.png" alt=""></p>
<p><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170606210958668-50817654.png" alt=""></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">SELECT</span> <span style="color: #808080">*</span> <span style="color: #0000ff">FROM</span> <span style="background-color: #ffcc99">usr</span> <span style="background-color: #ffff00"><span style="color: #808080">LEFT</span> <span style="color: #808080">JOIN</span></span> <span style="background-color: #ffcc99">usr_fzu</span> <span style="color: #0000ff">ON</span> usr.fzu <span style="color: #808080">=</span> usr_fzu.id;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170606211422715-978045430.png" alt=""></p>
<p><span style="color: #0000ff"><strong>可以看到b表里的usr_fzu字段的C、D没有显示</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><strong><strong><strong><strong>　　　　<strong><strong><strong><strong><strong>b表&nbsp;LEFT JOIN&nbsp;a表：以b表为主，b表里与a表无关联数据也会显示</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></span></p>
<p><span style="color: #ff0000"><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170606212228512-1764724000.png" alt=""></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">SELECT</span> <span style="color: #808080">*</span> <span style="color: #0000ff">FROM</span> <span style="background-color: #ffcc99">usr_fzu</span> <span style="background-color: #ffff00"><span style="color: #808080">LEFT</span> <span style="color: #808080">JOIN</span></span> <span style="background-color: #ffcc99">usr</span> <span style="color: #0000ff">ON</span> usr.fzu <span style="color: #808080">=</span> usr_fzu.id;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170606212551747-1614004025.png" alt=""></p>
<p><span style="color: #0000ff"><strong><strong>可以看到b表里的usr_fzu字段里与a表无关联的也显示了</strong></strong></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>　　　RIGHT JOIN：是以RIGHT JOIN后面的表为主，显示后面表的所有数据</strong></span></p>
<p><span style="color: #ff0000"><strong>　　　　a表&nbsp;LEFT JOIN&nbsp;b表：以b表为主</strong></span></p>
<p><span style="color: #ff0000"><strong>　　　　b表&nbsp;LEFT JOIN&nbsp;a表：以a表为主</strong></span></p>
<p><span style="color: #ff0000"><strong>　　　　<span style="color: #0000ff">以上面列子相同，就不在举例了</span></strong></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>　　INNER JOIN：不以哪个表为主，只要是两个表数据之间无关联的都不显示</strong></span></p>
<p><span style="color: #ff0000"><strong>　　　　a表&nbsp;LEFT JOIN&nbsp;b表：两个表数据之间无关联的都不显示</strong></span></p>
<p><span style="color: #ff0000"><strong>　　　　b表&nbsp;LEFT JOIN&nbsp;a表：两个表数据之间无关联的都不显示</strong></span></p>
<p><span style="color: #ff0000"><strong>　　　　<span style="color: #0000ff"><strong>以上面列子相同，就不在举例了</strong></span></strong></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>一张表两个外键链表</strong></span></p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170610145414231-1102983794.png" alt=""></strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170610145608559-1534012637.png" alt=""></strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170610145743403-141287227.png" alt=""></strong></span></p>
<p><span style="color: #ff0000"><strong>　　</strong></span></p>
<p><span style="color: #ff0000"><strong>　　<strong>一张表两个外键链表的查询</strong></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">SELECT</span>
    <span style="color: #808080">*</span>
<span style="color: #0000ff">FROM</span><span style="color: #000000">
    usr
</span><span style="color: #808080">LEFT</span> <span style="color: #808080">JOIN</span> usr_fzu <span style="color: #0000ff">ON</span> usr.usr_fzu_id <span style="color: #808080">=</span><span style="color: #000000"> usr_fzu.id
</span><span style="color: #808080">LEFT</span> <span style="color: #808080">JOIN</span> usr_yans <span style="color: #0000ff">ON</span> usr.usr_yans_id <span style="color: #808080">=</span> usr_yans.id;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170610150024153-1793684188.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong><strong>　　<strong><strong>一张表两个外键链表的WHERE条件查询</strong></strong></strong></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">SELECT</span>
    <span style="color: #808080">*</span>
<span style="color: #0000ff">FROM</span><span style="color: #000000">
    usr
</span><span style="color: #808080">LEFT</span> <span style="color: #808080">JOIN</span> usr_fzu <span style="color: #0000ff">ON</span> usr.usr_fzu_id <span style="color: #808080">=</span><span style="color: #000000"> usr_fzu.id
</span><span style="color: #808080">LEFT</span> <span style="color: #808080">JOIN</span> usr_yans <span style="color: #0000ff">ON</span> usr.usr_yans_id <span style="color: #808080">=</span><span style="color: #000000"> usr_yans.id
</span><span style="color: #008080">--</span><span style="color: #008080"> 链表查询，用户在usr_fzu.fzu = 'B' 并且在 usr_yans.yans = 'hong' 的用户</span>
<span style="color: #0000ff">WHERE</span> usr_fzu.fzu <span style="color: #808080">=</span> <span style="color: #ff0000">'</span><span style="color: #ff0000">B</span><span style="color: #ff0000">'</span> <span style="color: #808080">AND</span> usr_yans.yans <span style="color: #808080">=</span> <span style="color: #ff0000">'</span><span style="color: #ff0000">hong</span><span style="color: #ff0000">'</span></pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170610151307168-1384759240.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>重点：外键链表，无论是外键连接了几张表，其本质就是将外键连接的表组合到当前表成为一张表，来各种条件查询</strong></span></p>
<p><span style="color: #ff0000"><strong>重点：一般在链表查询字段、和链表取数据字段时，需要加上<span style="color: #0000ff">所操作的表名称.字段名称，如:usr_yans.yans（usr_yans表的yans字段）</span></strong></span></p>
<p><span style="color: #ff0000"><strong>字典表：外键连接的表一般被称为字典表</strong></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>外键链表之多对多</strong></span></p>
<p><span style="color: #ff0000"><strong>1、多对多是通过一个关系表外键链表，将多个表建立关系</strong></span><br><span style="color: #ff0000"><strong>2、可以是1条数据对应多条数据，或者多条数据对应1条数据</strong></span><br><span style="color: #ff0000"><strong>3、也可以是多条数据对应多条数据</strong></span></p>
<p><span style="color: #0000ff"><strong>举例：创建男女恋爱关系多对多</strong></span></p>
<p><span style="color: #0000ff"><strong>一个男人可能跟多个女人谈过恋爱，</strong><strong>一个女人可能跟多个男人谈过恋爱，通过链表多对多统计出某个男人有跟哪些女人谈过恋爱</strong></span></p>
<p><span style="color: #0000ff"><strong>1、建立一张表存放男人信息</strong></span></p>
<p><span style="color: #0000ff"><strong>2、建立一张表存放女人信息</strong></span></p>
<p><span style="color: #0000ff"><strong>3、建立一张表外键连接这两张男女信息表，记录男女的恋爱关系</strong></span></p>
<p><span style="color: #0000ff"><strong><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170611104040622-1877823821.png" alt=""></strong></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>创建外键链表关系</strong></span></p>
<p><span style="color: #0000ff"><strong><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170611104713653-684698894.png" alt=""></strong></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>将3张表组合一起查询</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">SELECT</span>
    <span style="color: #808080">*</span>
<span style="color: #0000ff">FROM</span><span style="color: #000000">
    nan_nv
</span><span style="color: #808080">LEFT</span> <span style="color: #808080">JOIN</span> nan <span style="color: #0000ff">ON</span> nan_nv.nan_id <span style="color: #808080">=</span><span style="color: #000000"> nan.id
</span><span style="color: #808080">LEFT</span> <span style="color: #808080">JOIN</span> nv <span style="color: #0000ff">ON</span> nan_nv.nv_id <span style="color: #808080">=</span> nv.id;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170611105419075-1605552336.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000; background-color: #ffff00"><strong>将3张表组合一起加<strong><strong><strong><strong>WHERE条件</strong></strong></strong></strong>查询</strong></span></p>
<p><span style="color: #0000ff; background-color: #ffffff"><strong>如：查询与张三有过恋爱关系的女人</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">SELECT</span>
    <span style="color: #808080">*</span>
<span style="color: #0000ff">FROM</span><span style="color: #000000">
    nan_nv
</span><span style="color: #808080">LEFT</span> <span style="color: #808080">JOIN</span> nan <span style="color: #0000ff">ON</span> nan_nv.nan_id <span style="color: #808080">=</span><span style="color: #000000"> nan.id
</span><span style="color: #808080">LEFT</span> <span style="color: #808080">JOIN</span> nv <span style="color: #0000ff">ON</span> nan_nv.nv_id <span style="color: #808080">=</span><span style="color: #000000"> nv.id
</span><span style="color: #0000ff">WHERE</span> nan.nan <span style="color: #808080">=</span> <span style="color: #ff0000">'</span><span style="color: #ff0000">张三(男)</span><span style="color: #ff0000">'</span>;</pre>
</div>
<p><img src="https://images2015.cnblogs.com/blog/955761/201706/955761-20170611105746747-791653133.png" alt=""></p>
<p>&nbsp;</p></div>