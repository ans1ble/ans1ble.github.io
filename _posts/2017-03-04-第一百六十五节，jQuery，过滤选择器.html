第一百六十五节，jQuery，过滤选择器


			<div id="cnblogs_post_body" class="blogpost-body"><p><span style="color: #0000ff"><strong>jQuery，过滤选择器</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #000000"><strong>学习要点： </strong></span></p>
<p><span style="color: #000000"><strong>　　1.基本过滤器 </strong></span></p>
<p><span style="color: #000000"><strong>　　2.内容过滤器 </strong></span></p>
<p><span style="color: #000000"><strong>　　3.可见性过滤器 </strong></span></p>
<p><span style="color: #000000"><strong>　　4.子元素过滤器</strong></span></p>
<p><span style="color: #000000"><strong> 　　5.其他方法</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #000000"><strong>过滤选择器简称：过滤器。它其实也是一种选择器，而这种选择器类似与 CSS3 (http://t.mb5u.com/css3/)里的伪类，可以让不支持 CSS3 的低版本浏览器也能支持。和常规 选择器一样，jQuery 为了更方便开发者使用，提供了很多独有的过滤器。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>一．基本过滤器 </strong></span></p>
<p><span style="color: #000000"><strong>过滤器主要通过特定的过滤规则来筛选所需的 DOM 元素，和 CSS 中的伪类的语法类 似：使用冒号(:)开头。</strong></span></p>
<p><span style="color: #000000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201703/955761-20170304180827876-770017338.png" alt=""></strong></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre>$('li:first').css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">第一个元素</span>
$('li:last).css('background', '#ccc'<span style="color: #000000">); //最后一个元素
$(</span>'li:not(.red)).css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">非 class 为 red 的元素</span>
$('li:even').css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">索引为偶数的元素</span>
$('li:odd).css('background', '#ccc'<span style="color: #000000">); //索引为奇数的元素
$(</span>'li:eq(2)).css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">指定索引值的元素</span>
$('li:gt(2)').css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">大于索引值的元素</span>
$('li:lt(2)').css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">小于索引值的元素</span>
$(':header').css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">页面所有 h1 ~ h6 元素</span></pre>
</div>
<p><span style="color: #ff0000"><strong>:first，语法$('li:first')，选取第一个元素，返回单个元素</strong></span></p>
<p><br><span style="color: #ff0000"><strong>:last，语法，$('li:last')，选取最后一个元素，返回单个元素</strong></span></p>
<p><br><span style="color: #ff0000"><strong>:not(selector)，语法，$('li:not(.red)')，选取 class 不是 red 的 li 元素，返回集合元素</strong></span></p>
<p><br><span style="color: #ff0000"><strong>:even，语法，$('li.even')，选择索引(0 开始)是偶数的所有元素，返回集合元素</strong></span></p>
<p><br><span style="color: #ff0000"><strong>:odd，语法，$('li:odd')，选择索引(0 开始)是奇数的所有元素，返回集合元素</strong></span></p>
<p><br><span style="color: #ff0000"><strong>:eq(index)，$('li:eq(2)')，选择索引(0 开始)等于 index 的元素，返回单个元素</strong></span></p>
<p><br><span style="color: #ff0000"><strong>:gt(index)，语法，$('li:gt(2)')，选择索引(0 开始)大于 index 的元素，返回集合元素</strong></span></p>
<p><br><span style="color: #ff0000"><strong>:lt(index)，语法，$('li.lt(2)')，选择索引(0 开始)小于 index 的元素，返回集合元素</strong></span></p>
<p><br><span style="color: #ff0000"><strong>:header，语法，$(':header')，选择标题元素，h1 ~ h6，返回集合元素</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>:animated，语法，$(':animated')，选择正在执行动画的元素，返回集合元素</strong></span></p>
<p>&nbsp;</p>
<p><strong>注意：:focus 过滤器，必须是网页初始状态的已经被激活焦点的元素才能实现元素获取。 而不是鼠标点击或者 Tab 键盘敲击激活的。</strong></p>
<p><span style="color: #ff0000"><strong>:focus，语法，$(':focus')，选择当前被焦点的元素，返回集合元素</strong></span></p>
<div class="cnblogs_code">
<pre>$('input').get(0).focus(); <span style="color: #008000">//</span><span style="color: #008000">先初始化激活一个元素焦点</span>
$(':focus').css('background', 'red'); <span style="color: #008000">//</span><span style="color: #008000">被焦点的元素</span></pre>
</div>
<p><strong>jQuery 为最常用的过滤器提供了专用的方法，已达到提到性能和效率的作用：</strong></p>
<p><span style="color: #ff0000"><strong>eq(2)方法，获取集合节点里指定索引的节点，参数是指定的索引，返回单个节点</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>first()方法，获取集合节点里第一个节点，无参，返回单个节点</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>last()方法，获取集合节点里第最后一个节点，无参，返回单个节点</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>not('.red')方法，获取集合节点里不含 class 为 red 的元素，返回集合</strong></span></p>
<div class="cnblogs_code">
<pre>$('li').eq(2).css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">元素 li 的第三个元素，负数从后开始</span>
$('li').first().css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">元素 li 的第一个元素</span>
$('li').last().css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">元素 li 的最后一个元素</span>
$('li').not('.red').css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">元素 li 不含 class 为 red 的元素</span></pre>
</div>
<p><strong>注意：:first、:last 和 first()、last()这两组过滤器和方法在出现相同元素的时候，first 会 实现第一个父元素的第一个子元素，last 会实现最后一个父元素的最后一个子元素。所以， 如果需要明确是哪个父元素，需要指明：</strong></p>
<div class="cnblogs_code">
<pre>$('#box li:last').css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">#box 元素的最后一个 li</span><span style="color: #008000">
//</span><span style="color: #008000">或</span>
$('#box li).last().css('background', '#ccc'); //同上</pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>二．内容过滤器 </strong></span></p>
<p><strong>内容过滤器的过滤规则主要是包含的子元素或文本内容上。</strong></p>
<p><strong><img src="https://images2015.cnblogs.com/blog/955761/201703/955761-20170304190509954-1640745433.png" alt=""></strong></p>
<p><span style="color: #ff0000"><strong>:contains(text)，$(':contains("ycku.com")')，选取含有"ycku.com"文本的元素，返回元素集合</strong></span></p>
<p><br><span style="color: #ff0000"><strong>:empty，$(':empty')，选取不包含子元素或空文本的元素，返回元素集合</strong></span></p>
<p><br><span style="color: #ff0000"><strong>:has(selector)，$(':has(.red)')，选取含有 class 是 red 的元素，返回元素集合</strong></span></p>
<p><br><span style="color: #ff0000"><strong>:parent，$(':parent')，选取含有子元素或文本的元素，返回元素集合</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">选择元素文本节点含有 ycku.com 文本的元素</span>
$('div:contains("ycku.com")').css('background', '#ccc'<span style="color: #000000">);
$(</span>'div:empty').css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">选择空元素</span>
$('ul:has(.red)').css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">选择子元素含有 class 是 red 的元素</span>
$(':parent').css('background', '#ccc'); </pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>has('.red')方法，选择子元素含有 class 是 red 的元素，返回集合</strong></span></p>
<p><br><span style="color: #ff0000"><strong>parent()方法，选择当前元素的父元素，无参，</strong></span></p>
<p><br><span style="color: #ff0000"><strong>parents()方法，选择当前元素的父元素及祖先元素，无参</strong></span></p>
<p><br><span style="color: #ff0000"><strong>parentsUntil('div')方法，选择当前元素遇到 div 父元素停止</strong></span></p>
<p>&nbsp;</p>
<p><strong>jQuery 提供了一个 has()方法来提高:has 过滤器的性能：</strong></p>
<div class="cnblogs_code">
<pre>$('ul').has('.red').css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">选择子元素含有 class 是 red 的元素</span></pre>
</div>
<p><strong>jQuery 提供了一个名称和:parent 相似的方法，但这个方法并不是选取含有子元素或文本 的元素，而是获取当前元素的父元素，返回的是元素集合。</strong></p>
<div class="cnblogs_code">
<pre>$('li').parent().css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">选择当前元素的父元素</span>
$('li').parents().css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">选择当前元素的父元素及祖先元素</span>
$('li').parentsUntil('div').css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">选择当前元素遇到 div 父元素停止</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>三．可见性过滤器</strong></span></p>
<p><strong> 可见性过滤器根据元素的可见性和不可见性来选择相应的元素。</strong></p>
<p><strong><img src="https://images2015.cnblogs.com/blog/955761/201703/955761-20170304193549220-1956034709.png" alt=""></strong></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>:hidden，$(':hidden')，选取所有不可见元素，集合元素</strong></span></p>
<p><br><span style="color: #ff0000"><strong>:visible，$(':visible')，选取所有可见元素，集合元素</strong></span></p>
<div class="cnblogs_code">
<pre>$('<span style="color: #000000">p:hidden).size(); //元素 p 隐藏的元素
$(</span>'p:visible').size(); //元素 p 显示的元素</pre>
</div>
<p><span style="color: #0000ff"><strong>&nbsp;注意：:hidden 过滤器一般是包含的内容为：CSS 样式为 display:none、input 表单类型为 type="hidden"和 visibility:hidden 的元素。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>四．子元素过滤器 </strong></span></p>
<p><span style="color: #000000"><strong>子元素过滤器的过滤规则是通过父元素和子元素的关系来获取相应的元素。</strong></span></p>
<p><span style="color: #0000ff"><strong><img src="https://images2015.cnblogs.com/blog/955761/201703/955761-20170305130104923-1307073728.png" alt=""></strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>:first-child，$('li:first-child')，获取每个父元素的第一个子元素，集合元素</strong></span></p>
<p><br><span style="color: #ff0000"><strong>:last-child，$('li:last-child')，获取每个父元素的最后一个子元素，集合元素</strong></span></p>
<p><br><span style="color: #ff0000"><strong>:only-child，$('li:only-child')，获取只有一个子元素的元素，集合元素</strong></span></p>
<p><br><span style="color: #ff0000"><strong>:nth-child(odd/even/eq(index))，$('li:nth-child(even)')，获取每个自定义子元素的元素(索引值从 1 开始计算)，集合元素</strong></span></p>
<div class="cnblogs_code">
<pre>$('li:first-child').css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">每个父元素第一个 li 元素</span>
$('li:last-child').css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">每个父元素最后一个 li 元素</span>
$('li:only-child').css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">每个父元素只有一个 li 元素</span>
$('li:nth-child(odd)').css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">每个父元素奇数 li 元素</span>
$('li:nth-child(even)').css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">每个父元素偶数 li 元素</span>
$('li:nth-child(2)').css('background', '#ccc'); <span style="color: #008000">//</span><span style="color: #008000">每个父元素第三个 li 元素</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>五．其他方法 </strong></span></p>
<p><strong>jQuery 在选择器和过滤器上，还提供了一些常用的方法，方便我们开发时灵活使用。</strong></p>
<p><strong><img src="https://images2015.cnblogs.com/blog/955761/201703/955761-20170305141300813-1979540636.png" alt=""></strong></p>
<p><img src="https://images2015.cnblogs.com/blog/955761/201703/955761-20170305141310845-1829208774.png" alt=""></p>
<p><span style="color: #ff0000"><strong>is(s/o/e/f)，$('li').is('.red')，传递选择器、DOM、jquery 对象，集合元素</strong></span></p>
<p><br><span style="color: #ff0000"><strong>hasClass(class)，$('li').eq(2).hasClass('red')，其实就是 is("." + class)，集合元素</strong></span></p>
<p><br><span style="color: #ff0000"><strong>slice(start, end)，$('li').slice(0,2)，选择从 start 到 end 位置的元素，如果是负数，则从后开始，集合元素</strong></span></p>
<p><br><span style="color: #ff0000"><strong>filter(s/o/e/f)，$('li').filter('.red')</strong></span></p>
<p><br><span style="color: #ff0000"><strong>end()，$('div').find('p').end()，获取当前元素前一次状态，集合元素</strong></span></p>
<p><br><span style="color: #ff0000"><strong>contents()，$('div').contents()，获取某元素下面所有元素节点，包括文本节点，如果是 iframe，则可以查找文本内容，集合元素</strong></span></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre>$('.red').is('li'); <span style="color: #008000">//</span><span style="color: #008000">true，选择器，检测 class 为是否为 red</span>
$('.red').is($('li')); <span style="color: #008000">//</span><span style="color: #008000">true，jQuery 对象集合，同上</span>
$('.red').is($('li').eq(2)); <span style="color: #008000">//</span><span style="color: #008000">true，jQuery 对象单个，同上</span>
$('.red').is($('li').get(2)); <span style="color: #008000">//</span><span style="color: #008000">true，DOM 对象，同上</span>
$('.red').is(<span style="color: #0000ff">function</span> () { <span style="color: #008000">//</span><span style="color: #008000">true，方法，同上</span>
<span style="color: #0000ff">return</span> $(<span style="color: #0000ff">this</span>).attr('title') == '列表 3'; <span style="color: #008000">//</span><span style="color: #008000">可以自定义各种判断</span>
<span style="color: #000000">}));
$(</span>'li').eq(2).hasClass('red'); <span style="color: #008000">//</span><span style="color: #008000">和 is 一样，只不过只能传递 class</span>
$('li').slice(0,2).css('color', 'red'); <span style="color: #008000">//</span><span style="color: #008000">前三个变成红色</span></pre>
</div>
<p><span style="color: #0000ff"><strong>注意：这个参数有多种传法和 JavaScript 的 slice 方法是一样的比如：slice(2)，从第三个 开始到最后选定；slice(2,4)，第三和第四被选定；slice(0,-2)，从倒数第三个位置，向前选定 所有；slice(2,-2)，前两个和末尾两个未选定。</strong></span></p>
<div class="cnblogs_code">
<pre>$("div").find("p").end().get(0); <span style="color: #008000">//</span><span style="color: #008000">返回 div 的原生 DOM</span>
$('div').contents().size(); <span style="color: #008000">//</span><span style="color: #008000">返回子节点(包括文本)数量</span>
$('li').filter('.red').css('background','#ccc'); <span style="color: #008000">//</span><span style="color: #008000">选择 li 的 class 为 red 的元素</span>
$('li').filter('.red, :first, :last').css('background','#ccc'); <span style="color: #008000">//</span><span style="color: #008000">增加了首尾选择</span><span style="color: #008000">
//</span><span style="color: #008000">特殊要求函数返回</span>
$('li').filter(<span style="color: #0000ff">function</span><span style="color: #000000"> () {
</span><span style="color: #0000ff">return</span> $(<span style="color: #0000ff">this</span>).attr('class') == 'red' &amp;&amp; $(<span style="color: #0000ff">this</span>).attr('title') == '列表 3'<span style="color: #000000">;
}).css(</span>'background', '#ccc');</pre>
</div>
<p>&nbsp;</p></div>