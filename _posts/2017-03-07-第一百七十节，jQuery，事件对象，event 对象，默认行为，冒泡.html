第一百七十节，jQuery，事件对象，event 对象，默认行为，冒泡


			<div id="cnblogs_post_body" class="blogpost-body"><p><span style="color: #0000ff"><strong>jQuery，事件对象，event 对象，默认行为，冒泡</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #000000"><strong>学习要点： </strong></span></p>
<p><span style="color: #000000"><strong>　　1.事件对象 </strong></span></p>
<p><span style="color: #000000"><strong>　　2.冒泡和默认行为</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #000000"><strong>JavaScript 在事件处理函数中默认传递了 event 对象，也就是事件对象。但由于浏览器 的兼容性，开发者总是会做兼容方面的处理。jQuery 在封装的时候，解决了这些问题，并且 还创建了一些非常好用的属性和方法。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>一．事件对象 </strong></span></p>
<p><span style="color: #000000"><strong>事件对象就是 event 对象，通过处理函数默认传递接受。之前处理函数的 e 就是 event 事件对象，event 对象有很多可用的属性和方法，我们在 JavaScript 课程中已经详细的了解 过这些常用的属性和方法，这里，我们再一次演示一下。</strong></span></p>
<p><span style="color: #ff0000"><strong>通过处理函数传递事件对象</strong></span></p>
<div class="cnblogs_code">
<pre>    <span style="color: #008000">//</span><span style="color: #008000">通过处理函数传递事件对象</span>
    $('input').bind('click', <span style="color: #0000ff">function</span> (e) { <span style="color: #008000">//</span><span style="color: #008000">接受事件对象参数</span>
<span style="color: #000000">        alert(e);
    });</span></pre>
</div>
<p>&nbsp;</p>
<p><img src="https://images2015.cnblogs.com/blog/955761/201703/955761-20170307180233906-1318230108.png" alt=""></p>
<p><img src="https://images2015.cnblogs.com/blog/955761/201703/955761-20170307180243625-1759784398.png" alt=""></p>
<p><span style="color: #ff0000"><strong>type 属性获取这个事件的事件类型，例如：click</strong></span></p>
<div class="cnblogs_code">
<pre>    $('div').click(<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(e.type);  </span><span style="color: #008000">//</span><span style="color: #008000">打印click</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>target 属性获取<strong>触发</strong>事件的 DOM 元素，就是触发元素的节点，比如，div下还有一个p，而div做了点击事件，点击div时得到的div节点，点击p时得到的p节点，适应冒泡规则</strong></span></p>
<div class="cnblogs_code">
<pre>    $('div').click(<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(e.target);  </span><span style="color: #008000">//</span><span style="color: #008000">打印[object HTMLDivElement]</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><br><span style="color: #ff0000"><strong>data 属性获取事件调用时的额外数据，也就是可在事件函数里以形式参数的方式传参，用<strong>data来接收，额外数据，可以是数字、字符串、数组、对象</strong></strong></span></p>
<div class="cnblogs_code">
<pre>    $('div').bind('click',123456,<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(e.data);  </span><span style="color: #008000">//</span><span style="color: #008000">打印 123456</span>
    });</pre>
</div>
<p><span style="color: #0000ff"><strong>注意：如果字符串就传递：'123'、如果是数组就传递：[123,'abc']，如果是对象就传递： {user : 'Lee', age : 100}。数组的调用方式是：e.data[1]，对象的调用方式是：e.data.user。</strong></span></p>
<p>&nbsp;</p>
<p><br><span style="color: #ff0000"><strong>relatedTarget 属性获取移入移出目标点离开或进入的那个 DOM 元素，也就是鼠标移入或者移出时，鼠标经过路径中距离事件元素最近的节点</strong></span></p>
<div class="cnblogs_code">
<pre>    $('span').bind('mouseover',<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(e.relatedTarget);  </span><span style="color: #008000">//</span><span style="color: #008000">打印 鼠标经过路径中距离事件元素最近的节点</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><br><span style="color: #ff0000"><strong>currentTarget 属性获取冒泡前触发的 DOM 元素，等同与 this，得到的监听元素的节点，也就是绑定事件的元素节点，不适应冒泡规则</strong></span></p>
<div class="cnblogs_code">
<pre>    $('div').click(<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(e.currentTarget);  </span><span style="color: #008000">//</span><span style="color: #008000">打印[object HTMLDivElement]</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><br><span style="color: #ff0000"><strong>pageX <strong>属性获取相对于页面原点的水平<strong>坐标，也就是网页左边起始位置与鼠标的位置</strong></strong></strong></span></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre>    $('div').bind('click',<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(e.screenX);  </span><span style="color: #008000">//</span><span style="color: #008000">打印 网页左边起始位置与鼠标的位置</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>pageY 属性获取相对于页面原点的垂直坐标，<strong><strong><strong>也就是网页头部起始位置与鼠标的位置</strong></strong></strong></strong></span></p>
<div class="cnblogs_code">
<pre>    $('div').bind('click',<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(e.screenY);  </span><span style="color: #008000">//</span><span style="color: #008000">打印 也就是网页头部起始位置与鼠标的位置</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><br><span style="color: #ff0000"><strong>screenX&nbsp;<strong>属性获取显示器屏幕位置的水平<strong>坐标(非 jQuery 封装)，也就是显示器视口左边位置与鼠标的位置</strong></strong></strong></span></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre>    $('div').bind('click',<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(e.screenX);  </span><span style="color: #008000">//</span><span style="color: #008000">打印 也就是显示器视口左边位置与鼠标的位置</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>screenY 属性获取显示器屏幕位置的垂直坐标(非 jQuery 封装)，<strong><strong><strong>也就是<strong><strong><strong>显示器</strong></strong></strong>视口头部位置与鼠标的位置</strong></strong></strong></strong></span></p>
<div class="cnblogs_code">
<pre>    $('div').bind('click',<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(e.screenY);  </span><span style="color: #008000">//</span><span style="color: #008000">打印 也就是显示器视口头部位置与鼠标的位置</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><br><span style="color: #ff0000"><strong>clientX&nbsp;<strong>属性获取相对于页面视口的水平<strong>坐标(非 jQuery 封装)，<strong><strong><strong><strong><strong>也就是<strong><strong><strong>浏览器</strong></strong></strong>视口左边位置与鼠标的位置</strong></strong></strong></strong></strong></strong></strong></strong></span></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre>    $('div').bind('click',<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(e.clientX);  </span><span style="color: #008000">//</span><span style="color: #008000">打印 也就是浏览器视口左边位置与鼠标的位置</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>clientY 属性获取相对于页面视口的垂直坐标(非 jQuery 封装)，<strong><strong><strong><strong>也就是<strong><strong><strong>浏览器</strong></strong></strong>视口头部位置与鼠标的位置</strong></strong></strong></strong></strong></span></p>
<div class="cnblogs_code">
<pre>    $('div').bind('click',<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(e.clientY);  </span><span style="color: #008000">//</span><span style="color: #008000">打印 也就是浏览器视口头部位置与鼠标的位置</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><br><span style="color: #ff0000"><strong>result 属性获取上一个相同事件的返回值</strong></span></p>
<div class="cnblogs_code">
<pre>    $('div').bind('click',<span style="color: #0000ff">function</span><span style="color: #000000"> () {
        </span><span style="color: #0000ff">return</span> 123<span style="color: #000000">;
    });

    $(</span>'div').bind('click',<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(e.result);  </span><span style="color: #008000">//</span><span style="color: #008000">打印 属性获取上一个相同事件的返回值123</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><br><span style="color: #ff0000"><strong>timeStamp 属性获取事件触发的时间戳</strong></span></p>
<div class="cnblogs_code">
<pre>    $('div').bind('click',<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(e.timeStamp);  </span><span style="color: #008000">//</span><span style="color: #008000">打印 属性获取事件触发的时间戳,387015390</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><br><span style="color: #ff0000"><strong>which 属性获取鼠标的左中右键(1,2,3)，或获取键盘按键返回键码</strong></span></p>
<div class="cnblogs_code">
<pre>    $('input').bind('mousedown',<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(e.which);  </span><span style="color: #008000">//</span><span style="color: #008000">打印 属性获取鼠标的左中右键(1,2,3)</span>
    });</pre>
</div>
<div class="cnblogs_code">
<pre>    $('input').bind('keyup',<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(e.which);  </span><span style="color: #008000">//</span><span style="color: #008000">打印 取键盘按键,返回键码</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><br><span style="color: #ff0000"><strong>altKey 属性获取是否按下了alt键</strong></span></p>
<div class="cnblogs_code">
<pre>    $('input').bind('click',<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(e.altKey);  </span><span style="color: #008000">//</span><span style="color: #008000">打印 属性获取是否按下了alt键</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><br><span style="color: #ff0000"><strong>shiftKey 属性获取是否按下了shift键</strong></span></p>
<div class="cnblogs_code">
<pre>    $('input').bind('click',<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(e.shiftKey);  </span><span style="color: #008000">//</span><span style="color: #008000">打印 属性获取是否按下了shift键</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><br><span style="color: #ff0000"><strong>ctrlKey 属性获取是否按下了ctrl键</strong></span></p>
<div class="cnblogs_code">
<pre>    $('input').bind('click',<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(e.ctrlKey);  </span><span style="color: #008000">//</span><span style="color: #008000">打印 属性获取是否按下了ctrl键</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><br><span style="color: #ff0000"><strong>metaKey 属性获取是否按下了meta键</strong></span></p>
<p><br><span style="color: #0000ff"><strong>获取是否按下了 alt、shift、ctrl(这三个非 jQuery 封装)或</strong></span><br><span style="color: #0000ff"><strong>meta 键(IE 原生 meta 键，jQuery 做了封装)</strong></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>二．冒泡和默认行为</strong></span></p>
<p><strong>如果在页面中重叠了多个元素，并且重叠的这些元素都绑定了同一个事件，那么就会出 现冒泡问题。</strong></p>
<p><span style="color: #ff0000"><strong>冒泡说明</strong></span></p>
<p><span style="color: #0000ff"><strong>html</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff">&lt;</span><span style="color: #800000">div </span><span style="color: #ff0000">style</span><span style="color: #0000ff">="width:200px;height:200px;background:red;"</span><span style="color: #0000ff">&gt;</span>
    <span style="color: #0000ff">&lt;</span><span style="color: #800000">input </span><span style="color: #ff0000">type</span><span style="color: #0000ff">="button"</span><span style="color: #ff0000"> value</span><span style="color: #0000ff">="按钮"</span><span style="color: #0000ff">/&gt;</span>
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">div</span><span style="color: #0000ff">&gt;</span></pre>
</div>
<p><span style="color: #0000ff"><strong>如果3个元素都需要绑定点击事件，这时点击最里面的input，就会产生冒泡行为，外围的元素都会被触发</strong></span></p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre>    <span style="color: #008000">//</span><span style="color: #008000">如果3个元素都需要绑定点击事件，这时点击最里面的input，就会产生冒泡行为，外围的元素都会被触发</span>
    $('input').bind('click',<span style="color: #0000ff">function</span><span style="color: #000000"> () {
        alert(</span>'点击input');  <span style="color: #008000">//</span><span style="color: #008000">打印</span>
<span style="color: #000000">    });
    $(</span>'div').bind('click',<span style="color: #0000ff">function</span><span style="color: #000000"> () {
        alert(</span>'点击div');  <span style="color: #008000">//</span><span style="color: #008000">打印</span>
<span style="color: #000000">    });
    $(document).bind(</span>'click',<span style="color: #0000ff">function</span><span style="color: #000000"> () {
        alert(</span>'点击document');  <span style="color: #008000">//</span><span style="color: #008000">打印</span>
    });</pre>
</div>
<p><span style="color: #0000ff"><strong>注意：当我们点击文档的时候，只触发文档事件；当我们点击 div 层时，触发了 div 和 文档两个；当我们点击按钮时，触发了按钮、div 和文档。触发的顺序是从小范围到大范围。 这就是所谓的冒泡现象，一层一层往上。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #000000"><strong>jQuery 提供了一个事件对象的方法：event.stopPropagation()；这个方法设置到需要触发 的事件上时，所有上层的冒泡行为都将被取消。</strong></span></p>
<p><span style="color: #ff0000"><strong><strong>stopPropagation()取消事件冒泡行为</strong></strong></span></p>
<div class="cnblogs_code">
<pre>    $('input').bind('click',<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(</span>'点击input');  <span style="color: #008000">//</span><span style="color: #008000">打印</span>
        e.stopPropagation(); <span style="color: #008000">//</span><span style="color: #008000">取消冒泡行为</span>
<span style="color: #000000">    });
    $(</span>'div').bind('click',<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(</span>'点击div');  <span style="color: #008000">//</span><span style="color: #008000">打印</span>
        e.stopPropagation(); <span style="color: #008000">//</span><span style="color: #008000">取消冒泡行为</span>
<span style="color: #000000">    });
    $(document).bind(</span>'click',<span style="color: #0000ff">function</span><span style="color: #000000"> () {
        alert(</span>'点击document');  <span style="color: #008000">//</span><span style="color: #008000">打印</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>默认行为</strong></span></p>
<p><span style="color: #000000"><strong>网页中的元素，在操作的时候会有自己的默认行为。比如：右击文本框输入区域，会弹 出系统菜单、点击超链接会跳转到指定页面、点击提交按钮会提交数据。</strong></span></p>
<p><span style="color: #ff0000"><strong>preventDefault()阻止元素的默认行为</strong></span></p>
<div class="cnblogs_code">
<pre>    $('a').click(<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        e.preventDefault();  </span><span style="color: #008000">//</span><span style="color: #008000">阻止默认行为后超链接点击后无法跳转</span>
    });</pre>
</div>
<p><span style="color: #0000ff"><strong>禁止提交表单跳转</strong></span></p>
<div class="cnblogs_code">
<pre>    $('form').submit(<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        e.preventDefault(); </span><span style="color: #008000">//</span><span style="color: #008000">阻止默认行为后，禁止提交表单跳转</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>同时阻止默认行为和取消冒泡行为的简写方案</strong></span></p>
<p><span style="color: #0000ff"><strong>注意：如果想让上面的超链接同时阻止默认行为且禁止冒泡行为，可以把两个方法同时 写上：event.stopPropagation()和 event.preventDefault()。这两个方法如果需要同时启用的时候， 还有一种简写方案代替，就是直接 return false。</strong></span></p>
<div class="cnblogs_code">
<pre>    $('a').click(<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        </span><span style="color: #0000ff">return</span> <span style="color: #0000ff">false</span><span style="color: #000000">;
    });</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>冒泡和默认行为的一些方法</strong></span></p>
<p><span style="color: #ff0000"><strong><img src="https://images2015.cnblogs.com/blog/955761/201703/955761-20170308132847281-344059653.png" alt=""></strong></span></p>
<p><span style="color: #ff0000"><strong>preventDefault() 取消某个元素的默认行为</strong></span></p>
<div class="cnblogs_code">
<pre>　　$('a').click(<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        e.preventDefault();  </span><span style="color: #008000">//</span><span style="color: #008000">阻止默认行为后超链接点击后无法跳转</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><br><span style="color: #ff0000"><strong>isDefaultPrevented() 判断是否调用了 preventDefault()方法</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">判断是否取消了元素的默认行为</span>
    $('input').keyup(<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        e.preventDefault();
        alert(e.isDefaultPrevented());
    });</span></pre>
</div>
<p>&nbsp;</p>
<p><br><span style="color: #ff0000"><strong>stopPropagation() 取消事件冒泡</strong></span></p>
<div class="cnblogs_code">
<pre>$('input').bind('click',<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(</span>'点击input');  <span style="color: #008000">//</span><span style="color: #008000">打印</span>
        e.stopPropagation(); <span style="color: #008000">//</span><span style="color: #008000">取消冒泡行为</span>
    });</pre>
</div>
<p>&nbsp;</p>
<p><br><span style="color: #ff0000"><strong>isPropagationStopped() 判断是否调用了 stopPropagation()方法</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">判断是否调用了 stopPropagation()方法</span>
    $('input').click(<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        e.stopPropagation();
        alert(e.isPropagationStopped());
    });</span></pre>
</div>
<p>&nbsp;</p>
<p><br><span style="color: #ff0000"><strong>stopImmediatePropagation() 取消事件冒泡，并取消该事件的后续事件处理函数</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">取消冒泡并取消后续事件处理函数</span>
    $('input').click(<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        alert(</span>'input'<span style="color: #000000">);
        e.stopImmediatePropagation();  </span><span style="color: #008000">//</span><span style="color: #008000">取消冒泡并取消后续事件处理函数</span>
<span style="color: #000000">    });
    $(</span>'input').click(<span style="color: #0000ff">function</span> () {     <span style="color: #008000">//</span><span style="color: #008000">这里属于后续事件，将不执行了</span>
        alert('input2'<span style="color: #000000">);
    });
    $(document).click(</span><span style="color: #0000ff">function</span><span style="color: #000000"> () {
        alert(</span>'document'<span style="color: #000000">);
    });</span></pre>
</div>
<p>&nbsp;</p>
<p><br><span style="color: #ff0000"><strong>isImmediatePropagationStopped() 判断是否调用了 stopImmediatePropagation()方法</strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #008000">//</span><span style="color: #008000">判断是否执行了 stopImmediatePropagation()方法</span>
    $('input').click(<span style="color: #0000ff">function</span><span style="color: #000000"> (e) {
        e.stopImmediatePropagation();
        alert(e.isImmediatePropagationStopped());
    });</span></pre>
</div>
<p>&nbsp;</p></div>