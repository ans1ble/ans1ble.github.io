第二百二十九节，jQuery EasyUI，后台管理界面---后台登录


			<div id="cnblogs_post_body" class="blogpost-body"><p><strong>jQuery EasyUI，后台管理界面---后台登录</strong></p>
<p>&nbsp;</p>
<p><strong>登录原理图</strong></p>
<p><img src="https://images2015.cnblogs.com/blog/955761/201704/955761-20170424142458397-1822692468.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>一，login.php，登录界面</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;jQuery Easy UI&lt;/title&gt;
&lt;meta charset="UTF-8" /&gt;
&lt;link rel="stylesheet" type="text/css" href="easyui/themes/default/easyui.css" /&gt;
&lt;link rel="stylesheet" type="text/css" href="easyui/themes/icon.css" /&gt;
&lt;link rel="stylesheet" type="text/css" href="css/login.css" /&gt;
&lt;/head&gt;
&lt;body&gt;


&lt;div id="login"&gt;
    &lt;p&gt;管理员帐号：&lt;input type="text" id="manager" <span style="color: #0000ff">class</span>="textbox"&gt;&lt;/p&gt;
    &lt;p&gt;管理员密码：&lt;input type="password" id="password" <span style="color: #0000ff">class</span>="textbox"&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div id="btn"&gt;
    &lt;a href="#" <span style="color: #0000ff">class</span>="easyui-linkbutton"&gt;登录&lt;/a&gt;
&lt;/div&gt;


&lt;script type="text/javascript" src="easyui/jquery.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="easyui/jquery.easyui.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="easyui/locale/easyui-lang-zh_CN.js" &gt;&lt;/script&gt;
&lt;script type="text/javascript" src="js/index.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>二，index.js，设置登录界面样式，和验证登录信息，提交数据</strong></span></p>
<div class="cnblogs_code">
<pre>$(<span style="color: #0000ff">function</span><span style="color: #000000"> () {
    
    </span><span style="color: #008000">//</span><span style="color: #008000">登录界面</span>
    $('#login').dialog({                <span style="color: #008000">//</span><span style="color: #008000">登录对话框</span>
        title : '登录后台'<span style="color: #000000">,
        width : </span>300<span style="color: #000000">,
        height : </span>180<span style="color: #000000">,
        modal : </span><span style="color: #0000ff">true</span>,                    <span style="color: #008000">//</span><span style="color: #008000">遮罩锁屏</span>
        iconCls : 'icon-login',            <span style="color: #008000">//</span><span style="color: #008000">图标</span>
        buttons : '#btn',                <span style="color: #008000">//</span><span style="color: #008000">将登录按钮加载到对话框里</span>
<span style="color: #000000">    });
    
    </span><span style="color: #008000">//</span><span style="color: #008000">管理员帐号验证</span>
    $('#manager'<span style="color: #000000">).validatebox({
        required : </span><span style="color: #0000ff">true</span>,                                <span style="color: #008000">//</span><span style="color: #008000">账号不能为空</span>
        missingMessage : '请输入管理员帐号',                <span style="color: #008000">//</span><span style="color: #008000">提示信息</span>
        invalidMessage : '管理员帐号不得为空',            <span style="color: #008000">//</span><span style="color: #008000">错误信息</span>
<span style="color: #000000">    });
    
    </span><span style="color: #008000">//</span><span style="color: #008000">管理员密码验证</span>
    $('#password'<span style="color: #000000">).validatebox({
        required : </span><span style="color: #0000ff">true</span>,                                <span style="color: #008000">//</span><span style="color: #008000">密码不能为空</span>
        validType : 'length[6,30]',                        <span style="color: #008000">//</span><span style="color: #008000">长度6到30位之间</span>
        missingMessage : '请输入管理员密码',                <span style="color: #008000">//</span><span style="color: #008000">提示信息</span>
        invalidMessage : '管理员密码不得为空',            <span style="color: #008000">//</span><span style="color: #008000">错误信息</span>
<span style="color: #000000">    });
    
    </span><span style="color: #008000">//</span><span style="color: #008000">加载时判断验证</span>
    <span style="color: #0000ff">if</span> (!$('#manager').validatebox('isValid')) {                   <span style="color: #008000">//</span><span style="color: #008000">判断账号是否合法</span>
        $('#manager').focus();                                       <span style="color: #008000">//</span><span style="color: #008000">如果不合法将光标定位到输入框</span>
    } <span style="color: #0000ff">else</span> <span style="color: #0000ff">if</span> (!$('#password').validatebox('isValid')) {           <span style="color: #008000">//</span><span style="color: #008000">判断密码是否合法</span>
        $('#password').focus();                                       <span style="color: #008000">//</span><span style="color: #008000">如果不合法将光标定位动输入框</span>
<span style="color: #000000">    }
    
    
    </span><span style="color: #008000">//</span><span style="color: #008000">单击登录</span>
    $('#btn a').click(<span style="color: #0000ff">function</span><span style="color: #000000"> () {
        </span><span style="color: #0000ff">if</span> (!$('#manager').validatebox('isValid')) {                <span style="color: #008000">//</span><span style="color: #008000">判断账号是否合法</span>
            $('#manager').focus();                                    <span style="color: #008000">//</span><span style="color: #008000">如果不合法将光标定位到输入框</span>
        } <span style="color: #0000ff">else</span> <span style="color: #0000ff">if</span> (!$('#password').validatebox('isValid')) {        <span style="color: #008000">//</span><span style="color: #008000">判断密码是否合法</span>
            $('#password').focus();                                    <span style="color: #008000">//</span><span style="color: #008000">如果不合法将光标定位动输入框</span>
        } <span style="color: #0000ff">else</span> {                                                    <span style="color: #008000">//</span><span style="color: #008000">如果账号和密码都合法</span>
            $.ajax({                                                <span style="color: #008000">//</span><span style="color: #008000">执行ajax提交数据库</span>
                url : 'checklogin.php',                                <span style="color: #008000">//</span><span style="color: #008000">提交页面</span>
                type : 'post',                                        <span style="color: #008000">//</span><span style="color: #008000">提交方式</span>
                data : {                                            <span style="color: #008000">//</span><span style="color: #008000">提交数据</span>
                    manager : $('#manager').val(),                    <span style="color: #008000">//</span><span style="color: #008000">获取账号输入框值提交</span>
                    password : $('#password').val(),                <span style="color: #008000">//</span><span style="color: #008000">获取密码输入框值提交</span>
<span style="color: #000000">                },
                beforeSend : </span><span style="color: #0000ff">function</span> () {                            <span style="color: #008000">//</span><span style="color: #008000">提交时事件</span>
                    $.messager.progress({                            <span style="color: #008000">//</span><span style="color: #008000">创建窗口信息，进度条方式</span>
                        text : '正在登录中...',                        <span style="color: #008000">//</span><span style="color: #008000">提示内容</span>
<span style="color: #000000">                    });
                },
                success : </span><span style="color: #0000ff">function</span> (data, response, status) {        <span style="color: #008000">//</span><span style="color: #008000">提交后事件</span>
                    $.messager.progress('close');                    <span style="color: #008000">//</span><span style="color: #008000">关闭进度条方式的窗口信息</span>
                    
                    <span style="color: #0000ff">if</span> (data &gt; 0) {                                    <span style="color: #008000">//</span><span style="color: #008000">判断如果checklogin.php返回大于0，表示登录成功</span>
                        location.href = 'admin.php';                <span style="color: #008000">//</span><span style="color: #008000">跳转到后台页面</span>
                    } <span style="color: #0000ff">else</span><span style="color: #000000"> {
                        $.messager.alert(</span>'登录失败！', '用户名或密码错误！', 'warning', <span style="color: #0000ff">function</span> () {        <span style="color: #008000">//</span><span style="color: #008000">窗口信息提示登录失败</span>
                            $('#password').select();    <span style="color: #008000">//</span><span style="color: #008000">选中密码框文本</span>
<span style="color: #000000">                        });
                    }
                }
            });
        }
    });
    
});</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff0000"><strong>三，checklogin.php，接收提交的用户数据，数据库查找</strong></span></p>
<div class="cnblogs_code">
<pre>&lt;?<span style="color: #000000">php
    </span><span style="color: #008080">session_start</span><span style="color: #000000">();
    </span><span style="color: #0000ff">require</span> 'config.php';                       <span style="color: #008000">//</span><span style="color: #008000">引入数据库配置文件</span>
    
    <span style="color: #800080">$manager</span> = <span style="color: #800080">$_POST</span>['manager'];               <span style="color: #008000">//</span><span style="color: #008000">接收户名</span>
    <span style="color: #800080">$password</span> = <span style="color: #008080">sha1</span>(<span style="color: #800080">$_POST</span>['password']);       <span style="color: #008000">//</span><span style="color: #008000">接收密码</span>
    
    <span style="color: #800080">$query</span> = <span style="color: #008080">mysql_query</span>("SELECT id FROM easyui_admin WHERE manager='<span style="color: #800080">$manager</span>' AND password='<span style="color: #800080">$password</span>' LIMIT 1") or <span style="color: #0000ff">die</span>('SQL 错误！'<span style="color: #000000">);
    
    </span><span style="color: #0000ff">if</span> (!!<span style="color: #008080">mysql_fetch_array</span>(<span style="color: #800080">$query</span>, MYSQL_ASSOC)) {         <span style="color: #008000">//</span><span style="color: #008000">判断数据库里的用户名和密码与用户输入的匹配到</span>
        <span style="color: #800080">$_SESSION</span>['admin'] = <span style="color: #800080">$manager</span>;                      <span style="color: #008000">//</span><span style="color: #008000">创建SESSION</span>
        <span style="color: #0000ff">echo</span> 1;                                             <span style="color: #008000">//</span><span style="color: #008000">返回1</span>
    } <span style="color: #0000ff">else</span><span style="color: #000000"> {
        </span><span style="color: #0000ff">echo</span> 0;                                             <span style="color: #008000">//</span><span style="color: #008000">返回0</span>
<span style="color: #000000">    }
    
    
</span>?&gt;</pre>
</div>
<p>&nbsp;</p>
<p><strong><span style="color: #ff0000">四，数据库表</span></strong></p>
<p><strong><span style="color: #ff0000"><img src="https://images2015.cnblogs.com/blog/955761/201704/955761-20170424143453553-751411414.png" alt=""></span></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong><span style="color: #ff0000">五，admin.php，登录成功后界面</span></strong></p>
<p><strong><span style="color: #ff0000"><img src="https://images2015.cnblogs.com/blog/955761/201704/955761-20170424143653444-1403800592.png" alt=""></span></strong></p></div>